(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[170],{2060:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"g",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return f})),n.d(e,"a",(function(){return b})),n.d(e,"e",(function(){return m}));var r=n(33),o=n(165),a=n(2),c=n(63),i=n(161),s=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];c.a.apply(void 0,[t[e]].concat(r))};function u(t,e,n){return o.a.fetchDetails(e.teamId),t.request("/teams/".concat(e.orgId,"/").concat(e.teamId,"/"),{success:function(t){o.a.fetchDetailsSuccess(e.teamId,t),s(n,"success",t)},error:function(t){o.a.fetchDetailsError(e.teamId,t),s(n,"error",t)}})}function l(t,e){o.a.updateSuccess(t,e)}function d(t,e,n){var r="/teams/".concat(e.orgId,"/").concat(e.teamId,"/");return o.a.update(e.teamId,e.data),t.request(r,{method:"PUT",data:e.data,success:function(t){l(e.teamId,t),s(n,"success",t)},error:function(t){o.a.updateError(e.teamId,t),s(n,"error",t)}})}function p(t,e,n){var r,a="/organizations/".concat(e.orgId,"/members/").concat(null!==(r=e.memberId)&&void 0!==r?r:"me","/teams/").concat(e.teamId,"/"),c=Object(i.a)();return o.a.update(c,e.teamId),t.request(a,{method:"POST",success:function(t){o.a.updateSuccess(e.teamId,t),s(n,"success",t)},error:function(t){o.a.updateError(c,e.teamId,t),s(n,"error",t)}})}function f(t,e,n){var r="/organizations/".concat(e.orgId,"/members/").concat(e.memberId||"me","/teams/").concat(e.teamId,"/"),a=Object(i.a)();return o.a.update(a,e.teamId),t.request(r,{method:"DELETE",success:function(t){o.a.updateSuccess(e.teamId,t),s(n,"success",t)},error:function(t){o.a.updateError(a,e.teamId,t),s(n,"error",t)}})}function b(t,e,n){return o.a.createTeam(e),t.requestPromise("/organizations/".concat(n.orgId,"/teams/"),{method:"POST",data:e}).then((function(t){return o.a.createTeamSuccess(t),Object(r.c)(Object(a.c)("[team] has been added to the [organization] organization",{team:"#".concat(t.slug),organization:n.orgId})),t}),(function(t){throw o.a.createTeamError(e.slug,t),Object(r.a)(Object(a.c)("Unable to create [team] in the [organization] organization",{team:"#".concat(e.slug),organization:n.orgId})),t}))}function m(t,e){return o.a.removeTeam(e.teamId),t.requestPromise("/teams/".concat(e.orgId,"/").concat(e.teamId,"/"),{method:"DELETE"}).then((function(t){return o.a.removeTeamSuccess(e.teamId,t),Object(r.c)(Object(a.c)("[team] has been removed from the [organization] organization",{team:"#".concat(e.teamId),organization:e.orgId})),t}),(function(t){throw o.a.removeTeamError(e.teamId,t),Object(r.a)(Object(a.c)("Unable to remove [team] from the [organization] organization",{team:"#".concat(e.teamId),organization:e.orgId})),t}))}},2129:function(t,e,n){"use strict";var r=n(5),o=n.n(r),a=n(14),c=n.n(a),i=n(9),s=n.n(i),u=n(10),l=n.n(u),d=n(11),p=n.n(d),f=n(12),b=n.n(f),m=n(7),j=n.n(m),g=n(3),h=n(1),O=n.n(h),v=n(50),y=n(6),I=n(8),S=n.n(I),T=n(35),k=n(572),w=n(22),P=n(589),x=n(470),N=n(305),E=n(0),z=function(t){var e=t.badge,n=t.label,r=t.index,a=t.id,i=c()(t,["badge","label","index","id"]),s=Object(N.a)({hookName:"sidebar:item-label",defaultComponent:function(t){var e=t.children;return Object(E.f)(O.a.Fragment,null,e)}}),u="new"===e?Object(E.f)(x.a,{type:"new"}):Object(E.f)(P.a,{text:e});return Object(E.f)(C,o()({onlyActiveOnIndex:r,activeClassName:"active"},i),Object(E.f)(s,{id:a},n),e?u:null)};z.displayName="SettingsNavItem";var C=Object(g.a)(w.Link,{target:"e1o2rm130",label:"StyledNavItem"})("display:block;color:",(function(t){return t.theme.gray300}),";font-size:14px;line-height:30px;position:relative;&.active{color:",(function(t){return t.theme.textColor}),";&:before{background:",(function(t){return t.theme.active}),";}}&:hover,&:focus,&:active{color:",(function(t){return t.theme.textColor}),";outline:none;}&.focus-visible{outline:none;background:",(function(t){return t.theme.backgroundSecondary}),";padding-left:15px;margin-left:-15px;border-radius:3px;&:before{left:-15px;}}&:before{position:absolute;content:'';display:block;top:4px;left:-30px;height:20px;width:4px;background:transparent;border-radius:0 2px 2px 0;}"),R=z;function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){S()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _=function(t){var e=t.organization,n=t.project,r=t.name,o=t.items;return Object(E.f)(M,{"data-test-id":r},Object(E.f)(U,null,r),o.map((function(r){var o=r.path,a=r.title,c=r.index,i=r.show,s=r.badge,u=r.id,l=r.recordAnalytics;if("function"==typeof i&&!i(t))return null;if(void 0!==i&&!i)return null;var d="function"==typeof s?s(t):null,p=Object(k.a)(o,q(q({},e?{orgId:e.slug}:{}),n?{projectId:n.slug}:{}));return Object(E.f)(R,{key:a,to:p,label:a,index:c,badge:d,id:u,onClick:function(){l&&p!==window.location.pathname&&Object(T.e)({organization_id:e&&e.id,project_id:n&&n.id,eventName:"Sidebar Item Clicked",eventKey:"sidebar.item_clicked",sidebar_item_id:u,dest:o})}})})))};_.displayName="SettingsNavigationGroup";var M=Object(g.a)("div",{target:"eqosaaj0",label:"NavSection"})({name:"uewl2b",styles:"margin-bottom:20px;"}),U=Object(g.a)("div",{target:"eqosaaj1",label:"SettingsHeading"})("color:",(function(t){return t.theme.subText}),";font-size:12px;font-weight:600;text-transform:uppercase;margin-bottom:20px;"),A=_;function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=j()(t);if(e){var o=j()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b()(this,n)}}var B=function(t){p()(n,t);var e=J(n);function n(){return s()(this,n),e.apply(this,arguments)}return l()(n,[{key:"componentDidCatch",value:function(t,e){v.m((function(n){Object.keys(e).forEach((function(t){n.setExtra(t,e[t])})),n.setExtra("url",window.location.href),v.c(t)}))}},{key:"render",value:function(){var t=this.props,e=t.navigationObjects,n=t.hooks,r=t.hookConfigs,a=t.stickyTop,i=c()(t,["navigationObjects","hooks","hookConfigs","stickyTop"]),s=e.concat(r);return Object(E.f)(F,{stickyTop:a},s.map((function(t){return Object(E.f)(A,o()({key:t.name},i,t))})),n.map((function(t,e){return O.a.cloneElement(t,{key:"hook-".concat(e)})})))}}]),n}(O.a.Component);B.displayName="SettingsNavigation",B.defaultProps={hooks:[],hookConfigs:[],stickyTop:"69px"};var F=Object(g.a)("div",{target:"e1jh0wxi0",label:"PositionStickyWrapper"})("padding:",Object(y.a)(4),";padding-right:",Object(y.a)(2),";@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){position:sticky;top:",(function(t){return t.stickyTop}),";overflow:scroll;height:calc(100vh - ",(function(t){return t.stickyTop})," - ",93,"px);-ms-overflow-style:none;scrollbar-width:none;&::-webkit-scrollbar{display:none;}}");e.a=B},2248:function(t,e,n){"use strict";var r=n(9),o=n.n(r),a=n(10),c=n.n(a),i=n(11),s=n.n(i),u=n(12),l=n.n(u),d=n(7),p=n.n(d),f=n(3),b=n(1),m=n.n(b),j=n(33),g=n(2060),h=n(27),O=n(120),v=n(96),y=n(15),I=n(2),S=n(227),T=n(6),k=n(47),w=n(440),P=n(0);function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var N=function(t){s()(n,t);var e=x(n);function n(t){var r,a;o()(this,n),(a=e.call(this,t)).handleChangeTeam=function(t){var e=t?t.value:null;a.setState({team:e})},a.getPendingTeamOption=function(t){return{value:t,label:Object(P.f)(R,null,Object(I.b)("#".concat(t)))}};var c=a.props,i=c.organization,s=c.projectSlug,u=null===(r=i.projects)||void 0===r?void 0:r.find((function(t){return t.slug===s}));return a.state={loading:!1,error:!1,project:u,team:""},a}return c()(n,[{key:"joinTeam",value:function(t){var e=this;this.setState({loading:!0}),Object(g.c)(this.props.api,{orgId:this.props.organization.slug,teamId:t},{success:function(){e.setState({loading:!1,error:!1}),Object(j.c)(Object(I.b)("Request to join team sent."))},error:function(){e.setState({loading:!1,error:!0}),Object(j.a)(Object(I.b)("There was an error while trying to request access."))}})}},{key:"renderJoinTeam",value:function(t,e){var n=S.a.getBySlug(t);return n?this.state.loading?e.has("open-membership")?Object(P.f)(h.b,{busy:!0},Object(I.b)("Join Team")):Object(P.f)(h.b,{busy:!0},Object(I.b)("Request Access")):null!=n&&n.isPending?Object(P.f)(h.b,{disabled:!0},Object(I.b)("Request Pending")):e.has("open-membership")?Object(P.f)(h.b,{priority:"primary",type:"button",onClick:this.joinTeam.bind(this,t)},Object(I.b)("Join Team")):Object(P.f)(h.b,{priority:"primary",type:"button",onClick:this.joinTeam.bind(this,t)},Object(I.b)("Request Access")):null}},{key:"getTeamsForAccess",value:function(){var t,e,n=[],r=[];return(null!==(t=null===(e=this.state.project)||void 0===e?void 0:e.teams)&&void 0!==t?t:[]).forEach((function(t){var e=t.slug,o=S.a.getBySlug(e);o&&(o.isPending?r.push(o.slug):n.push(o.slug))})),[n,r]}},{key:"render",value:function(){var t,e,n=this,r=this.props.organization,o=this.state.team,a=null!==(t=null===(e=this.state.project)||void 0===e?void 0:e.teams)&&void 0!==t?t:[],c=new Set(r.features),i=[{label:Object(I.b)("Request Access"),options:this.getTeamsForAccess()[0].map((function(t){return{value:t,label:Object(I.b)("#".concat(t))}}))},{label:Object(I.b)("Pending Requests"),options:this.getTeamsForAccess()[1].map((function(t){return n.getPendingTeamOption(t)}))}];return Object(P.f)(E,null,a.length?Object(P.f)(w.a,{icon:Object(P.f)(y.C,{size:"xl"}),title:Object(I.b)("You're not a member of this project."),description:Object(I.b)("You'll need to join a team with access before you can view this data."),action:Object(P.f)(z,null,Object(P.f)(C,{name:"select",placeholder:Object(I.b)("Select a Team"),options:i,onChange:this.handleChangeTeam}),o?this.renderJoinTeam(o,c):Object(P.f)(h.b,{disabled:!0},Object(I.b)("Select a Team")))}):Object(P.f)(w.a,{icon:Object(P.f)(y.C,{size:"xl"})},Object(I.b)("No teams have access to this project yet. Ask an admin to add your team to this project.")))}}]),n}(m.a.Component);N.displayName="MissingProjectMembership";var E=Object(f.a)(v.a,{target:"e1rms11u0",label:"StyledPanel"})("margin:",Object(T.a)(2)," 0;"),z=Object(f.a)("div",{target:"e1rms11u1",label:"Field"})("display:grid;grid-auto-flow:column;gap:",Object(T.a)(2),";text-align:left;"),C=Object(f.a)(O.a,{target:"e1rms11u2",label:"StyledSelectControl"})({name:"1hskriy",styles:"width:250px;"}),R=Object(f.a)("div",{target:"e1rms11u3",label:"DisabledLabel"})({name:"195ow5l",styles:"display:flex;opacity:0.5;overflow:hidden;"});e.a=Object(k.a)(N)},2903:function(t,e,n){"use strict";n.r(e);var r,o=n(5),a=n.n(o),c=n(14),i=n.n(c),s=n(1),u=n.n(s),l=n(54),d=n(20),p=n.n(d),f=n(29),b=n.n(f),m=n(8),j=n.n(m),g=n(3),h=n(264),O=n.n(h),v=n(39),y=n.n(v),I=n(25),S=n.n(I),T=n(389),k=n(450),w=n(131),P=n(44),x=n(2248),N=n(2),E=n(176),z=n(177),C=n(147),R=n(6),D=n(47),q=n(157),_=n(0);function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){j()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(t){t.MISSING_MEMBERSHIP="MISSING_MEMBERSHIP",t.PROJECT_NOT_FOUND="PROJECT_NOT_FOUND",t.UNKNOWN="UNKNOWN"}(r||(r={}));var A=y()({displayName:"ProjectContext",childContextTypes:{project:E.a.Project},mixins:[S.a.connect(z.a,"memberList"),S.a.listenTo(C.a,"onProjectChange")],getInitialState:function(){return{loading:!0,error:!1,errorType:null,memberList:[],project:null}},getChildContext:function(){return{project:this.state.project}},componentWillMount:function(){this.fetchData()},componentWillReceiveProps:function(t){t.projectId!==this.props.projectId&&(t.skipReload||this.remountComponent())},componentDidUpdate:function(t,e){if(t.projectId!==this.props.projectId&&this.fetchData(),t.projects.length!==this.props.projects.length&&this.fetchData(),e.project!==this.state.project){if(!this.docTitle)return;var n=this.docTitleRef.docTitle;n&&n.forceUpdate()}},remountComponent:function(){this.setState(this.getInitialState())},getTitle:function(){var t,e;return null!==(t=null===(e=this.state.project)||void 0===e?void 0:e.slug)&&void 0!==t?t:"Sentry"},onProjectChange:function(t){this.state.project&&t.has(this.state.project.id)&&this.setState({project:U({},C.a.getById(this.state.project.id))})},identifyProject:function(){var t=this.props,e=t.projects,n=t.projectId;return e.find((function(t){return t.slug===n}))||null},fetchData:function(){var t=this;return b()(p.a.mark((function e(){var n,o,a,c,i,s,u,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,o=n.orgId,a=n.projectId,c=n.skipReload,i=t.identifyProject(),s=i&&i.hasAccess,t.setState((function(t){return{loading:!c||t.loading,project:i}})),!i||!s){e.next=20;break}return Object(k.k)(null),u=t.props.api.requestPromise("/projects/".concat(o,"/").concat(a,"/")),e.prev=7,e.next=10,u;case 10:l=e.sent,t.setState({loading:!1,project:l,error:!1,errorType:null}),Object(k.k)(l),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),t.setState({loading:!1,error:!1,errorType:r.UNKNOWN});case 18:return Object(T.a)(t.props.api,o,i.id),e.abrupt("return");case 20:if(!i||i.isMember){e.next=23;break}return t.setState({loading:!1,error:!0,errorType:r.MISSING_MEMBERSHIP}),e.abrupt("return");case 23:return e.prev=23,e.next=26,t.props.api.requestPromise("/projects/".concat(o,"/").concat(a,"/"));case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(23),t.setState({loading:!1,error:!0,errorType:r.PROJECT_NOT_FOUND});case 31:case"end":return e.stop()}}),e,null,[[7,15],[23,28]])})))()},renderBody:function(){if(this.state.loading)return Object(_.f)("div",{className:"loading-full-layout"},Object(_.f)(P.default,null));if(!this.state.error)return this.props.children;switch(this.state.errorType){case r.PROJECT_NOT_FOUND:return Object(_.f)("div",{className:"container"},Object(_.f)("div",{className:"alert alert-block",style:{margin:"30px 0 10px"}},Object(N.b)("The project you were looking for was not found.")));case r.MISSING_MEMBERSHIP:return Object(_.f)(B,null,Object(_.f)(x.a,{organization:this.props.organization,projectSlug:this.state.project.slug}));default:return Object(_.f)(w.a,{onRetry:this.remountComponent})}},render:function(){var t=this;return Object(_.f)(O.a,{ref:function(e){return t.docTitleRef=e},title:this.getTitle()},this.renderBody())}}),J=Object(D.a)(Object(l.a)(Object(q.a)(A))),B=Object(g.a)("div",{target:"ee9xcdn0",label:"ErrorWrapper"})("width:100%;margin:",Object(R.a)(2)," ",Object(R.a)(4),";"),F=n(2214),W=n(757),L=n(2129),G=n(2337),H=function(t){var e=t.organization,n=t.project;return Object(_.f)(L.a,{navigationObjects:Object(G.a)({project:n,organization:e}),access:new Set(e.access),features:new Set(e.features),organization:e,project:n})};H.displayName="ProjectSettingsNavigation";var K=Object(W.a)(H);function Y(t){var e=t.params,n=t.organization,r=t.children,o=i()(t,["params","organization","children"]),c=e.orgId,s=e.projectId;return Object(_.f)(J,{orgId:c,projectId:s},Object(_.f)(F.a,a()({params:e},o,{renderNavigation:function(){return Object(_.f)(K,{organization:n})}}),r&&u.a.isValidElement(r)?u.a.cloneElement(r,{organization:n}):r))}Y.displayName="ProjectSettingsLayout";e.default=Object(l.a)(Y)}}]);
//# sourceMappingURL=ProjectSettingsLayout.js.map