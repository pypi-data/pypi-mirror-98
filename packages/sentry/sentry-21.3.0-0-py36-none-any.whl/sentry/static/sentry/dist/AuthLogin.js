(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[68],{2890:function(e,t,r){"use strict";r.r(t),r.d(t,"formFooterClass",(function(){return Oe}));var n=r(30),a=r.n(n),o=r(20),i=r.n(o),s=r(8),c=r.n(s),u=r(14),l=r.n(u),f=r(29),b=r.n(f),p=r(9),h=r.n(p),g=r(10),d=r.n(g),m=r(11),v=r.n(m),O=r(12),j=r.n(O),y=r(7),k=r.n(y),S=r(3),w=r(1),x=r.n(w),L=r(131),P=r(44),_=r(447),N=r(2),R=r(6),C=r(47),D=r(71),J=r.n(D),z=r(22),M=r(0),A=r(27),q=r(237),T=r(471),F=r(465),H=r(62),E=r(15),W=r(36);function I(){var e=J()(["\n                ","\n              "]);return I=function(){return e},e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k()(e);if(t){var a=k()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return j()(this,r)}}var B=function(e){var t=e.vstsLoginLink,r=e.githubLoginLink,n=e.googleLoginLink;return Object(M.f)(Q,null,Object(M.f)(K,null,Object(N.b)("External Account Login")),n&&Object(M.f)(A.b,{align:"left",size:"small",icon:Object(M.f)(E.G,{size:"xs"}),href:n},Object(N.b)("Sign in with Google")),r&&Object(M.f)(A.b,{align:"left",size:"small",icon:Object(M.f)(E.E,{size:"xs"}),href:r},Object(N.b)("Sign in with GitHub")),t&&Object(M.f)(A.b,{align:"left",size:"small",icon:Object(M.f)(E.Ib,{size:"xs"}),href:t},Object(N.b)("Sign in with Azure DevOps")))};B.displayName="LoginProviders";var G=function(e){v()(r,e);var t=U(r);function r(){var e;h()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={errorMessage:null,errors:{}},e.handleSubmit=function(){var t=b()(i.a.mark((function t(r,n,a){var o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.api.requestPromise("/auth/login/",{method:"POST",data:r});case 3:o=t.sent,n(r),W.default.set("user",o.user),z.browserHistory.push({pathname:o.nextUri}),t.next=18;break;case 9:if(t.prev=9,t.t0=t.catch(0),t.t0.responseJSON&&t.t0.responseJSON.errors){t.next=14;break}return a(t.t0),t.abrupt("return");case 14:s=t.t0.responseJSON.detail,t.t0.responseJSON.errors.__all__&&(s=t.t0.responseJSON.errors.__all__),e.setState({errorMessage:s,errors:t.t0.responseJSON.errors||{}}),a(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,r,n){return t.apply(this,arguments)}}(),e}return d()(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.errorMessage,n=t.errors,a=this.props.authConfig,o=a.githubLoginLink,i=a.vstsLoginLink,s=!(!o&&!i);return Object(M.f)(M.b,null,(function(t){var a=t.css;return Object(M.f)(Y,{hasLoginProvider:s},Object(M.f)(q.default,{submitLabel:Object(N.b)("Continue"),onSubmit:e.handleSubmit,footerClass:a(I(),Oe),errorMessage:r,extraButton:Object(M.f)(V,{to:"/account/recover/"},Object(N.b)("Lost your password?"))},Object(M.f)(F.a,{name:"username",placeholder:Object(N.b)("username or email"),label:Object(N.b)("Account"),error:n.username,required:!0}),Object(M.f)(T.a,{name:"password",placeholder:Object(N.b)("password"),label:Object(N.b)("Password"),error:n.password,required:!0})),s&&Object(M.f)(B,{vstsLoginLink:i,githubLoginLink:o}))}))}}]),r}(x.a.Component);G.displayName="LoginForm";var Y=Object(S.a)("div",{target:"e80ojs40",label:"FormWrapper"})("display:grid;grid-gap:60px;grid-template-columns:",(function(e){return e.hasLoginProvider?"1fr 0.8fr":"1fr"}),";"),K=Object(S.a)("div",{target:"e80ojs41",label:"ProviderHeading"})({name:"ihix69",styles:"margin:0;font-size:15px;font-weight:bold;line-height:24px;"}),Q=Object(S.a)("div",{target:"e80ojs42",label:"ProviderWrapper"})("position:relative;display:grid;grid-auto-rows:max-content;grid-gap:",Object(R.a)(1.5),";&:before{position:absolute;display:block;content:'';top:0;bottom:0;left:-30px;border-left:1px solid ",(function(e){return e.theme.border}),";}"),V=Object(S.a)(H.a,{target:"e80ojs43",label:"LostPasswordLink"})("color:",(function(e){return e.theme.gray300}),";&:hover{color:",(function(e){return e.theme.textColor}),";}"),X=G,Z=r(788),$=r(43);function ee(){var e=J()(["\n              ","\n            "]);return ee=function(){return e},e}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k()(e);if(t){var a=k()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return j()(this,r)}}var re=function(){return Object(M.f)(Z.a,{name:"subscribe",yesLabel:Object(N.b)("Yes, I would like to receive updates via email"),noLabel:Object(N.b)("No, I'd prefer not to receive these updates"),help:Object(N.c)("We'd love to keep you updated via email with product and feature\n           announcements, promotions, educational materials, and events. Our\n           updates focus on relevant information, and we'll never sell your data\n           to third parties. See our [link] for more details.",{link:Object(M.f)("a",{href:"https://sentry.io/privacy/"},"Privacy Policy")})})};re.displayName="SubscribeField";var ne=function(e){v()(r,e);var t=te(r);function r(){var e;h()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={errorMessage:null,errors:{}},e.handleSubmit=function(){var t=b()(i.a.mark((function t(r,n,a){var o,s,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.props.api,t.prev=1,t.next=4,o.requestPromise("/auth/register/",{method:"POST",data:r});case 4:s=t.sent,n(r),W.default.set("user",s.user),z.browserHistory.push({pathname:s.nextUri}),t.next=19;break;case 10:if(t.prev=10,t.t0=t.catch(1),t.t0.responseJSON&&t.t0.responseJSON.errors){t.next=15;break}return a(t.t0),t.abrupt("return");case 15:c=t.t0.responseJSON.detail,t.t0.responseJSON.errors.__all__&&(c=t.t0.responseJSON.errors.__all__),e.setState({errorMessage:c,errors:t.t0.responseJSON.errors||{}}),a(t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,r,n){return t.apply(this,arguments)}}(),e}return d()(r,[{key:"render",value:function(){var e=this,t=this.props.authConfig.hasNewsletter,r=this.state,n=r.errorMessage,a=r.errors;return Object(M.f)(M.b,null,(function(r){var o=r.css;return Object(M.f)(q.default,{initialData:{subscribe:!0},submitLabel:Object(N.b)("Continue"),onSubmit:e.handleSubmit,footerClass:o(ee(),Oe),errorMessage:n,extraButton:Object(M.f)(ae,{href:"https://sentry.io/privacy/"},Object(N.b)("Privacy Policy"))},Object(M.f)(F.a,{name:"name",placeholder:Object(N.b)("Jane Bloggs"),label:Object(N.b)("Name"),error:a.name,required:!0}),Object(M.f)(F.a,{name:"username",placeholder:Object(N.b)("you@example.com"),label:Object(N.b)("Email"),error:a.username,required:!0}),Object(M.f)(T.a,{name:"password",placeholder:Object(N.b)("something super secret"),label:Object(N.b)("Password"),error:a.password,required:!0}),t&&Object(M.f)(re,null))}))}}]),r}(x.a.Component);ne.displayName="RegisterForm";var ae=Object(S.a)($.a,{target:"ehcnwun0",label:"PrivacyPolicyLink"})("color:",(function(e){return e.theme.gray300}),";&:hover{color:",(function(e){return e.theme.textColor}),";}"),oe=ne;function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k()(e);if(t){var a=k()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return j()(this,r)}}var se=function(e){v()(r,e);var t=ie(r);function r(){var e;h()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={errorMessage:null},e.handleSubmit=function(){var t=b()(i.a.mark((function t(r,n,a){var o,s,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.props.api,t.prev=1,t.next=4,o.requestPromise("/auth/sso-locate/",{method:"POST",data:r});case 4:s=t.sent,n(r),z.browserHistory.push({pathname:s.nextUri}),t.next=17;break;case 9:if(t.prev=9,t.t0=t.catch(1),t.t0.responseJSON){t.next=14;break}return a(t.t0),t.abrupt("return");case 14:c=t.t0.responseJSON.detail,e.setState({errorMessage:c}),a(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,r,n){return t.apply(this,arguments)}}(),e}return d()(r,[{key:"render",value:function(){var e=this.props.authConfig.serverHostname,t=this.state.errorMessage;return Object(M.f)(q.default,{className:"form-stacked",submitLabel:Object(N.b)("Continue"),onSubmit:this.handleSubmit,footerClass:"auth-footer",errorMessage:t},Object(M.f)(F.a,{name:"organization",placeholder:"acme",label:Object(N.b)("Organization ID"),required:!0,help:Object(N.c)("Your ID is the slug after the hostname. e.g. [example] is [slug].",{slug:Object(M.f)("strong",null,"acme"),example:Object(M.f)(ce,{slug:"acme",hostname:e})})}))}}]),r}(x.a.Component);se.displayName="SsoForm";var ce=function(e){var t=e.hostname,r=e.slug;return Object(M.f)("code",null,t,"/",Object(M.f)("strong",null,r))};function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k()(e);if(t){var a=k()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return j()(this,r)}}ce.displayName="SlugExample";var be={login:X,register:oe,sso:se},pe=function(e){v()(r,e);var t=fe(r);function r(){var e;h()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!0,error:null,activeTab:"login",authConfig:null},e.handleSetTab=function(t,r){e.setState({activeTab:t}),r.preventDefault()},e.fetchData=b()(i.a.mark((function t(){var r,n,a,o,s,c,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.api,t.prev=1,t.next=4,r.requestPromise("/auth/config/");case 4:n=t.sent,a=n.vsts_login_link,o=n.github_login_link,s=n.google_login_link,c=l()(n,["vsts_login_link","github_login_link","google_login_link"]),u=le(le({},c),{},{vstsLoginLink:a,githubLoginLink:o,googleLoginLink:s}),e.setState({authConfig:u}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.setState({error:!0});case 13:e.setState({loading:!1});case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),e}return d()(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,t=this.props.api,r=this.state,n=r.loading,o=r.error,i=r.activeTab,s=r.authConfig,c=be[i],u=[["login",Object(N.b)("Login")],["sso",Object(N.b)("Single Sign-On")],["register",Object(N.b)("Register"),!(null!=s&&s.canRegister)]];return Object(M.f)(x.a.Fragment,null,Object(M.f)(ge,null,Object(M.f)(de,null,Object(N.b)("Sign in to continue")),Object(M.f)(me,null,u.map((function(t){var r=a()(t,3),n=r[0],o=r[1];return!r[2]&&Object(M.f)("li",{key:n,className:i===n?"active":""},Object(M.f)("a",{href:"#",onClick:function(t){return e.handleSetTab(n,t)}},o))})))),n&&Object(M.f)(P.default,null),o&&Object(M.f)(he,{message:Object(N.b)("Unable to load authentication configuration"),onRetry:this.fetchData}),!n&&null!==s&&!o&&Object(M.f)(ve,{hasAuthProviders:this.hasAuthProviders},Object(M.f)(c,{api:t,authConfig:s})))}},{key:"hasAuthProviders",get:function(){if(null===this.state.authConfig)return!1;var e=this.state.authConfig,t=e.githubLoginLink,r=e.googleLoginLink,n=e.vstsLoginLink;return!!(t||n||r)}}]),r}(x.a.Component);pe.displayName="Login";var he=Object(S.a)(L.a,{target:"e1y6wz4k0",label:"StyledLoadingError"})("margin:",Object(R.a)(2),";"),ge=Object(S.a)("div",{target:"e1y6wz4k1",label:"Header"})("border-bottom:1px solid ",(function(e){return e.theme.border}),";padding:20px 40px 0;"),de=Object(S.a)("h3",{target:"e1y6wz4k2",label:"Heading"})({name:"15am9v5",styles:"font-size:24px;margin:0 0 20px 0;"}),me=Object(S.a)(_.a,{target:"e1y6wz4k3",label:"AuthNavTabs"})({name:"1uk1gs8",styles:"margin:0;"}),ve=Object(S.a)("div",{target:"e1y6wz4k4",label:"FormWrapper"})("padding:35px;width:",(function(e){return e.hasAuthProviders?"600px":"490px"}),";"),Oe="\n  display: grid;\n  grid-template-columns: max-content 1fr;\n  grid-gap: ".concat(Object(R.a)(1),";\n  align-items: center;\n  justify-items: end;\n  border-top: none;\n  margin-bottom: 0;\n  padding: 0;\n");t.default=Object(C.a)(pe)}}]);
//# sourceMappingURL=AuthLogin.js.map