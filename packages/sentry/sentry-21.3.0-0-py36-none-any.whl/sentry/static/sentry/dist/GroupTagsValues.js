(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[93],{2046:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return w})),n.d(e,"a",(function(){return S}));var r=n(20),a=n.n(r),i=n(9),o=n.n(i),c=n(10),s=n.n(c),u=n(11),l=n.n(u),f=n(12),p=n.n(f),d=n(7),b=n.n(d),y=n(29),h=n.n(y),O=n(1),g=n.n(O),j=n(0);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}function m(t,e){var n=t.split(" ")[0],r=t.split(" ").splice(1).join(" "),a=e.generationByIdentifier(n);return void 0===a?t:a+" "+r}function w(){return x.apply(this,arguments)}function x(){return(x=h()(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.e(203).then(n.t.bind(null,2143,7)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var S=function(t){l()(n,t);var e=v(n);function n(t){var r;return o()(this,n),(r=e.call(this,t))._isMounted=void 0,r.state={iOSDeviceList:null},r}return s()(n,[{key:"componentDidMount",value:function(){var t=this;this._isMounted=!0,w().then((function(e){t._isMounted&&t.setState({iOSDeviceList:e})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=this.props,e=t.value,n=t.children,r=this.state.iOSDeviceList;if(!e)return null;if(!r)return e;var a=m(e,r);return Object(j.f)("span",{"data-test-id":"loaded-device-name"},n?n(a):a)}}]),n}(g.a.Component);S.displayName="DeviceName"},2166:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r,a=n(5),i=n.n(a),o=n(30),c=n.n(o),s=n(9),u=n.n(s),l=n(10),f=n.n(l),p=n(11),d=n.n(p),b=n(12),y=n.n(b),h=n(7),O=n.n(h),g=n(1),j=n.n(g),v=n(133),m=n.n(v),w=n(59),x=n.n(w),S=n(33),k=n(154),D=n(27),P=n(2),R=n(47),q=n(54),E=n(0);function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}
//! Coordinate with other ExportQueryType (src/sentry/data_export/base.py)
();return function(){var n,r=O()(t);if(e){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y()(this,n)}}!function(t){t.IssuesByTag="Issues-by-Tag",t.Discover="Discover"}(r||(r={}));var z=function(t){d()(n,t);var e=T(n);function n(){var t;u()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state=t.initialState,t.resetState=function(){t.setState(t.initialState)},t.startDataExport=function(){var e=t.props,n=e.api,r=e.organization.slug,a=e.payload,i=a.queryType,o=a.queryInfo;t.setState({inProgress:!0}),n.requestPromise("/organizations/".concat(r,"/data-export/"),{includeAllArgs:!0,method:"POST",data:{query_type:i,query_info:o}}).then((function(t){var e=c()(t,3),n=(e[0],e[1],e[2]);Object(S.c)(201===(null==n?void 0:n.status)?Object(P.b)("Sit tight. We'll shoot you an email when your data is ready for download."):Object(P.b)("It looks like we're already working on it. Sit tight, we'll email you."))})).catch((function(e){var n,r,a=null!==(n=null==e||null===(r=e.responseJSON)||void 0===r?void 0:r.detail)&&void 0!==n?n:"We tried our hardest, but we couldn't export your data. Give it another go.";Object(S.a)(Object(P.b)(a)),t.setState({inProgress:!1})}))},t}return f()(n,[{key:"componentDidUpdate",value:function(t){var e=t.payload,n=this.props.payload;x()(e,n)||this.resetState()}},{key:"render",value:function(){var t=this.state.inProgress,e=this.props,n=e.children,r=e.disabled,a=e.icon;return Object(E.f)(k.a,{features:["organizations:discover-query"]},t?Object(E.f)(D.b,i()({size:"small",priority:"default",title:"You can get on with your life. We'll email you when your data's ready."},this.props,{disabled:!0,icon:a}),Object(P.b)("We're working on it...")):Object(E.f)(D.b,i()({onClick:m()(this.startDataExport,500),disabled:r||!1,size:"small",priority:"default",title:"Put your data to work. Start your export and we'll email you when it's finished.",icon:a},this.props),n||Object(P.b)("Export All to CSV")))}},{key:"initialState",get:function(){return{inProgress:!1}}}]),n}(j.a.Component);z.displayName="DataExport",e.b=Object(R.a)(Object(q.a)(z))},2828:function(t,e,n){"use strict";n.r(e),n.d(e,"GroupTagValues",(function(){return C}));var r=n(8),a=n.n(r),i=n(9),o=n.n(i),c=n(10),s=n.n(c),u=n(11),l=n.n(u),f=n(12),p=n.n(f),d=n(7),b=n.n(d),y=n(3),h=n(1),O=n.n(h),g=n(1134),j=n.n(g),v=n(391),m=n.n(v),w=n(693),x=n(27),S=n(76),k=n(2166),D=n(2046),P=n(505),R=n(445),q=n(431),E=n(43),T=n(694),z=n(155),L=n(15),I=n(2),N=n(6),V=n(18),B=n(0);function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var C=function(t){l()(n,t);var e=A(n);function n(){return o()(this,n),e.apply(this,arguments)}return s()(n,[{key:"getEndpoints",value:function(){var t=this.props.environments,e=this.props.params,n=e.groupId,r=e.tagKey;return[["tag","/issues/".concat(n,"/tags/").concat(r,"/")],["tagValueList","/issues/".concat(n,"/tags/").concat(r,"/values/"),{query:{environment:t}}]]}},{key:"renderBody",value:function(){var t=this.props,e=t.group,n=t.params,r=n.orgId,a=n.tagKey,i=t.environments,o=this.state,c=o.tag,s=o.tagValueList,u=o.tagValueListPageLinks,l=m()(s,j()("count")).reverse();if(0===l.length&&i.length>0)return Object(B.f)(P.a,{heading:Object(I.b)("Sorry, the tags for this issue could not be found."),message:Object(I.b)("No tags were found for the currently selected environments")});var f="/organizations/".concat(r,"/issues/"),p=l.map((function(t,e){var n,r=c.totalValues?"".concat(Object(V.s)(t.count,c.totalValues).toFixed(2),"%"):"--",a=t.query||"".concat(c.key,':"').concat(t.value,'"');return Object(B.f)("tr",{key:e},Object(B.f)("td",{className:"bar-cell"},Object(B.f)("span",{className:"label"},r)),Object(B.f)("td",null,Object(B.f)(K,null,Object(B.f)(R.a,{to:{pathname:f,query:{query:a}}},"user"===c.key?Object(B.f)(q.a,{user:_(_({},t),{},{id:null!==(n=t.identifier)&&void 0!==n?n:""}),avatarSize:20,hideEmail:!0}):Object(B.f)(D.a,{value:t.name})),t.email&&Object(B.f)(Y,{href:"mailto:".concat(t.email)},Object(B.f)(L.T,{size:"xs",color:"gray300"})),Object(V.n)(t.value)&&Object(B.f)(Y,{href:t.value},Object(B.f)(L.bb,{size:"xs",color:"gray300"})))),Object(B.f)("td",null,Object(B.f)(z.a,{date:t.lastSeen})))}));return Object(B.f)(O.a.Fragment,null,Object(B.f)(H,null,Object(B.f)(J,null,"user"===c.key?Object(I.b)("Affected Users"):c.name),Object(B.f)(U,{gap:1},Object(B.f)(F,{size:"small",priority:"default",href:"/".concat(r,"/").concat(e.project.slug,"/issues/").concat(e.id,"/tags/").concat(a,"/export/")},Object(I.b)("Export Page to CSV")),Object(B.f)(k.b,{payload:{queryType:k.a.IssuesByTag,queryInfo:{project:e.project.id,group:e.id,key:a}}}))),Object(B.f)(M,{className:"table"},Object(B.f)("thead",null,Object(B.f)("tr",null,Object(B.f)(G,{width:20},"%"),Object(B.f)("th",null),Object(B.f)(G,{width:300},Object(I.b)("Last Seen")))),Object(B.f)("tbody",null,p)),Object(B.f)(T.a,{pageLinks:u}),Object(B.f)("p",null,Object(B.f)("small",null,Object(I.b)("Note: Percentage of issue is based on events seen in the last 7 days."))))}}]),n}(w.a),M=Object(y.a)("table",{target:"ewx0sc40",label:"StyledTable"})("> tbody > tr:nth-of-type(odd){background-color:",(function(t){return t.theme.bodyBackground}),";}"),H=Object(y.a)("div",{target:"ewx0sc41",label:"Header"})({name:"txxdff",styles:"display:flex;align-items:center;margin:0 0 20px;"}),J=Object(y.a)("h3",{target:"ewx0sc42",label:"HeaderTitle"})({name:"1uk1gs8",styles:"margin:0;"}),U=Object(y.a)(S.a,{target:"ewx0sc43",label:"HeaderButtons"})("align-items:stretch;margin:0px ",Object(N.a)(1.5),";"),F=Object(y.a)(x.b,{target:"ewx0sc44",label:"BrowserExportButton"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),G=Object(y.a)("th",{target:"ewx0sc45",label:"TableHeader"})("width:",(function(t){return t.width}),"px;"),K=Object(y.a)("div",{target:"ewx0sc46",label:"ValueWrapper"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),Y=Object(y.a)(E.a,{target:"ewx0sc47",label:"StyledExternalLink"})("margin-left:",Object(N.a)(.5),";");e.default=C}}]);
//# sourceMappingURL=GroupTagsValues.js.map