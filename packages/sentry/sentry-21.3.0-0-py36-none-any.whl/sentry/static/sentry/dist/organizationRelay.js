(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[215],{1898:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(9),a=n.n(r),i=n(10),c=n.n(i),l=n(11),o=n.n(l),s=n(12),u=n.n(s),f=n(7),b=n.n(f),d=(n(1),n(264)),y=n.n(d),p=n(693),O=n(0);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var g=function(e){o()(n,e);var t=j(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(O.f)(y.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),n}(p.a);g.displayName="AsyncView"},1899:function(e,t,n){"use strict";var r=n(14),a=n.n(r),i=n(9),c=n.n(i),l=n(10),o=n.n(l),s=n(11),u=n.n(s),f=n(12),b=n.n(f),d=n(7),y=n.n(d),p=n(3),O=n(1),j=n.n(O),g=n(222),h=n(6),m=n(0);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}var k=function(e){u()(n,e);var t=v(n);function n(){return c()(this,n),t.apply(this,arguments)}return o()(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.subtitle,i=e.action,c=e.tabs,l=e.noTitleStyles,o=e.body,s=a()(e,["icon","title","subtitle","action","tabs","noTitleStyles","body"]),u=!r;return Object(m.f)("div",s,Object(m.f)(R,{isNarrow:u},Object(m.f)(S,null,t&&Object(m.f)(P,null,t),n&&Object(m.f)(w,{tabs:c,styled:l},Object(m.f)(g.a,null,n),r&&Object(m.f)(D,null,r))),i&&Object(m.f)(z,{isNarrow:u},i)),o&&Object(m.f)(K,null,o),c&&Object(m.f)(C,null,c))}}]),n}(j.a.Component);k.displayName="UnstyledSettingsPageHeader",k.defaultProps={noTitleStyles:!1};var R=Object(p.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})("display:flex;align-items:",(function(e){return e.isNarrow?"center":"flex-start"}),";"),S=Object(p.a)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),w=Object(p.a)("div",{target:"e1uay4fd2",label:"Title"})((function(e){return!e.styled&&"font-size: 20px; font-weight: 600;"}),";margin:",Object(h.a)(4)," ",Object(h.a)(2)," ",Object(h.a)(3)," 0;"),D=Object(p.a)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",Object(h.a)(1.5)," 0 0;"),P=Object(p.a)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",Object(h.a)(1),";"),z=Object(p.a)("div",{target:"e1uay4fd5",label:"Action"})("margin-top:",(function(e){return e.isNarrow?"0":Object(h.a)(4)}),";"),x=Object(p.a)(k,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",Object(h.a)(4),";"),K=Object(p.a)("div",{target:"e1uay4fd7",label:"BodyWrapper"})("flex:1;margin:0 0 ",Object(h.a)(3),";"),C=Object(p.a)("div",{target:"e1uay4fd8",label:"TabsWrapper"})({name:"8k0ai7",styles:"flex:1;margin:0;"});t.a=x},2074:function(e,t,n){"use strict";var r=n(5),a=n.n(r),i=n(14),c=n.n(i),l=(n(1),n(326)),o=n(70),s=n(15),u=n(2),f=n(0),b=function(e){var t=e.access,n=void 0===t?["org:write"]:t,r=c()(e,["access"]);return Object(f.f)(l.a,{access:n},(function(e){return!e.hasAccess&&Object(f.f)(o.b,a()({type:"warning",icon:Object(f.f)(s.Jb,{size:"sm"})},r),Object(u.b)("These settings can only be edited by users with the organization owner or manager role."))}))};b.displayName="PermissionAlert",t.a=b},2241:function(e,t,n){"use strict";var r=n(5),a=n.n(r),i=n(14),c=n.n(i),l=n(1),o=n.n(l),s=n(70),u=n(137),f=n(2),b=n(223),d=n(698),y=n(0),p=function(e){var t=e.message,n=e.confirmInput,r=c()(e,["message","confirmInput"]);return Object(y.f)(u.a,a()({},r,{bypass:!1,disableConfirmButton:!0,renderMessage:function(e){var r=e.disableConfirmButton;return Object(y.f)(o.a.Fragment,null,Object(y.f)(s.b,{type:"error"},t),Object(y.f)(d.a,{flexibleControlStateSize:!0,inline:!1,label:Object(f.b)("Please enter %s to confirm the deletion",Object(y.f)("code",null,n))},Object(y.f)(b.a,{type:"text",placeholder:n,onChange:function(e){return r(e.target.value!==n)}})))}}))};p.displayName="ConfirmDelete",t.a=p},2866:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),i=n(14),c=n.n(i),l=n(1),o=n.n(l),s=n(154),u=n(446),f=n(96),b=n(2),d=n(54),y=n(8),p=n.n(y),O=n(20),j=n.n(O),g=n(29),h=n.n(g),m=n(9),v=n.n(m),k=n(10),R=n.n(k),S=n(187),w=n.n(S),D=n(11),P=n.n(D),z=n(12),x=n.n(z),K=n(7),C=n.n(K),F=n(3),N=n(59),T=n.n(N),A=n(114),V=n.n(A),E=n(33),M=n(65),L=n(456),W=n(27),q=n(43),B=n(15),I=n(1898),U=n(1899),H=n(696),J=n(2074),Y=n(24),G=n.n(Y),X=n(173),$=n(6),_=n(223),Q=n(1066),Z=n(698),ee=n(792),te=n(707),ne=n(0),re=function(e){var t,n=e.values,r=e.onChange,a=e.errors,i=e.onValidate,c=e.isFormValid,l=e.disables,o=e.onValidateKey,s=e.onSave,u=function(e){return function(t){r(e,t.target.value)}};return Object(ne.f)("form",{onSubmit:function(){c&&s()},id:"relay-form"},Object(ne.f)(Z.a,{flexibleControlStateSize:!0,label:Object(b.b)("Display Name"),error:a.name,inline:!1,stacked:!0,required:!0},Object(ne.f)(_.a,{type:"text",name:"name",placeholder:Object(b.b)("Display Name"),onChange:u("name"),value:n.name,onBlur:i("name"),disabled:l.name})),l.publicKey?Object(ne.f)(Z.a,{flexibleControlStateSize:!0,label:Object(b.b)("Public Key"),inline:!1,stacked:!0},Object(ne.f)(te.a,{onCopy:(t=n.publicKey,h()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))))},n.publicKey)):Object(ne.f)(ie,null,Object(ne.f)(ce,{label:Object(b.b)("Public Key"),error:a.publicKey,flexibleControlStateSize:!0,inline:!1,stacked:!0,required:!0},Object(ne.f)(_.a,{type:"text",name:"publicKey",placeholder:Object(b.b)("Public Key"),onChange:u("publicKey"),value:n.publicKey,onBlur:o})),Object(ne.f)(ee.a,null,Object(b.b)("Only enter the Public Key value from your credentials file. Never share the Secret key with Sentry or any third party"))),Object(ne.f)(Z.a,{flexibleControlStateSize:!0,label:Object(b.b)("Description"),inline:!1,stacked:!0},Object(ne.f)(Q.a,{name:"description",placeholder:Object(b.b)("Description"),onChange:u("description"),value:n.description,disabled:l.description,autosize:!0})))};re.displayName="Form";var ae=re,ie=Object(F.a)("div",{target:"ee9mz140",label:"FieldWrapper"})("padding-bottom:",Object($.a)(2),";"),ce=Object(F.a)(Z.a,{target:"ee9mz141",label:"StyledField"})({name:"1imlk2a",styles:"padding-bottom:0;"});var le=function(e){var t,n=null===(t=e.responseJSON)||void 0===t?void 0:t.trustedRelays[0];return n?"Bad structure received for Trusted Relays"===n?{type:"bad-structure",message:Object(b.b)("An invalid structure was sent.")}:"Relay key info with missing name in Trusted Relays"===n?{type:"missing-name",message:Object(b.b)("Field Required")}:"Relay key info with empty name in Trusted Relays"===n?{type:"empty-name",message:Object(b.b)("Invalid Field")}:n.startsWith("Missing public key for Relay key info with name:")?{type:"missing-key",message:Object(b.b)("Field Required")}:n.startsWith("Invalid public key for relay key info with name:")?{type:"invalid-key",message:Object(b.b)("Invalid Relay key")}:n.startsWith("Duplicated key in Trusted Relays:")?{type:"duplicated-key",message:Object(b.b)("Relay key already taken")}:{type:"unknown",message:Object(b.b)("An unknown error occurred while saving Relay public key.")}:{type:"unknown",message:Object(b.b)("An unknown error occurred while saving Relay public key.")}},oe=n(76),se=function(e){var t=e.title,n=e.onSave,r=e.content,a=e.disabled,i=e.Header,c=e.Body,l=e.Footer,s=e.closeModal,u=e.btnSaveLabel,f=void 0===u?Object(b.b)("Save"):u;return Object(ne.f)(o.a.Fragment,null,Object(ne.f)(i,{closeButton:!0},t),Object(ne.f)(c,null,r),Object(ne.f)(l,null,Object(ne.f)(oe.a,{gap:1.5},Object(ne.f)(W.b,{onClick:s},Object(b.b)("Cancel")),Object(ne.f)(W.b,{onClick:function(e){e.preventDefault(),n()},disabled:a,type:"submit",priority:"primary",form:"relay-form"},f))))};se.displayName="Modal";var ue=se;function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return x()(this,n)}}var ye=function(e){P()(n,e);var t=de(n);function n(){var e;v()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state=e.getDefaultState(),e.handleChange=function(t,n){e.setState((function(e){return{values:be(be({},e.values),{},p()({},t,n)),errors:V()(e.errors,t)}}))},e.handleSave=h()(j.a.mark((function t(){var n,r,a,i,c,l,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.onSubmitSuccess,a=n.closeModal,i=n.orgSlug,c=n.api,l=e.getData().trustedRelays.map((function(e){return V()(e,["created","lastModified"])})),t.prev=2,t.next=5,c.requestPromise("/organizations/".concat(i,"/"),{method:"PUT",data:{trustedRelays:l}});case 5:o=t.sent,r(o),a(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),e.convertErrorXhrResponse(le(t.t0));case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),e.handleValidate=function(t){return function(){var n=!e.state.values[t].replace(/\s/g,""),r=e.state.errors[t];n&&r||(!n||r?!n&&r&&e.clearError(t):e.setState((function(e){return{errors:be(be({},e.errors),{},p()({},t,Object(b.b)("Field Required")))}})))}},e.handleValidateKey=function(){var t=e.props.savedRelays,n=e.state,r=n.values,a=n.errors;!t.find((function(e){return e.publicKey===r.publicKey}))||a.publicKey?(a.publicKey&&e.setState({errors:V()(a,"publicKey")}),e.handleValidate("publicKey")()):e.setState({errors:be(be({},a),{},{publicKey:Object(b.b)("Relay key already taken")})})},e}return R()(n,[{key:"componentDidMount",value:function(){this.validateForm()}},{key:"componentDidUpdate",value:function(e,t){T()(t.values,this.state.values)||this.validateForm(),!T()(t.errors,this.state.errors)&&Object.keys(this.state.errors).length>0&&this.setValidForm(!1)}},{key:"getDefaultState",value:function(){return{values:{name:"",publicKey:"",description:""},requiredValues:["name","publicKey"],errors:{},disables:{},isFormValid:!1,title:this.getTitle()}}},{key:"getTitle",value:function(){return""}},{key:"getData",value:function(){throw new Error("Not implemented")}},{key:"getBtnSaveLabel",value:function(){}},{key:"setValidForm",value:function(e){this.setState({isFormValid:e})}},{key:"validateForm",value:function(){var e=this.state,t=e.values,n=e.requiredValues,r=e.errors,a=n.every((function(e){return!!t[e].replace(/\s/g,"")&&!r[e]}));this.setValidForm(a)}},{key:"clearError",value:function(e){this.setState((function(t){return{errors:V()(t.errors,e)}}))}},{key:"convertErrorXhrResponse",value:function(e){switch(e.type){case"invalid-key":case"missing-key":this.setState((function(t){return{errors:be(be({},t.errors),{},{publicKey:e.message})}}));break;case"empty-name":case"missing-name":this.setState((function(t){return{errors:be(be({},t.errors),{},{name:e.message})}}));break;default:Object(E.a)(e.message)}}},{key:"getForm",value:function(){var e=this.state,t=e.values,n=e.errors,r=e.disables,a=e.isFormValid;return Object(ne.f)(ae,{isFormValid:a,onSave:this.handleSave,onChange:this.handleChange,onValidate:this.handleValidate,onValidateKey:this.handleValidateKey,errors:n,values:t,disables:r})}},{key:"getContent",value:function(){return this.getForm()}},{key:"render",value:function(){var e=this.state,t=e.title,n=e.isFormValid,r=this.getBtnSaveLabel(),i=this.getContent();return Object(ne.f)(ue,a()({},this.props,{title:t,onSave:this.handleSave,btnSaveLabel:r,disabled:!n,content:i}))}}]),n}(o.a.Component);ye.displayName="DialogManager";var pe=ye,Oe=n(160),je=Object(F.a)((function(e){var t=e.title,n=e.subtitle,r=e.children,a=e.className;return Object(ne.f)(Oe.a,{className:a},t,n&&Object(ne.f)("small",null,n),Object(ne.f)("div",null,r))}),{target:"emhqto00",label:"Item"})("display:grid;grid-gap:",Object($.a)(1.5),";"),ge=function(e){var t=e.command;return Object(ne.f)(me,null,Object(ne.f)(ve,null,"$"),t)};ge.displayName="Terminal";var he=ge,me=Object(F.a)("div",{target:"e1i4f0j90",label:"Wrapper"})("background:",(function(e){return e.theme.gray500}),";padding:",Object($.a)(1.5)," ",Object($.a)(3),";font-family:",(function(e){return e.theme.text.familyMono}),";color:",(function(e){return e.theme.white}),";border-radius:",(function(e){return e.theme.borderRadius}),";display:grid;grid-template-columns:max-content 1fr;grid-gap:",Object($.a)(.75),";"),ve=Object(F.a)("div",{target:"e1i4f0j91",label:"Prompt"})("color:",(function(e){return e.theme.gray300}),";");function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return x()(this,n)}}var Re=function(e){P()(n,e);var t=ke(n);function n(){return v()(this,n),t.apply(this,arguments)}return R()(n,[{key:"getTitle",value:function(){return Object(b.b)("Register Key")}},{key:"getBtnSaveLabel",value:function(){return Object(b.b)("Register")}},{key:"getData",value:function(){var e=this.props.savedRelays;return{trustedRelays:[].concat(G()(e),[this.state.values])}}},{key:"getContent",value:function(){return Object(ne.f)(Se,{symbol:"colored-numeric"},Object(ne.f)(je,{title:Object(b.c)("Initialize the configuration. [link: Learn how]",{link:Object(ne.f)(q.a,{href:"https://docs.sentry.io/product/relay/getting-started/#initializing-configuration"})}),subtitle:Object(b.b)("Within your terminal:")},Object(ne.f)(he,{command:"relay config init"})),Object(ne.f)(je,{title:Object(b.c)("Go to the file [jsonFile: credentials.json] to find the public key and enter it below.",{jsonFile:Object(ne.f)(q.a,{href:"https://docs.sentry.io/product/relay/getting-started/#registering-relay-with-sentry"})})},w()(C()(n.prototype),"getForm",this).call(this)))}}]),n}(pe),Se=Object(F.a)(X.a,{target:"e11lw50d0",label:"StyledList"})("display:grid;grid-gap:",Object($.a)(3),";");function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return x()(this,n)}}var ze=function(e){P()(n,e);var t=Pe(n);function n(){return v()(this,n),t.apply(this,arguments)}return R()(n,[{key:"getDefaultState",value:function(){return De(De({},w()(C()(n.prototype),"getDefaultState",this).call(this)),{},{values:{name:this.props.relay.name,publicKey:this.props.relay.publicKey,description:this.props.relay.description||""},disables:{publicKey:!0}})}},{key:"getTitle",value:function(){return Object(b.b)("Edit Key")}},{key:"getData",value:function(){var e=this.props.savedRelays,t=this.state.values;return{trustedRelays:e.map((function(e){return e.publicKey===t.publicKey?t:e}))}}}]),n}(pe),xe=n(440),Ke=function(){return Object(ne.f)(f.a,null,Object(ne.f)(xe.a,null,Object(b.b)("No Keys Registered.")))};Ke.displayName="EmptyState";var Ce=Ke,Fe=n(533),Ne=n.n(Fe),Te=n(441),Ae=function(e){var t=e.activities;return Object(ne.f)(Ee,{headers:[Object(b.b)("Version"),Object(b.b)("First Used"),Object(b.b)("Last Used")]},t.map((function(e){var t=e.relayId,n=e.version,r=e.firstSeen,a=e.lastSeen;return Object(ne.f)(o.a.Fragment,{key:t},Object(ne.f)("div",null,n),Object(ne.f)(Te.a,{date:r,seconds:!1}),Object(ne.f)(Te.a,{date:a,seconds:!1}))})))};Ae.displayName="ActivityList";var Ve=Ae,Ee=Object(F.a)(f.g,{target:"eeq3cnj0",label:"StyledPanelTable"})("grid-template-columns:repeat(3,2fr);@media (min-width:",(function(e){return e.theme.breakpoints[2]}),"){grid-template-columns:2fr repeat(2,1fr);}"),Me=n(266),Le=n(2241),We=n(325),qe=function(e){var t=e.publicKey,n=e.name,r=e.description,a=e.created,i=e.disabled,c=e.onEdit,l=e.onDelete,o=Object(ne.f)(W.b,{size:"small",icon:Object(ne.f)(B.r,null),label:Object(b.b)("Delete Key"),disabled:i,title:i?Object(b.b)("You do not have permission to delete keys"):void 0});return Object(ne.f)(Je,null,Object(ne.f)(Ue,null,Object(ne.f)(Ie,null,Object(ne.f)("div",null,n),r&&Object(ne.f)(We.a,{position:"top",size:"sm",title:r})),Object(ne.f)(He,null,Object(b.c)("Created on [date]",{date:Object(ne.f)(Te.a,{date:a,timeAndDate:!0})}))),Object(ne.f)(oe.a,{gap:1},Object(ne.f)(Me.a,{value:t},Object(ne.f)(W.b,{size:"small",icon:Object(ne.f)(B.q,null)},Object(b.b)("Copy Key"))),Object(ne.f)(W.b,{size:"small",onClick:c(t),icon:Object(ne.f)(B.u,null),label:Object(b.b)("Edit Key"),disabled:i,title:i?Object(b.b)("You do not have permission to edit keys"):void 0}),i?o:Object(ne.f)(Le.a,{message:Object(b.b)("After removing this Public Key, your Relay will no longer be able to communicate with Sentry and events will be dropped."),onConfirm:l(t),confirmInput:n},o)))};qe.displayName="CardHeader";var Be=qe,Ie=Object(F.a)("div",{target:"e5hz7hr0",label:"Name"})("display:grid;grid-template-columns:max-content 1fr;grid-gap:",Object($.a)(.5),";"),Ue=Object(F.a)("div",{target:"e5hz7hr1",label:"MainInfo"})("color:",(function(e){return e.theme.textColor}),";display:grid;grid-gap:",Object($.a)(1),";"),He=Object(F.a)("small",{target:"e5hz7hr2",label:"Date"})("color:",(function(e){return e.theme.gray300}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";"),Je=Object(F.a)("div",{target:"e5hz7hr3",label:"Header"})("display:grid;grid-gap:",Object($.a)(1),";align-items:flex-start;@media (min-width:",(function(e){return e.theme.breakpoints[0]}),"){grid-template-columns:1fr max-content;}");var Ye=function(e){var t=e.children;return Object(ne.f)(Xe,null,t)};Ye.displayName="CommandLine";var Ge=Ye,Xe=Object(F.a)("code",{target:"encb4l0",label:"Wrapper"})("padding:",Object($.a)(.5)," ",Object($.a)(1),";color:",(function(e){return e.theme.pink300}),";background:",(function(e){return e.theme.pink100}),";border:1px solid ",(function(e){return e.theme.pink200}),";font-family:",(function(e){return e.theme.text.familyMono}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";white-space:nowrap;"),$e=function(e){var t=e.onRefresh,n=e.disabled;return Object(ne.f)(f.a,null,Object(ne.f)(xe.a,{title:Object(b.b)("Waiting on Activity!"),description:n?void 0:Object(b.c)("Run relay in your terminal with [commandLine]",{commandLine:Object(ne.f)(Ge,null,"relay run")}),action:Object(ne.f)(W.b,{icon:Object(ne.f)(B.jb,null),onClick:t},Object(b.b)("Refresh"))}))};$e.displayName="WaitingActivity";var _e=$e,Qe=function(e){var t=e.relays,n=e.relayActivities,r=e.onRefresh,a=e.onDelete,i=e.onEdit,c=e.disabled,l=function(e,t){return e.reduce((function(e,n){var r=n.name,a=n.description,i=n.created,c=n.publicKey;return e.hasOwnProperty(c)||(e[c]={name:r,description:a,created:i,activities:[]}),e[c].activities.length||(e[c].activities=t.filter((function(e){return e.publicKey===c}))),e}),{})}(Ne()(t,(function(e){return e.created}),["desc"]),n);return Object(ne.f)(et,null,Object.keys(l).map((function(e){var t=l[e],n=t.name,o=t.description,s=t.created,u=t.activities;return Object(ne.f)(tt,{key:e},Object(ne.f)(Be,{publicKey:e,name:n,description:o,created:s,onEdit:i,onDelete:a,disabled:c}),function(e){return e.length?Object(ne.f)(Ve,{activities:e}):Object(ne.f)(_e,{onRefresh:r,disabled:c})}(u))})))};Qe.displayName="List";var Ze=Qe,et=Object(F.a)("div",{target:"e1nk16xu0",label:"Wrapper"})("display:grid;grid-gap:",Object($.a)(3),";"),tt=Object(F.a)("div",{target:"e1nk16xu1",label:"Card"})("display:grid;grid-gap:",Object($.a)(1),";");function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return x()(this,n)}}var it=function(e){P()(n,e);var t=at(n);function n(){var e;v()(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).handleDelete=function(t){return h()(j.a.mark((function n(){var r,a,i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.state.relays,a=r.filter((function(e){return e.publicKey!==t})).map((function(e){return V()(e,["created","lastModified"])})),n.prev=2,n.next=5,e.api.requestPromise("/organizations/".concat(e.props.organization.slug,"/"),{method:"PUT",data:{trustedRelays:a}});case 5:i=n.sent,Object(E.c)(Object(b.b)("Successfully deleted Relay public key")),e.setRelays(i.trustedRelays),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),Object(E.a)(Object(b.b)("An unknown error occurred while deleting Relay public key"));case 13:case"end":return n.stop()}}),n,null,[[2,10]])})))},e.handleOpenEditDialog=function(t){return function(){var n=e.state.relays.find((function(e){return e.publicKey===t}));n&&Object(M.openModal)((function(t){return Object(ne.f)(ze,a()({},t,{savedRelays:e.state.relays,api:e.api,orgSlug:e.props.organization.slug,relay:n,onSubmitSuccess:function(t){e.successfullySaved(t,Object(b.b)("Successfully updated Relay public key"))}}))}))}},e.handleOpenAddDialog=function(){Object(M.openModal)((function(t){return Object(ne.f)(Re,a()({},t,{savedRelays:e.state.relays,api:e.api,orgSlug:e.props.organization.slug,onSubmitSuccess:function(t){e.successfullySaved(t,Object(b.b)("Successfully added Relay public key"))}}))}))},e.handleRefresh=function(){e.fetchData()},e}return R()(n,[{key:"componentDidUpdate",value:function(e,t){T()(t.relays,this.state.relays)||(this.fetchData(),Object(L.h)(rt(rt({},e.organization),{},{trustedRelays:this.state.relays}))),w()(C()(n.prototype),"componentDidUpdate",this).call(this,e,t)}},{key:"getTitle",value:function(){return Object(b.b)("Relay")}},{key:"getDefaultState",value:function(){return rt(rt({},w()(C()(n.prototype),"getDefaultState",this).call(this)),{},{relays:this.props.organization.trustedRelays})}},{key:"getEndpoints",value:function(){var e=this.props.organization;return[["relayActivities","/organizations/".concat(e.slug,"/relay_usage/")]]}},{key:"setRelays",value:function(e){this.setState({relays:e})}},{key:"successfullySaved",value:function(e,t){Object(E.c)(t),this.setRelays(e.trustedRelays)}},{key:"renderContent",value:function(e){var t=this.state,n=t.relays,r=t.relayActivities;return t.loading?this.renderLoading():n.length?Object(ne.f)(Ze,{relays:n,relayActivities:r,onEdit:this.handleOpenEditDialog,onRefresh:this.handleRefresh,onDelete:this.handleDelete,disabled:e}):Object(ne.f)(Ce,null)}},{key:"renderBody",value:function(){var e=!this.props.organization.access.includes("org:write");return Object(ne.f)(o.a.Fragment,null,Object(ne.f)(U.a,{title:Object(b.b)("Relay"),action:Object(ne.f)(W.b,{title:e?Object(b.b)("You do not have permission to register keys"):void 0,priority:"primary",size:"small",icon:Object(ne.f)(B.b,{size:"xs",isCircled:!0}),onClick:this.handleOpenAddDialog,disabled:e},Object(b.b)("Register Key"))}),Object(ne.f)(J.a,null),Object(ne.f)(ct,null,Object(b.b)("Sentry Relay offers enterprise-grade data security by providing a standalone service that acts as a middle layer between your application and sentry.io.")),Object(ne.f)(H.a,null,Object(b.c)("Go to [link:Relay Documentation] for setup and details.",{link:Object(ne.f)(q.a,{href:"https://getsentry.github.io/relay/"})})),this.renderContent(e))}}]),n}(I.a),ct=Object(F.a)(H.a,{target:"ecjys5m0",label:"StyledTextBlock"})({name:"1274r9c",styles:"max-width:600px;"}),lt=function(e){var t=e.organization,n=c()(e,["organization"]);return Object(ne.f)(s.a,{features:["relay"],organization:t,renderDisabled:function(){return Object(ne.f)(u.a,{alert:f.b,features:t.features,featureName:Object(b.b)("Relay")})}},Object(ne.f)(it,a()({organization:t},n)))};lt.displayName="OrganizationRelay";t.default=Object(d.a)(lt)}}]);
//# sourceMappingURL=organizationRelay.js.map