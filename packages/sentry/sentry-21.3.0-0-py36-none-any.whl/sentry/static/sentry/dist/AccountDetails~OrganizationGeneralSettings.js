(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[15],{1899:function(e,t,a){"use strict";var n=a(14),r=a.n(n),i=a(9),o=a.n(i),c=a(10),s=a.n(c),l=a(11),u=a.n(l),p=a(12),f=a.n(p),d=a(7),b=a.n(d),g=a(3),v=a(1),h=a.n(v),m=a(222),O=a(6),y=a(0);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return f()(this,a)}}var D=function(e){u()(a,e);var t=j(a);function a(){return o()(this,a),t.apply(this,arguments)}return s()(a,[{key:"render",value:function(){var e=this.props,t=e.icon,a=e.title,n=e.subtitle,i=e.action,o=e.tabs,c=e.noTitleStyles,s=e.body,l=r()(e,["icon","title","subtitle","action","tabs","noTitleStyles","body"]),u=!n;return Object(y.f)("div",l,Object(y.f)(S,{isNarrow:u},Object(y.f)(z,null,t&&Object(y.f)(x,null,t),a&&Object(y.f)(w,{tabs:o,styled:c},Object(y.f)(m.a,null,a),n&&Object(y.f)(U,null,n))),i&&Object(y.f)(I,{isNarrow:u},i)),s&&Object(y.f)(k,null,s),o&&Object(y.f)(P,null,o))}}]),a}(h.a.Component);D.displayName="UnstyledSettingsPageHeader",D.defaultProps={noTitleStyles:!1};var S=Object(g.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})("display:flex;align-items:",(function(e){return e.isNarrow?"center":"flex-start"}),";"),z=Object(g.a)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),w=Object(g.a)("div",{target:"e1uay4fd2",label:"Title"})((function(e){return!e.styled&&"font-size: 20px; font-weight: 600;"}),";margin:",Object(O.a)(4)," ",Object(O.a)(2)," ",Object(O.a)(3)," 0;"),U=Object(g.a)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",Object(O.a)(1.5)," 0 0;"),x=Object(g.a)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",Object(O.a)(1),";"),I=Object(g.a)("div",{target:"e1uay4fd5",label:"Action"})("margin-top:",(function(e){return e.isNarrow?"0":Object(O.a)(4)}),";"),N=Object(g.a)(D,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",Object(O.a)(4),";"),k=Object(g.a)("div",{target:"e1uay4fd7",label:"BodyWrapper"})("flex:1;margin:0 0 ",Object(O.a)(3),";"),P=Object(g.a)("div",{target:"e1uay4fd8",label:"TabsWrapper"})({name:"8k0ai7",styles:"flex:1;margin:0;"});t.a=N},2440:function(e,t,a){"use strict";var n=a(5),r=a.n(n),i=a(8),o=a.n(i),c=a(9),s=a.n(c),l=a(10),u=a.n(l),p=a(21),f=a.n(p),d=a(11),b=a.n(d),g=a(12),v=a.n(g),h=a(7),m=a.n(h),O=a(3),y=a(1),j=a.n(y),D=a(33),S=a(359),z=Object(O.a)("div",{target:"ed8v6mn0",label:"Well"})("border:1px solid ",(function(e){return e.theme.border}),";box-shadow:none;background:",(function(e){return e.theme.backgroundSecondary}),";padding:",(function(e){return e.hasImage?"80px 30px":"15px 20px"}),";margin-bottom:20px;border-radius:3px;",(function(e){return e.centered&&"text-align: center"}),";"),w=a(32),U=a(2),x=a(0);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m()(e);if(t){var r=m()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return v()(this,a)}}var P={nw:["top","left"],ne:["top","right"],se:["bottom","right"],sw:["bottom","left"]},E=function(e){b()(a,e);var t=k(a);function a(){var e;s()(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={file:null,objectURL:null,mousePosition:{pageX:0,pageY:0},resizeDimensions:{top:0,left:0,size:0},resizeDirection:null},e.file=j.a.createRef(),e.canvas=j.a.createRef(),e.image=j.a.createRef(),e.cropContainer=j.a.createRef(),e.MIN_DIMENSION=256,e.MAX_DIMENSION=1024,e.ALLOWED_MIMETYPES="image/gif,image/jpeg,image/png",e.onSelectFile=function(t){var a=t.target.files&&t.target.files[0];if(a)if(/^image\//.test(a.type)){e.revokeObjectUrl();var n=e.props.updateDataUrlState,r=window.URL.createObjectURL(a);e.setState({file:a,objectURL:r},(function(){return n({savedDataUrl:null})}))}else Object(D.a)(Object(U.b)("That is not a supported file type."))},e.revokeObjectUrl=function(){return e.state.objectURL&&window.URL.revokeObjectURL(e.state.objectURL)},e.onImageLoad=function(){var t=e.validateImage();if(t)return e.revokeObjectUrl(),e.setState({objectURL:null}),void Object(D.a)(t);var a=e.image.current;if(a){var n={resizeDimensions:{size:Math.min(a.clientHeight,a.clientWidth),top:0,left:0}};e.setState(n,e.drawToCanvas)}},e.updateDimensions=function(t){var a=e.cropContainer.current;if(a){var n=e.state,r=n.mousePosition,i=n.resizeDimensions,o=t.pageY,c=t.pageX,s=i.top+(o-r.pageY),l=i.left+(c-r.pageX);s<0?(s=0,o=r.pageY):s+i.size>a.clientHeight&&(s=a.clientHeight-i.size,o=r.pageY),l<0?(l=0,c=r.pageX):l+i.size>a.clientWidth&&(l=a.clientWidth-i.size,c=r.pageX),e.setState((function(e){return{resizeDimensions:N(N({},e.resizeDimensions),{},{top:s,left:l}),mousePosition:{pageX:c,pageY:o}}}))}},e.onMouseDown=function(t){t.preventDefault(),e.setState({mousePosition:{pageY:t.pageY,pageX:t.pageX}}),document.addEventListener("mousemove",e.updateDimensions),document.addEventListener("mouseup",e.onMouseUp)},e.onMouseUp=function(t){t.preventDefault(),document.removeEventListener("mousemove",e.updateDimensions),document.removeEventListener("mouseup",e.onMouseUp),e.drawToCanvas()},e.startResize=function(t,a){a.stopPropagation(),a.preventDefault(),document.addEventListener("mousemove",e.updateSize),document.addEventListener("mouseup",e.stopResize),e.setState({resizeDirection:t,mousePosition:{pageY:a.pageY,pageX:a.pageX}})},e.stopResize=function(t){t.stopPropagation(),t.preventDefault(),document.removeEventListener("mousemove",e.updateSize),document.removeEventListener("mouseup",e.stopResize),e.setState({resizeDirection:null}),e.drawToCanvas()},e.updateSize=function(t){var a=e.cropContainer.current;if(a){var n=e.state.mousePosition,r=t.pageY-n.pageY,i=t.pageX-n.pageX;e.setState({resizeDimensions:e.getNewDimensions(a,r,i),mousePosition:{pageX:t.pageX,pageY:t.pageY}})}},e.getDiffNW=function(e,t){return(e-2*e+(t-2*t))/2},e.getDiffNE=function(e,t){return(e-2*e+t)/2},e.getDiffSW=function(e,t){return(e+(t-2*t))/2},e.getDiffSE=function(e,t){return(e+t)/2},e.getNewDimensions=function(t,a,n){var r=e.state,i=r.resizeDimensions,o=r.resizeDirection,c=e["getDiff"+o.toUpperCase()](a,n),s=t.clientHeight-i.top,l=t.clientWidth-i.left,u="nw"===o||"ne"===o,p="nw"===o||"sw"===o,f={top:0,left:0,size:i.size+c};u&&(f.top=i.top-c,s=t.clientHeight-f.top),p&&(f.left=i.left-c,l=t.clientWidth-f.left),f.top<0&&(f.size=f.size+f.top,p&&(f.left=f.left-f.top),f.top=0),f.left<0&&(f.size=f.size+f.left,u&&(f.top=f.top-f.left),f.left=0);var d=Math.min(l,s);return f.size>d?(u&&(f.top=f.top+f.size-d),p&&(f.left=f.left+f.size-d),f.size=d):f.size<e.MIN_DIMENSION&&(u&&(f.top=f.top+f.size-e.MIN_DIMENSION),p&&(f.left=f.left+f.size-e.MIN_DIMENSION),f.size=e.MIN_DIMENSION),N(N({},i),f)},e.uploadClick=function(t){t.preventDefault(),e.file.current&&e.file.current.click()},e}return u()(a,[{key:"componentWillUnmount",value:function(){this.revokeObjectUrl()}},{key:"validateImage",value:function(){var e=this.image.current;return e?e.naturalWidth<this.MIN_DIMENSION||e.naturalHeight<this.MIN_DIMENSION?Object(U.c)("Please upload an image larger than [size]px by [size]px.",{size:this.MIN_DIMENSION-1}):e.naturalWidth>this.MAX_DIMENSION||e.naturalHeight>this.MAX_DIMENSION?Object(U.c)("Please upload an image smaller than [size]px by [size]px.",{size:this.MAX_DIMENSION}):null:null}},{key:"drawToCanvas",value:function(){var e=this.canvas.current;if(e){var t=this.image.current;if(t){var a=this.state.resizeDimensions,n=a.left,r=a.top,i=a.size,o=(t.naturalHeight/t.clientHeight+t.naturalWidth/t.clientWidth)/2;e.width=i*o,e.height=i*o,e.getContext("2d").drawImage(t,n*o,r*o,i*o,i*o,0,0,i*o,i*o),this.props.updateDataUrlState({dataUrl:e.toDataURL()})}}}},{key:"renderImageCrop",value:function(){var e=this,t=this.imageSrc;if(!t)return null;var a=this.state,n=a.resizeDimensions,r=a.resizeDirection,i={top:n.top,left:n.left,width:n.size,height:n.size};return Object(x.f)(C,{resizeDirection:r},Object(x.f)(L,{ref:this.cropContainer},Object(x.f)("img",{ref:this.image,src:t,onLoad:this.onImageLoad,onDragStart:function(e){return e.preventDefault()}}),Object(x.f)(A,{style:i,onMouseDown:this.onMouseDown},Object.keys(P).map((function(t){return Object(x.f)(W,{key:t,position:t,onMouseDown:e.startResize.bind(e,t)})})))))}},{key:"render",value:function(){var e=this.imageSrc,t=Object(x.f)("a",{onClick:this.uploadClick}),a=Object(x.f)(z,{hasImage:!0,centered:!0},Object(x.f)("p",null,Object(U.c)("[upload:Upload a photo] to get started.",{upload:t})));return Object(x.f)(j.a.Fragment,null,!e&&a,e&&Object(x.f)(T,{ref:this.canvas}),this.renderImageCrop(),Object(x.f)("div",{className:"form-group"},e&&Object(x.f)("a",{onClick:this.uploadClick},Object(U.b)("Change Photo")),Object(x.f)(R,{ref:this.file,type:"file",accept:this.ALLOWED_MIMETYPES,onChange:this.onSelectFile})))}},{key:"imageSrc",get:function(){var e,t=this.props,a=t.savedDataUrl,n=t.model,r=t.type,i=null===(e=n.avatar)||void 0===e?void 0:e.avatarUuid,o=i&&"/".concat(w.c[r]||"avatar","/").concat(i,"/");return a||this.state.objectURL||o}}]),a}(j.a.Component);E.displayName="AvatarCropper";var M=E,R=Object(O.a)("input",{target:"e1eh795y0",label:"UploadInput"})({name:"10bu0qy",styles:"position:absolute;opacity:0;"}),C=Object(O.a)("div",{target:"e1eh795y1",label:"ImageCropper"})("cursor:",(function(e){return e.resizeDirection?"".concat(e.resizeDirection,"-resize"):"default"}),";text-align:center;margin-bottom:20px;background-size:20px 20px;background-position:0 0,0 10px,10px -10px,-10px 0px;background-color:",(function(e){return e.theme.background}),";background-image:linear-gradient( 45deg,",(function(e){return e.theme.backgroundSecondary})," 25%,rgba(0,0,0,0) 25% ),linear-gradient(-45deg,",(function(e){return e.theme.backgroundSecondary})," 25%,rgba(0,0,0,0) 25%),linear-gradient(45deg,rgba(0,0,0,0) 75%,",(function(e){return e.theme.backgroundSecondary})," 75%),linear-gradient(-45deg,rgba(0,0,0,0) 75%,",(function(e){return e.theme.backgroundSecondary})," 75%);"),L=Object(O.a)("div",{target:"e1eh795y2",label:"CropContainer"})({name:"8gjx6o",styles:"display:inline-block;position:relative;max-width:100%;"}),A=Object(O.a)("div",{target:"e1eh795y3",label:"Cropper"})("position:absolute;border:2px dashed ",(function(e){return e.theme.gray300}),";"),W=Object(O.a)("div",{target:"e1eh795y4",label:"Resizer"})("border-radius:5px;width:10px;height:10px;position:absolute;background-color:",(function(e){return e.theme.gray300}),";cursor:",(function(e){return"".concat(e.position,"-resize")}),";",(function(e){return P[e.position].map((function(e){return"".concat(e,": -5px;")}))})),T=Object(O.a)("canvas",{target:"e1eh795y5",label:"HiddenCanvas"})({name:"1hyfx7x",styles:"display:none;"}),_=a(27),X=a(43),Y=a(131),H=a(44),G=a(96),q=a(47),F=a(713);function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=m()(e);if(t){var r=m()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return v()(this,a)}}var Q=function(e){b()(a,e);var t=K(a);function a(){var e;s()(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={model:e.props.model,savedDataUrl:null,dataUrl:null,hasError:!1},e.handleSaveSettings=function(t){var a=e.props,n=a.endpoint,r=a.api,i=e.state,o=i.model,c=i.dataUrl;t.preventDefault();var s,l=o&&o.avatar?o.avatar.avatarType:void 0;s={avatar_photo:c?c.split(",")[1]:void 0,avatar_type:l},r.request(n,{method:"PUT",data:s,success:function(t){e.setState({savedDataUrl:e.state.dataUrl}),e.handleSuccess(t)},error:e.handleError.bind(f()(e),"There was an error saving your preferences.")})},e.handleChange=function(t){var a,n;return e.updateState(B(B({},e.state.model),{},{avatar:{avatarUuid:null!==(a=null===(n=e.state.model.avatar)||void 0===n?void 0:n.avatarUuid)&&void 0!==a?a:"",avatarType:t}}))},e}return u()(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){void 0!==e.model&&this.setState({model:e.model})}},{key:"updateState",value:function(e){this.setState({model:e})}},{key:"handleError",value:function(e){Object(D.a)(e)}},{key:"handleSuccess",value:function(e){var t=this.props.onSave;this.setState({model:e}),t(e),Object(D.c)(Object(U.b)("Successfully saved avatar preferences"))}},{key:"render",value:function(){var e,t,a=this,n=this.props,i=n.allowGravatar,o=n.allowUpload,c=n.allowLetter,s=n.savedDataUrl,l=n.type,u=n.isUser,p=n.disabled,f=this.state,d=f.hasError,b=f.model;if(d)return Object(x.f)(Y.a,null);if(!b)return Object(x.f)(H.default,null);var g=null!==(e=null===(t=b.avatar)||void 0===t?void 0:t.avatarType)&&void 0!==e?e:"letter_avatar",v="letter_avatar"===g,h="team"===l,m="organization"===l,O=[];return c&&O.push(["letter_avatar",Object(U.b)("Use initials")]),o&&O.push(["upload",Object(U.b)("Upload an image")]),i&&O.push(["gravatar",Object(U.b)("Use Gravatar")]),Object(x.f)(G.a,null,Object(x.f)(G.e,null,Object(U.b)("Avatar")),Object(x.f)(G.c,null,Object(x.f)(Z,null,Object(x.f)(V,{inline:v},Object(x.f)(F.b,{style:{flex:1},choices:O,value:g,label:Object(U.b)("Avatar Type"),onChange:this.handleChange,disabled:p}),v&&Object(x.f)(S.a,{gravatar:!1,style:{width:90,height:90},user:u?b:void 0,organization:m?b:void 0,team:h?b:void 0})),Object(x.f)(ee,null,i&&"gravatar"===g&&Object(x.f)(z,null,Object(U.b)("Gravatars are managed through "),Object(x.f)(X.a,{href:"http://gravatar.com"},"Gravatar.com")),b.avatar&&"upload"===g&&Object(x.f)(M,r()({},this.props,{type:l,model:b,savedDataUrl:s,updateDataUrlState:function(e){return a.setState(e)}})),Object(x.f)($,{className:"form-actions"},Object(x.f)(_.b,{type:"button",priority:"primary",onClick:this.handleSaveSettings,disabled:p},Object(U.b)("Save Avatar")))))))}}]),a}(j.a.Component);Q.displayName="AvatarChooser",Q.defaultProps={allowGravatar:!0,allowLetter:!0,allowUpload:!0,type:"user",onSave:function(){}};var V=Object(O.a)("div",{target:"e19alrnp0",label:"AvatarGroup"})("display:flex;flex-direction:",(function(e){return e.inline?"row":"column"}),";"),Z=Object(O.a)("div",{target:"e19alrnp1",label:"AvatarForm"})({name:"cn3j3q",styles:"line-height:1.5em;padding:1em 1.25em;"}),$=Object(O.a)("fieldset",{target:"e19alrnp2",label:"AvatarSubmit"})({name:"1l4tjll",styles:"display:flex;justify-content:flex-end;margin-top:1em;"}),ee=Object(O.a)("div",{target:"e19alrnp3",label:"AvatarUploadSection"})({name:"16f1609",styles:"margin-top:1em;"});t.a=Object(q.a)(Q)}}]);
//# sourceMappingURL=AccountDetails~OrganizationGeneralSettings.js.map