(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[89],{1934:function(t,e,r){"use strict";var n=r(9),a=r.n(n),o=r(10),c=r.n(o),u=r(11),i=r.n(u),s=r(12),l=r.n(s),f=r(7),p=r.n(f),h=r(3),y=r(1),d=r.n(y),v=r(34),b=r.n(v),m=r(27),j=r(15),O=r(331),g=r(2),R=r(63),S=r(223),k=r(0);function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var a=p()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l()(this,r)}}var D=function(t){i()(r,t);var e=q(r);function r(){var t;a()(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).state={query:t.props.query||t.props.defaultQuery,dropdownVisible:!1},t.searchInputRef=d.a.createRef(),t.blur=function(){t.searchInputRef.current&&t.searchInputRef.current.blur()},t.onSubmit=function(e){e.preventDefault(),t.blur(),t.props.onSearch(t.state.query)},t.clearSearch=function(){t.setState({query:t.props.defaultQuery},(function(){t.props.onSearch(t.state.query),Object(R.a)(t.props.onChange,t.state.query)}))},t.onQueryFocus=function(){t.setState({dropdownVisible:!0})},t.onQueryBlur=function(){t.setState({dropdownVisible:!1})},t.onQueryChange=function(e){var r=e.target.value;t.setState({query:r}),Object(R.a)(t.props.onChange,r)},t}return c()(r,[{key:"UNSAFE_componentWillReceiveProps",value:function(t){t.query!==this.props.query&&this.setState({query:t.query})}},{key:"render",value:function(){var t=this.props,e=t.className,r=t.width;return Object(k.f)("div",{className:b()("search",e)},Object(k.f)("form",{className:"form-horizontal",onSubmit:this.onSubmit},Object(k.f)("div",null,Object(k.f)(I,{type:"text",className:"search-input",placeholder:this.props.placeholder,name:"query",ref:this.searchInputRef,autoComplete:"off",value:this.state.query,onBlur:this.onQueryBlur,onChange:this.onQueryChange,width:r}),Object(k.f)(N,{className:"search-input-icon",size:"sm",color:"gray300"}),this.state.query!==this.props.defaultQuery&&Object(k.f)(w,{type:"button",className:"search-clear-form",priority:"link",onClick:this.clearSearch,size:"xsmall",icon:Object(k.f)(O.a,null),label:Object(g.b)("Clear")}))))}}]),r}(d.a.PureComponent);D.displayName="SearchBar",D.defaultProps={query:"",defaultQuery:"",onSearch:function(){}};var I=Object(h.a)(S.a,{target:"e5a9jdx0",label:"StyledInput"})("width:",(function(t){return t.width?t.width:void 0}),";&.focus-visible{box-shadow:inset 0 2px 0 rgba(0,0,0,0.04),0 0 6px rgba(177,171,225,0.3);border-color:#a598b2;outline:none;}"),N=Object(h.a)(j.mb,{target:"e5a9jdx1",label:"StyledIconSearch"})({name:"nte755",styles:"position:absolute;top:50%;transform:translateY(-50%);left:14px;"}),w=Object(h.a)(m.b,{target:"e5a9jdx2",label:"SearchClearButton"})("position:absolute;top:50%;height:16px;transform:translateY(-50%);right:10px;font-size:",(function(t){return t.theme.fontSizeLarge}),";color:",(function(t){return t.theme.gray200}),";&:hover{color:",(function(t){return t.theme.gray300}),";}");e.a=D},1951:function(t,e,r){"use strict";r(1);var n=r(18),a=r(185),o=r(0);function c(t){var e=t.className,r=t.bytes;return Object(o.f)("span",{className:e},Object(a.a)({value:Object(n.j)(r),fixed:"xx KB"}))}c.displayName="FileSize",e.a=c},2045:function(t,e,r){"use strict";var n=r(9),a=r.n(n),o=r(10),c=r.n(o),u=r(11),i=r.n(u),s=r(12),l=r.n(s),f=r(7),p=r.n(f),h=r(1),y=r.n(h),d=r(36),v=r(226),b=r(54);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var a=p()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l()(this,r)}}var j=function(t){i()(r,t);var e=m(r);function r(){return a()(this,r),e.apply(this,arguments)}return c()(r,[{key:"hasRole",value:function(){var t,e=d.default.get("user"),r=this.props,n=r.organization,a=r.role,o=n.availableRoles,c=null!==(t=n.role)&&void 0!==t?t:"";if(!e)return!1;if(e.isSuperuser)return!0;if(!Array.isArray(o))return!1;var u=o.map((function(t){return t.id}));if(!u.includes(a)||!u.includes(c))return!1;var i=u.indexOf(a);return u.indexOf(c)>=i}},{key:"render",value:function(){var t=this.props.children,e=this.hasRole();return Object(v.a)(t)?t({hasRole:e}):e&&t?t:null}}]),r}(y.a.Component);j.displayName="Role",e.a=Object(b.a)(j)},2046:function(t,e,r){"use strict";r.d(e,"b",(function(){return g})),r.d(e,"c",(function(){return R})),r.d(e,"a",(function(){return k}));var n=r(20),a=r.n(n),o=r(9),c=r.n(o),u=r(10),i=r.n(u),s=r(11),l=r.n(s),f=r(12),p=r.n(f),h=r(7),y=r.n(h),d=r(29),v=r.n(d),b=r(1),m=r.n(b),j=r(0);function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y()(t);if(e){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}function g(t,e){var r=t.split(" ")[0],n=t.split(" ").splice(1).join(" "),a=e.generationByIdentifier(r);return void 0===a?t:a+" "+n}function R(){return S.apply(this,arguments)}function S(){return(S=v()(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.e(203).then(r.t.bind(null,2143,7)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var k=function(t){l()(r,t);var e=O(r);function r(t){var n;return c()(this,r),(n=e.call(this,t))._isMounted=void 0,n.state={iOSDeviceList:null},n}return i()(r,[{key:"componentDidMount",value:function(){var t=this;this._isMounted=!0,R().then((function(e){t._isMounted&&t.setState({iOSDeviceList:e})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=this.props,e=t.value,r=t.children,n=this.state.iOSDeviceList;if(!e)return null;if(!n)return e;var a=g(e,n);return Object(j.f)("span",{"data-test-id":"loaded-device-name"},r?r(a):a)}}]),r}(m.a.Component);k.displayName="DeviceName"},2102:function(t,e,r){"use strict";var n=r(9),a=r.n(n),o=r(10),c=r.n(o),u=r(11),i=r.n(u),s=r(12),l=r.n(s),f=r(7),p=r.n(f),h=r(1),y=r.n(h),d=r(2045),v=r(54),b=r(0);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p()(t);if(e){var a=p()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l()(this,r)}}var j=function(t){i()(r,t);var e=m(r);function r(){return a()(this,r),e.apply(this,arguments)}return c()(r,[{key:"getDownloadUrl",value:function(){var t=this.props,e=t.attachment,r=t.organization,n=t.eventId,a=t.projectId;return"/api/0/projects/".concat(r.slug,"/").concat(a,"/events/").concat(n,"/attachments/").concat(e.id,"/")}},{key:"render",value:function(){var t=this,e=this.props,r=e.children,n=e.organization;return Object(b.f)(d.a,{role:n.attachmentsRole},(function(e){var n=e.hasRole;return r(n?t.getDownloadUrl():null)}))}}]),r}(y.a.PureComponent);j.displayName="AttachmentUrl",e.a=Object(v.a)(j)},2905:function(t,e,r){"use strict";r.r(e),r.d(e,"GroupEvents",(function(){return V}));var n=r(8),a=r.n(n),o=r(9),c=r.n(o),u=r(10),i=r.n(u),s=r(11),l=r.n(s),f=r(12),p=r.n(f),h=r(7),y=r.n(h),d=r(1),v=r.n(d),b=r(22),m=r(296),j=r.n(m),O=r(327),g=r(202),R=r(441),S=r(2046),k=r(1951),q=r(445),D=r(2102),I=r(54),N=r(0);function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y()(t);if(e){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}var x=function(t){l()(r,t);var e=w(r);function r(){return c()(this,r),e.apply(this,arguments)}return i()(r,[{key:"renderCrashFileLink",value:function(){var t=this.props,e=t.event,r=t.projectId;if(!e.crashFile)return null;var n="event.minidump"===e.crashFile.type?"Minidump":"Crash file";return Object(N.f)(D.a,{projectId:r,eventId:e.id,attachment:e.crashFile},(function(t){var r,a;return t&&Object(N.f)("small",null,n,": ",Object(N.f)("a",{href:"".concat(t,"?download=1")},null===(r=e.crashFile)||void 0===r?void 0:r.name)," (",Object(N.f)(k.a,{bytes:(null===(a=e.crashFile)||void 0===a?void 0:a.size)||0}),")")}))}},{key:"render",value:function(){var t=this.props,e=t.className,r=t.event,n=t.orgId,a=t.groupId,o=t.tagList,c=t.hasUser,u={};r.tags.forEach((function(t){u[t.key]=t.value}));var i="/organizations/".concat(n,"/issues/").concat(a,"/events/").concat(r.id,"/");return Object(N.f)("tr",{key:r.id,className:e},Object(N.f)("td",null,Object(N.f)("h5",null,Object(N.f)(q.a,{to:i},Object(N.f)(R.a,{date:r.dateCreated})),Object(N.f)("small",null,r.title.substr(0,100)),this.renderCrashFileLink())),c&&Object(N.f)("td",{className:"event-user table-user-info"},r.user?Object(N.f)("div",null,Object(N.f)(g.a,{user:r.user,size:24,className:"avatar",gravatar:!1}),r.user.email):Object(N.f)("span",null,"â€”")),o.map((function(t){return Object(N.f)("td",{key:t.key},Object(N.f)("div",null,"device"===t.key?Object(N.f)(S.a,{value:u[t.key]}):u[t.key]))})))}}]),r}(v.a.Component);x.displayName="EventsTableRow";var C=Object(I.a)(x),P=r(2);function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y()(t);if(e){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}var z=function(t){l()(r,t);var e=L(r);function r(){return c()(this,r),e.apply(this,arguments)}return i()(r,[{key:"render",value:function(){var t=this.props,e=t.events,r=t.tagList,n=t.orgId,a=t.projectId,o=t.groupId,c=!!e.find((function(t){return t.user}));return Object(N.f)("table",{className:"table events-table"},Object(N.f)("thead",null,Object(N.f)("tr",null,Object(N.f)("th",null,Object(P.b)("ID")),c&&Object(N.f)("th",null,Object(P.b)("User")),r.map((function(t){return Object(N.f)("th",{key:t.key},t.name)})))),Object(N.f)("tbody",null,e.map((function(t){return Object(N.f)(C,{key:t.id,event:t,orgId:n,projectId:a,groupId:o,tagList:r,hasUser:c})}))))}}]),r}(v.a.Component);z.displayName="EventsTable";var E=z,F=r(131),Q=r(44),B=r(694),U=r(96),A=r(1934),M=r(556),_=r(47);function W(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?W(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y()(t);if(e){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}var V=function(t){l()(r,t);var e=G(r);function r(t){var n;c()(this,r),(n=e.call(this,t)).handleSearch=function(t){var e=T({},n.props.location.query);e.query=t;var r=n.props.params,a=r.groupId,o=r.orgId;b.browserHistory.push({pathname:"/organizations/".concat(o,"/issues/").concat(a,"/events/"),query:e})},n.fetchData=function(){n.setState({loading:!0,error:!1});var t=T(T({},j()(n.props.location.query,["cursor","environment"])),{},{limit:50,query:n.state.query});n.props.api.request("/issues/".concat(n.props.params.groupId,"/events/"),{query:t,method:"GET",success:function(t,e,r){var a;n.setState({eventList:t,error:!1,loading:!1,pageLinks:null!==(a=null==r?void 0:r.getResponseHeader("Link"))&&void 0!==a?a:""})},error:function(t){n.setState({error:Object(M.a)(t),loading:!1})}})};var a=n.props.location.query;return n.state={eventList:[],loading:!0,error:!1,pageLinks:"",query:a.query||""},n}return i()(r,[{key:"UNSAFE_componentWillMount",value:function(){this.fetchData()}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){if(this.props.location.search!==t.location.search){var e=t.location.query;this.setState({query:e.query},this.fetchData)}}},{key:"renderNoQueryResults",value:function(){return Object(N.f)(O.a,null,Object(N.f)("p",null,Object(P.b)("Sorry, no events match your search query.")))}},{key:"renderEmpty",value:function(){return Object(N.f)(O.a,null,Object(N.f)("p",null,Object(P.b)("There don't seem to be any events yet.")))}},{key:"renderResults",value:function(){var t=this.props,e=t.group,r=t.params,n=e.tags.filter((function(t){return"user"!==t.key}))||[];return Object(N.f)(E,{tagList:n,events:this.state.eventList,orgId:r.orgId,projectId:e.project.slug,groupId:r.groupId})}},{key:"renderBody",value:function(){return this.state.loading?Object(N.f)(Q.default,null):this.state.error?Object(N.f)(F.a,{message:this.state.error,onRetry:this.fetchData}):this.state.eventList.length>0?this.renderResults():this.state.query&&""!==this.state.query?this.renderNoQueryResults():this.renderEmpty()}},{key:"render",value:function(){return Object(N.f)("div",null,Object(N.f)("div",{style:{marginBottom:20}},Object(N.f)(A.a,{defaultQuery:"",placeholder:Object(P.b)("search event id, message, or tags"),query:this.state.query,onSearch:this.handleSearch})),Object(N.f)(U.a,{className:"event-list"},Object(N.f)(U.c,null,this.renderBody())),Object(N.f)(B.a,{pageLinks:this.state.pageLinks}))}}]),r}(v.a.Component);V.displayName="GroupEvents";e.default=Object(_.a)(V)}}]);
//# sourceMappingURL=GroupEvents.js.map