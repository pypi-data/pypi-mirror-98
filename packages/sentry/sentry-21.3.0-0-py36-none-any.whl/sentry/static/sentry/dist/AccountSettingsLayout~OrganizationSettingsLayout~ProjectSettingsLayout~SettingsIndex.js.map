{"version":3,"sources":["webpack:///./app/utils/recreateRoute.tsx","webpack:///./app/utils/withTeams.tsx","webpack:///./app/actions/settingsBreadcrumbActions.tsx","webpack:///./app/stores/settingsBreadcrumbStore.tsx","webpack:///./app/views/settings/components/settingsBreadcrumb/crumb.tsx","webpack:///./app/views/settings/components/settingsBreadcrumb/divider.tsx","webpack:///./app/views/settings/components/settingsBreadcrumb/breadcrumbDropdown.tsx","webpack:///./app/views/settings/components/settingsBreadcrumb/findFirstRouteWithoutRouteParam.tsx","webpack:///./app/views/settings/components/settingsBreadcrumb/menuItem.tsx","webpack:///./app/views/settings/components/settingsBreadcrumb/organizationCrumb.tsx","webpack:///./app/views/settings/components/settingsBreadcrumb/projectCrumb.tsx","webpack:///./app/views/settings/components/settingsBreadcrumb/teamCrumb.tsx","webpack:///./app/views/settings/components/settingsBreadcrumb/index.tsx","webpack:///./app/views/settings/components/settingsLayout.tsx"],"names":["recreateRoute","to","options","lastRootIndex","routeIndex","routes","params","location","stepBack","paths","map","path","indexOf","findLastIndex","slice","baseRoute","search","hash","fullRoute","join","replaceRouterParams","withTeams","WrappedComponent","createReactClass","displayName","getDisplayName","mixins","Reflux","listenTo","TeamStore","getInitialState","teams","getAll","onTeamUpdate","this","setState","render","props","state","createActions","storeConfig","pathMap","init","reset","SettingsBreadcrumbActions","mapTitle","onUpdateRouteMap","trimMappings","onTrimMappings","title","getRouteStringFromRoutes","trigger","routePath","fullPath","startsWith","SettingsBreadcrumbStore","createStore","Crumb","p","theme","subText","space","textColor","StyledIconChevron","IconChevron","StyledDivider","gray200","Divider","isHover","isLast","direction","size","BreadcrumbDropdown","isOpen","entering","leaving","open","close","handleStateChange","handleMouseEnterActor","clearTimeout","window","setTimeout","enterDelay","handleMouseEnter","handleMouseLeave","handleClickActor","handleClose","hasMenu","route","name","items","onSelect","blendCorner","onOpen","onClose","menuProps","onMouseEnter","onMouseLeave","virtualizedHeight","getActorProps","actions","onClick","bind","React","Component","findFirstRouteWithoutRouteParam","undefined","filter","find","includes","MenuItem","overflowEllipsis","OrganizationCrumb","organization","organizations","length","CrumbLink","orgId","slug","BadgeWrapper","avatarSize","item","hasProjectParam","projectId","destination","browserHistory","push","value","org","index","label","withLatestContext","ProjectCrumb","latestOrganization","latestProject","project","projects","ProjectName","mini","returnTo","avatarProps","consistentWidth","withProjects","TeamCrumb","team","teamId","teamItem","MENUS","Organization","Project","Team","SettingsBreadcrumb","prevProps","className","lastRouteIndex","r","lastIndexOf","Breadcrumbs","i","pathTitle","createMenu","Menu","CrumbPicker","key","contextTypes","SentryTypes","defaultProps","connect","Link","blue300","SettingsLayout","navVisible","navOffsetTop","unlisten","headerRef","createRef","listen","toggleNav","toggleBodyScrollLock","current","getBoundingClientRect","bottom","lock","bodyElement","document","getElementsByTagName","scrollTo","classList","renderNavigation","children","childProps","isValidElement","childRoutes","childRoute","shouldRenderNavigation","SettingsColumn","ref","HeaderContent","NavMenuToggle","priority","t","icon","aria-hidden","StyledSettingsBreadcrumb","MaxWidthContainer","SidebarWrapper","isVisible","offsetTop","NavMask","Content","Button","breakpoints","settings","containerWidth","sidebarWidth","background","border","slideInLeft","zIndex","settingsSidebarNav","dropShadowHeavy","settingsSidebarNavMask","fadeIn"],"mappings":"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","file":"AccountSettingsLayout~OrganizationSettingsLayout~ProjectSettingsLayout~SettingsIndex.js","sourcesContent":["import {Location} from 'history';\nimport findLastIndex from 'lodash/findLastIndex';\n\nimport replaceRouterParams from 'app/utils/replaceRouterParams';\nimport {RouteWithName} from 'app/views/settings/components/settingsBreadcrumb/types';\n\ntype Options = {\n  routes: RouteWithName[];\n\n  // parameters to replace any route string parameters (e.g. if route is `:orgId`,\n  // params should have `{orgId: slug}`\n  params: {[key: string]: string | undefined};\n\n  /**\n   * The number of routes to to pop off of `routes\n   * Must be < 0\n   *\n   * There's no ts type for negative numbers so we are arbitrarily specifying -1-9\n   */\n  stepBack?: -1 | -2 | -3 | -4 | -5 | -6 | -7 | -8 | -9;\n  location?: Location;\n};\n\n/**\n * Given a route object or a string and a list of routes + params from router, this will attempt to recreate a location string while replacing url params.\n * Can additionally specify the number of routes to move back\n *\n * See tests for examples\n */\nexport default function recreateRoute(\n  to: string | RouteWithName,\n  options: Options\n): string {\n  const {routes, params, location, stepBack} = options;\n  const paths = routes.map(({path}) => path || '');\n  let lastRootIndex: number;\n  let routeIndex: number | undefined;\n\n  // TODO(ts): typescript things\n  if (typeof to !== 'string') {\n    routeIndex = routes.indexOf(to) + 1;\n    lastRootIndex = findLastIndex(paths.slice(0, routeIndex), path => path[0] === '/');\n  } else {\n    lastRootIndex = findLastIndex(paths, path => path[0] === '/');\n  }\n\n  let baseRoute = paths.slice(lastRootIndex, routeIndex);\n\n  if (typeof stepBack !== 'undefined') {\n    baseRoute = baseRoute.slice(0, stepBack);\n  }\n\n  const search = location?.search ?? '';\n  const hash = location?.hash ?? '';\n\n  const fullRoute = `${baseRoute.join('')}${\n    typeof to !== 'string' ? '' : to\n  }${search}${hash}`;\n\n  return replaceRouterParams(fullRoute, params);\n}\n","import React from 'react';\nimport createReactClass from 'create-react-class';\nimport Reflux from 'reflux';\n\nimport TeamStore from 'app/stores/teamStore';\nimport {Team} from 'app/types';\nimport getDisplayName from 'app/utils/getDisplayName';\n\ntype InjectedTeamsProps = {\n  teams: Team[];\n};\n\ntype State = {\n  teams: Team[];\n};\n\n/**\n * Higher order component that uses TeamStore and provides a list of teams\n */\nconst withTeams = <P extends InjectedTeamsProps>(\n  WrappedComponent: React.ComponentType<P>\n) =>\n  createReactClass<Omit<P, keyof InjectedTeamsProps>, State>({\n    displayName: `withTeams(${getDisplayName(WrappedComponent)})`,\n    mixins: [Reflux.listenTo(TeamStore, 'onTeamUpdate') as any],\n\n    getInitialState() {\n      return {\n        teams: TeamStore.getAll(),\n      };\n    },\n\n    onTeamUpdate() {\n      this.setState({\n        teams: TeamStore.getAll(),\n      });\n    },\n    render() {\n      return (\n        <WrappedComponent {...(this.props as P)} teams={this.state.teams as Team[]} />\n      );\n    },\n  });\n\nexport default withTeams;\n","import Reflux from 'reflux';\n\nexport default Reflux.createActions(['mapTitle', 'trimMappings']);\n","import {PlainRoute} from 'react-router';\nimport Reflux from 'reflux';\n\nimport SettingsBreadcrumbActions from 'app/actions/settingsBreadcrumbActions';\nimport getRouteStringFromRoutes from 'app/utils/getRouteStringFromRoutes';\n\ntype UpdateData = {\n  routes: PlainRoute<any>[];\n  title: string;\n};\n\ntype SettingsBreadcrumbStoreInterface = {\n  init: () => void;\n  reset: () => void;\n  onUpdateRouteMap: (update: UpdateData) => void;\n  onTrimMappings: (routes: PlainRoute<any>[]) => void;\n};\n\ntype Internals = {\n  pathMap: Record<string, string>;\n};\n\nconst storeConfig: Reflux.StoreDefinition &\n  SettingsBreadcrumbStoreInterface &\n  Internals = {\n  pathMap: {},\n  init() {\n    this.reset();\n    this.listenTo(SettingsBreadcrumbActions.mapTitle, this.onUpdateRouteMap);\n    this.listenTo(SettingsBreadcrumbActions.trimMappings, this.onTrimMappings);\n  },\n\n  reset() {\n    this.pathMap = {};\n  },\n\n  onUpdateRouteMap({routes, title}) {\n    this.pathMap[getRouteStringFromRoutes(routes)] = title;\n    this.trigger(this.pathMap);\n  },\n\n  onTrimMappings(routes) {\n    const routePath = getRouteStringFromRoutes(routes);\n    for (const fullPath in this.pathMap) {\n      if (!routePath.startsWith(fullPath)) {\n        delete this.pathMap[fullPath];\n      }\n    }\n    this.trigger(this.pathMap);\n  },\n};\n\ntype SettingsBreadcrumbStore = Reflux.Store & SettingsBreadcrumbStoreInterface;\n\nconst SettingsBreadcrumbStore = Reflux.createStore(\n  storeConfig\n) as SettingsBreadcrumbStore;\n\nexport default SettingsBreadcrumbStore;\n","import styled from '@emotion/styled';\n\nimport space from 'app/styles/space';\n\nconst Crumb = styled('div')`\n  display: flex;\n  align-items: center;\n  position: relative;\n  font-size: 18px;\n  color: ${p => p.theme.subText};\n  padding-right: ${space(1)};\n  cursor: pointer;\n  white-space: nowrap;\n\n  &:hover {\n    color: ${p => p.theme.textColor};\n  }\n`;\n\nexport default Crumb;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport {IconChevron} from 'app/icons';\n\ntype Props = {\n  isHover?: boolean;\n  isLast?: boolean;\n};\n\nconst Divider = ({isHover, isLast}: Props) =>\n  isLast ? null : (\n    <StyledDivider>\n      <StyledIconChevron direction={isHover ? 'down' : 'right'} size=\"14px\" />\n    </StyledDivider>\n  );\n\nconst StyledIconChevron = styled(IconChevron)`\n  display: block;\n`;\n\nconst StyledDivider = styled('span')`\n  display: inline-block;\n  margin-left: 6px;\n  color: ${p => p.theme.gray200};\n  position: relative;\n`;\n\nexport default Divider;\n","import React from 'react';\n\nimport DropdownAutoCompleteMenu from 'app/components/dropdownAutoComplete/menu';\nimport {Item} from 'app/components/dropdownAutoComplete/types';\nimport Crumb from 'app/views/settings/components/settingsBreadcrumb/crumb';\nimport Divider from 'app/views/settings/components/settingsBreadcrumb/divider';\n\nimport {RouteWithName} from './types';\n\nconst EXIT_DELAY = 0;\n\ntype Props = {\n  route: RouteWithName;\n  hasMenu?: boolean;\n  isLast?: boolean;\n  enterDelay?: number;\n  name: React.ReactNode;\n  items: Item[];\n  onSelect: (item: Item) => void;\n};\n\ntype State = {\n  isOpen: boolean;\n};\n\nclass BreadcrumbDropdown extends React.Component<Props, State> {\n  state: State = {\n    isOpen: false,\n  };\n\n  entering: number | null = null;\n  leaving: number | null = null;\n\n  open = () => {\n    this.setState({isOpen: true});\n  };\n\n  close = () => {\n    this.setState({isOpen: false});\n  };\n\n  handleStateChange = () => {};\n\n  // Adds a delay when mouse hovers on actor (in this case the breadcrumb)\n  handleMouseEnterActor = () => {\n    if (this.leaving) {\n      clearTimeout(this.leaving);\n    }\n\n    this.entering = window.setTimeout(() => this.open(), this.props.enterDelay ?? 0);\n  };\n\n  // handles mouseEnter event on actor and menu, should clear the leaving timeout and keep menu open\n  handleMouseEnter = () => {\n    if (this.leaving) {\n      clearTimeout(this.leaving);\n    }\n\n    this.open();\n  };\n\n  // handles mouseLeave event on actor and menu, adds a timeout before updating state to account for\n  // mouseLeave into\n  handleMouseLeave = () => {\n    if (this.entering) {\n      clearTimeout(this.entering);\n    }\n\n    this.leaving = window.setTimeout(() => this.close(), EXIT_DELAY);\n  };\n\n  // Close immediately when actor is clicked clicked\n  handleClickActor = () => {\n    this.close();\n  };\n\n  // Close immediately when clicked outside\n  handleClose = () => {\n    this.close();\n  };\n\n  render() {\n    const {hasMenu, route, isLast, name, items, onSelect} = this.props;\n    return (\n      <DropdownAutoCompleteMenu\n        blendCorner={false}\n        onOpen={this.handleMouseEnter}\n        onClose={this.close}\n        isOpen={this.state.isOpen}\n        menuProps={{\n          onMouseEnter: this.handleMouseEnter,\n          onMouseLeave: this.handleMouseLeave,\n        }}\n        items={items}\n        onSelect={onSelect}\n        virtualizedHeight={41}\n      >\n        {({getActorProps, actions, isOpen}) => (\n          <Crumb\n            {...getActorProps({\n              onClick: this.handleClickActor.bind(this, actions),\n              onMouseEnter: this.handleMouseEnterActor.bind(this, actions),\n              onMouseLeave: this.handleMouseLeave.bind(this, actions),\n            })}\n          >\n            <span>{name || route.name} </span>\n            <Divider isHover={hasMenu && isOpen} isLast={isLast} />\n          </Crumb>\n        )}\n      </DropdownAutoCompleteMenu>\n    );\n  }\n}\n\nexport default BreadcrumbDropdown;\n","import {RouteWithName} from './types';\n\n/**\n * For all routes with a `path`, find the first route without a route param (e.g. :apiKey)\n *\n * @param routes A list of react-router route objects\n * @param route If given, will only take into account routes between `route` and end of the routes list\n * @return Object Returns a react-router route object\n */\nexport default function findFirstRouteWithoutRouteParam(\n  routes: RouteWithName[],\n  route?: RouteWithName\n) {\n  const routeIndex = route !== undefined ? routes.indexOf(route) : -1;\n  const routesToSearch = route && routeIndex > -1 ? routes.slice(routeIndex) : routes;\n\n  return (\n    routesToSearch.filter(({path}) => !!path).find(({path}) => !path?.includes(':')) ||\n    route\n  );\n}\n","import styled from '@emotion/styled';\n\nimport overflowEllipsis from 'app/styles/overflowEllipsis';\n\nconst MenuItem = styled('div')`\n  font-size: 14px;\n  ${overflowEllipsis};\n`;\n\nexport default MenuItem;\n","import React from 'react';\nimport {browserHistory, RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport IdBadge from 'app/components/idBadge';\nimport {Organization} from 'app/types';\nimport recreateRoute from 'app/utils/recreateRoute';\nimport withLatestContext from 'app/utils/withLatestContext';\nimport BreadcrumbDropdown from 'app/views/settings/components/settingsBreadcrumb/breadcrumbDropdown';\nimport findFirstRouteWithoutRouteParam from 'app/views/settings/components/settingsBreadcrumb/findFirstRouteWithoutRouteParam';\nimport MenuItem from 'app/views/settings/components/settingsBreadcrumb/menuItem';\n\nimport {RouteWithName} from './types';\nimport {CrumbLink} from '.';\n\ntype Props = RouteComponentProps<{projectId?: string}, {}> & {\n  organizations: Organization[];\n  organization: Organization;\n  routes: RouteWithName[];\n  route: RouteWithName;\n};\n\nconst OrganizationCrumb = ({\n  organization,\n  organizations,\n  params,\n  routes,\n  route,\n  ...props\n}: Props) => {\n  const handleSelect = (item: {value: string}) => {\n    // If we are currently in a project context, and we're attempting to switch organizations,\n    // then we need to default to index route (e.g. `route`)\n    //\n    // Otherwise, find the last route without a router param\n    // e.g. if you are on API details, we want the API listing\n    // This fails if our route tree is not nested\n    const hasProjectParam = !!params.projectId;\n    let destination = hasProjectParam\n      ? route\n      : findFirstRouteWithoutRouteParam(routes.slice(routes.indexOf(route)));\n\n    // It's possible there is no route without route params (e.g. organization settings index),\n    // in which case, we can use the org settings index route (e.g. `route`)\n    if (!hasProjectParam && typeof destination === 'undefined') {\n      destination = route;\n    }\n\n    if (destination === undefined) {\n      return;\n    }\n\n    browserHistory.push(\n      recreateRoute(destination, {\n        routes,\n        params: {...params, orgId: item.value},\n      })\n    );\n  };\n\n  if (!organization) {\n    return null;\n  }\n\n  const hasMenu = organizations.length > 1;\n\n  return (\n    <BreadcrumbDropdown\n      name={\n        <CrumbLink\n          to={recreateRoute(route, {\n            routes,\n            params: {...params, orgId: organization.slug},\n          })}\n        >\n          <BadgeWrapper>\n            <IdBadge avatarSize={18} organization={organization} />\n          </BadgeWrapper>\n        </CrumbLink>\n      }\n      onSelect={handleSelect}\n      hasMenu={hasMenu}\n      route={route}\n      items={organizations.map((org, index) => ({\n        index,\n        value: org.slug,\n        label: (\n          <MenuItem>\n            <IdBadge organization={org} />\n          </MenuItem>\n        ),\n      }))}\n      {...props}\n    />\n  );\n};\n\nconst BadgeWrapper = styled('div')`\n  display: flex;\n  align-items: center;\n`;\n\nexport {OrganizationCrumb};\nexport default withLatestContext(OrganizationCrumb);\n","import React from 'react';\nimport {browserHistory, RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport IdBadge from 'app/components/idBadge';\nimport LoadingIndicator from 'app/components/loadingIndicator';\nimport space from 'app/styles/space';\nimport {Organization, Project} from 'app/types';\nimport recreateRoute from 'app/utils/recreateRoute';\nimport replaceRouterParams from 'app/utils/replaceRouterParams';\nimport withLatestContext from 'app/utils/withLatestContext';\nimport withProjects from 'app/utils/withProjects';\nimport BreadcrumbDropdown from 'app/views/settings/components/settingsBreadcrumb/breadcrumbDropdown';\nimport findFirstRouteWithoutRouteParam from 'app/views/settings/components/settingsBreadcrumb/findFirstRouteWithoutRouteParam';\nimport MenuItem from 'app/views/settings/components/settingsBreadcrumb/menuItem';\n\nimport {RouteWithName} from './types';\nimport {CrumbLink} from '.';\n\ntype Props = RouteComponentProps<{projectId?: string}, {}> & {\n  organization: Organization;\n  project: Project;\n  projects: Project[];\n  routes: RouteWithName[];\n  route: RouteWithName;\n};\n\nconst ProjectCrumb = ({\n  organization: latestOrganization,\n  project: latestProject,\n  projects,\n  params,\n  routes,\n  route,\n  ...props\n}: Props) => {\n  const handleSelect = (item: {value: string}) => {\n    // We have to make exceptions for routes like \"Project Alerts Rule Edit\" or \"Client Key Details\"\n    // Since these models are project specific, we need to traverse up a route when switching projects\n    //\n    // we manipulate `routes` so that it doesn't include the current project's route\n    // which, unlike the org version, does not start with a route param\n    const returnTo = findFirstRouteWithoutRouteParam(\n      routes.slice(routes.indexOf(route) + 1),\n      route\n    );\n\n    if (returnTo === undefined) {\n      return;\n    }\n\n    browserHistory.push(\n      recreateRoute(returnTo, {routes, params: {...params, projectId: item.value}})\n    );\n  };\n\n  if (!latestOrganization) {\n    return null;\n  }\n  if (!projects) {\n    return null;\n  }\n\n  const hasMenu = projects && projects.length > 1;\n\n  return (\n    <BreadcrumbDropdown\n      hasMenu={hasMenu}\n      route={route}\n      name={\n        <ProjectName>\n          {!latestProject ? (\n            <LoadingIndicator mini />\n          ) : (\n            <CrumbLink\n              to={replaceRouterParams('/settings/:orgId/projects/:projectId/', {\n                orgId: latestOrganization.slug,\n                projectId: latestProject.slug,\n              })}\n            >\n              <IdBadge project={latestProject} avatarSize={18} />\n            </CrumbLink>\n          )}\n        </ProjectName>\n      }\n      onSelect={handleSelect}\n      items={projects.map((project, index) => ({\n        index,\n        value: project.slug,\n        label: (\n          <MenuItem>\n            <IdBadge\n              project={project}\n              avatarProps={{consistentWidth: true}}\n              avatarSize={18}\n            />\n          </MenuItem>\n        ),\n      }))}\n      {...props}\n    />\n  );\n};\n\nexport {ProjectCrumb};\nexport default withProjects(withLatestContext(ProjectCrumb));\n\n// Set height of crumb because of spinner\nconst SPINNER_SIZE = '24px';\n\nconst ProjectName = styled('div')`\n  display: flex;\n\n  .loading {\n    width: ${SPINNER_SIZE};\n    height: ${SPINNER_SIZE};\n    margin: 0 ${space(0.25)} 0 0;\n  }\n`;\n","import React from 'react';\nimport {browserHistory, RouteComponentProps} from 'react-router';\n\nimport IdBadge from 'app/components/idBadge';\nimport {Team} from 'app/types';\nimport recreateRoute from 'app/utils/recreateRoute';\nimport withTeams from 'app/utils/withTeams';\nimport BreadcrumbDropdown from 'app/views/settings/components/settingsBreadcrumb/breadcrumbDropdown';\nimport MenuItem from 'app/views/settings/components/settingsBreadcrumb/menuItem';\n\nimport {RouteWithName} from './types';\nimport {CrumbLink} from '.';\n\ntype Props = RouteComponentProps<{teamId: string}, {}> & {\n  teams: Team[];\n  routes: RouteWithName[];\n  route?: RouteWithName;\n};\n\nconst TeamCrumb = ({teams, params, routes, route, ...props}: Props) => {\n  const team = teams.find(({slug}) => slug === params.teamId);\n  const hasMenu = teams.length > 1;\n\n  if (!team) {\n    return null;\n  }\n\n  return (\n    <BreadcrumbDropdown\n      name={\n        <CrumbLink\n          to={recreateRoute(route, {\n            routes,\n            params: {...params, teamId: team.slug},\n          })}\n        >\n          <IdBadge avatarSize={18} team={team} />\n        </CrumbLink>\n      }\n      onSelect={item => {\n        browserHistory.push(\n          recreateRoute('', {\n            routes,\n            params: {...params, teamId: item.value},\n          })\n        );\n      }}\n      hasMenu={hasMenu}\n      route={route}\n      items={teams.map((teamItem, index) => ({\n        index,\n        value: teamItem.slug,\n        label: (\n          <MenuItem>\n            <IdBadge team={teamItem} />\n          </MenuItem>\n        ),\n      }))}\n      {...props}\n    />\n  );\n};\n\nexport {TeamCrumb};\nexport default withTeams(TeamCrumb);\n","import React from 'react';\nimport styled from '@emotion/styled';\nimport createReactClass from 'create-react-class';\nimport Reflux from 'reflux';\n\nimport SettingsBreadcrumbActions from 'app/actions/settingsBreadcrumbActions';\nimport Link from 'app/components/links/link';\nimport SentryTypes from 'app/sentryTypes';\nimport SettingsBreadcrumbStore from 'app/stores/settingsBreadcrumbStore';\nimport getRouteStringFromRoutes from 'app/utils/getRouteStringFromRoutes';\nimport recreateRoute from 'app/utils/recreateRoute';\nimport Crumb from 'app/views/settings/components/settingsBreadcrumb/crumb';\nimport Divider from 'app/views/settings/components/settingsBreadcrumb/divider';\nimport OrganizationCrumb from 'app/views/settings/components/settingsBreadcrumb/organizationCrumb';\nimport ProjectCrumb from 'app/views/settings/components/settingsBreadcrumb/projectCrumb';\nimport TeamCrumb from 'app/views/settings/components/settingsBreadcrumb/teamCrumb';\n\nimport {RouteWithName} from './types';\n\nconst MENUS = {\n  Organization: OrganizationCrumb,\n  Project: ProjectCrumb,\n  Team: TeamCrumb,\n} as const;\n\ntype Props = {\n  className?: string;\n  routes: RouteWithName[];\n  pathMap: Record<string, string>;\n  params: {[param: string]: string | undefined};\n  route: any;\n};\n\nclass SettingsBreadcrumb extends React.Component<Props> {\n  static contextTypes = {\n    organization: SentryTypes.Organization,\n  };\n\n  static defaultProps = {\n    pathMap: {},\n  };\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.routes === prevProps.routes) {\n      return;\n    }\n    SettingsBreadcrumbActions.trimMappings(this.props.routes);\n  }\n\n  render() {\n    const {className, routes, params, pathMap} = this.props;\n    const lastRouteIndex = routes.map(r => !!r.name).lastIndexOf(true);\n\n    return (\n      <Breadcrumbs className={className}>\n        {routes.map((route, i) => {\n          if (!route.name) {\n            return null;\n          }\n          const pathTitle = pathMap[getRouteStringFromRoutes(routes.slice(0, i + 1))];\n          const isLast = i === lastRouteIndex;\n          const createMenu = MENUS[route.name];\n          const Menu = typeof createMenu === 'function' && createMenu;\n          const hasMenu = !!Menu;\n          const CrumbPicker = hasMenu\n            ? Menu\n            : () => (\n                <Crumb>\n                  <CrumbLink to={recreateRoute(route, {routes, params})}>\n                    {pathTitle || route.name}{' '}\n                  </CrumbLink>\n                  <Divider isLast={isLast} />\n                </Crumb>\n              );\n\n          return (\n            <CrumbPicker\n              key={`${route.name}:${route.path}`}\n              routes={routes}\n              params={params}\n              route={route}\n              isLast={isLast}\n            />\n          );\n        })}\n      </Breadcrumbs>\n    );\n  }\n}\n\nexport default createReactClass<Omit<Props, 'pathMap'>>({\n  displayName: 'ConnectedSettingsBreadcrumb',\n  mixins: [Reflux.connect(SettingsBreadcrumbStore, 'pathMap') as any],\n  render() {\n    return <SettingsBreadcrumb {...this.props} {...this.state} />;\n  },\n});\n\nconst CrumbLink = styled(Link)`\n  display: block;\n\n  &.focus-visible {\n    outline: none;\n    box-shadow: ${p => p.theme.blue300} 0 2px 0;\n  }\n\n  color: ${p => p.theme.subText};\n  &:hover {\n    color: ${p => p.theme.textColor};\n  }\n`;\n\nexport {CrumbLink};\n\nconst Breadcrumbs = styled('div')`\n  display: flex;\n  align-items: center;\n`;\n","import React from 'react';\nimport {browserHistory, RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport Button from 'app/components/button';\nimport {IconClose, IconMenu} from 'app/icons';\nimport {t} from 'app/locale';\nimport {fadeIn, slideInLeft} from 'app/styles/animations';\nimport space from 'app/styles/space';\n\nimport SettingsBreadcrumb from './settingsBreadcrumb';\nimport SettingsHeader from './settingsHeader';\nimport SettingsSearch from './settingsSearch';\n\ntype Props = {\n  renderNavigation?: () => React.ReactNode;\n  children: React.ReactNode;\n} & RouteComponentProps<{}, {}>;\n\ntype State = {\n  /**\n   * This is used when the screen is small enough that the navigation should\n   * be hidden. On large screens this state will end up unused.\n   */\n  navVisible: boolean;\n  /**\n   * Offset mobile settings navigation by the height of main navigation,\n   * settings breadcrumbs and optional warnings.\n   */\n  navOffsetTop: number;\n};\n\nclass SettingsLayout extends React.Component<Props, State> {\n  state: State = {\n    navVisible: false,\n    navOffsetTop: 0,\n  };\n\n  componentDidMount() {\n    // Close the navigation when navigating.\n    this.unlisten = browserHistory.listen(() => this.toggleNav(false));\n  }\n\n  componentWillUnmount() {\n    this.unlisten();\n  }\n\n  unlisten!: () => void;\n  headerRef = React.createRef<HTMLDivElement>();\n\n  toggleNav(navVisible: boolean) {\n    // when the navigation is opened, body should be scroll-locked\n    this.toggleBodyScrollLock(navVisible);\n\n    this.setState({\n      navOffsetTop: this.headerRef.current?.getBoundingClientRect().bottom ?? 0,\n      navVisible,\n    });\n  }\n\n  toggleBodyScrollLock(lock: boolean) {\n    const bodyElement = document.getElementsByTagName('body')[0];\n\n    if (window.scrollTo) {\n      window.scrollTo(0, 0);\n    }\n    bodyElement.classList[lock ? 'add' : 'remove']('scroll-lock');\n  }\n\n  render() {\n    const {params, routes, route, renderNavigation, children} = this.props;\n    const {navVisible, navOffsetTop} = this.state;\n\n    // We want child's view's props\n    const childProps =\n      children && React.isValidElement(children) ? children.props : this.props;\n    const childRoutes = childProps.routes || routes || [];\n    const childRoute = childProps.route || route || {};\n    const shouldRenderNavigation = typeof renderNavigation === 'function';\n\n    return (\n      <SettingsColumn>\n        <SettingsHeader ref={this.headerRef}>\n          <HeaderContent>\n            {shouldRenderNavigation && (\n              <NavMenuToggle\n                priority=\"link\"\n                label={t('Open the menu')}\n                icon={navVisible ? <IconClose aria-hidden /> : <IconMenu aria-hidden />}\n                onClick={() => this.toggleNav(!navVisible)}\n              />\n            )}\n            <StyledSettingsBreadcrumb\n              params={params}\n              routes={childRoutes}\n              route={childRoute}\n            />\n            <SettingsSearch />\n          </HeaderContent>\n        </SettingsHeader>\n\n        <MaxWidthContainer>\n          {shouldRenderNavigation && (\n            <SidebarWrapper isVisible={navVisible} offsetTop={navOffsetTop}>\n              {renderNavigation!()}\n            </SidebarWrapper>\n          )}\n          <NavMask isVisible={navVisible} onClick={() => this.toggleNav(false)} />\n          <Content>{children}</Content>\n        </MaxWidthContainer>\n      </SettingsColumn>\n    );\n  }\n}\n\nconst SettingsColumn = styled('div')`\n  display: flex;\n  flex-direction: column;\n  flex: 1; /* so this stretches vertically so that footer is fixed at bottom */\n  min-width: 0; /* fixes problem when child content stretches beyond layout width */\n  footer {\n    margin-top: 0;\n  }\n`;\n\nconst HeaderContent = styled('div')`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst NavMenuToggle = styled(Button)`\n  display: none;\n  margin: -${space(1)} ${space(1)} -${space(1)} -${space(1)};\n  padding: ${space(1)};\n  color: ${p => p.theme.subText};\n  &:hover,\n  &:focus,\n  &:active {\n    color: ${p => p.theme.textColor};\n  }\n  @media (max-width: ${p => p.theme.breakpoints[0]}) {\n    display: block;\n  }\n`;\n\nconst StyledSettingsBreadcrumb = styled(SettingsBreadcrumb)`\n  flex: 1;\n`;\n\nconst MaxWidthContainer = styled('div')`\n  display: flex;\n  max-width: ${p => p.theme.settings.containerWidth};\n  flex: 1;\n`;\n\nconst SidebarWrapper = styled('div')<{isVisible: boolean; offsetTop: number}>`\n  flex-shrink: 0;\n  width: ${p => p.theme.settings.sidebarWidth};\n  background: ${p => p.theme.background};\n  border-right: 1px solid ${p => p.theme.border};\n\n  @media (max-width: ${p => p.theme.breakpoints[0]}) {\n    display: ${p => (p.isVisible ? 'block' : 'none')};\n    position: fixed;\n    top: ${p => p.offsetTop}px;\n    bottom: 0;\n    overflow-y: auto;\n    animation: ${slideInLeft} 100ms ease-in-out;\n    z-index: ${p => p.theme.zIndex.settingsSidebarNav};\n    box-shadow: ${p => p.theme.dropShadowHeavy};\n  }\n`;\n\nconst NavMask = styled('div')<{isVisible: boolean}>`\n  display: none;\n  @media (max-width: ${p => p.theme.breakpoints[0]}) {\n    display: ${p => (p.isVisible ? 'block' : 'none')};\n    background: rgba(0, 0, 0, 0.35);\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    z-index: ${p => p.theme.zIndex.settingsSidebarNavMask};\n    animation: ${fadeIn} 250ms ease-in-out;\n  }\n`;\n\n/**\n * Note: `overflow: hidden` will cause some buttons in `SettingsPageHeader` to be cut off because it has negative margin.\n * Will also cut off tooltips.\n */\nconst Content = styled('div')`\n  flex: 1;\n  padding: ${space(4)};\n  min-width: 0; /* keep children from stretching container */\n`;\n\nexport default SettingsLayout;\n"],"sourceRoot":""}