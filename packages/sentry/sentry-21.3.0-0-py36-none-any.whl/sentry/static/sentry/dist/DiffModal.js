(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[77],{1885:function(t,e,n){"use strict";n.r(e),n.d(e,"modalCss",(function(){return K}));var r=n(5),a=n.n(r),o=n(14),i=n.n(o),c=n(1),u=n.n(c),s=n(0),f=n(30),l=n.n(f),d=n(20),p=n.n(d),v=n(29),b=n.n(v),g=n(9),y=n.n(g),h=n(10),m=n.n(h),j=n(11),D=n.n(j),O=n(12),x=n.n(O),w=n(7),k=n.n(w),I=n(3),E=n(86),S=n(33),A=n(27),C=n(76),N=n(44),P=n(2),M=n(6),R=n(2268),z=n(47);function q(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B(t){var e=[Object(P.b)("Type: %s",t.type)];t.hash&&e.push(Object(P.b)("Hash: %s",t.hash)),t.description&&e.push(Object(P.b)("Description: %s",t.description));var n=[e.join("\n")];return t.component&&n.push(function t(e){if(!e.contributes)return[];var n=e.name,r=e.id,a=e.hint,o=n||r,i=o&&a?"".concat(o," (").concat(a,")"):o,c=i?[i]:[];if(e.values){var u,s=q(e.values);try{for(s.s();!(u=s.n()).done;){var f=u.value;if("string"!=typeof f){var l,d=q(t(f));try{for(d.s();!(l=d.n()).done;){var p=l.value;c.push("  ".concat(p))}}catch(t){d.e(t)}finally{d.f()}}else c.push("  ".concat(f))}}catch(t){s.e(t)}finally{s.f()}}return c}(t.component).join("\n")),n}var H=function(t){return Object.values(t).map(B).flat()};function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=k()(t);if(e){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return x()(this,n)}}var T=function(t){D()(r,t);var e=J(r);function r(){var t;y()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={loading:!0,groupingDiff:!1,baseEvent:[],targetEvent:[],SplitDiffAsync:void 0},t.toggleDiffMode=function(){t.setState((function(t){return{groupingDiff:!t.groupingDiff,loading:!0}}),t.fetchData)},t.fetchEventData=function(){var e=b()(p.a.mark((function e(n,r){var a,o,i,c,u,s,f,l,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.props,o=a.orgId,i=a.project,c=a.api,u=t.state.groupingDiff,s=r,"latest"!==r){e.next=8;break}return e.next=6,c.requestPromise("/issues/".concat(n,"/events/latest/"));case 6:f=e.sent,s=f.eventID;case 8:if(!u){e.next=13;break}return e.next=11,c.requestPromise("/projects/".concat(o,"/").concat(i.slug,"/events/").concat(s,"/grouping-info/"));case 11:return l=e.sent,e.abrupt("return",H(l));case 13:return e.next=15,c.requestPromise("/projects/".concat(o,"/").concat(i.slug,"/events/").concat(s,"/"));case 15:return d=e.sent,e.abrupt("return",Object(R.a)(d));case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}return m()(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var t=this,e=this.props,r=e.baseIssueId,a=e.targetIssueId,o=e.baseEventId,i=e.targetEventId;Promise.all([n.e(221).then(n.bind(null,2861)),this.fetchEventData(r,null!=o?o:"latest"),this.fetchEventData(a,null!=i?i:"latest")]).then((function(e){var n=l()(e,3),r=n[0].default,a=n[1],o=n[2];t.setState({SplitDiffAsync:r,baseEvent:a,targetEvent:o,loading:!1})})).catch((function(){Object(S.a)(Object(P.b)("Error loading events"))}))}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.project,r=this.state,a=r.SplitDiffAsync,o=r.loading,i=r.groupingDiff,c=r.baseEvent,u=r.targetEvent,f=n.features.includes("similarity-view-v2");return Object(s.f)(U,{className:e,loading:o},o&&Object(s.f)(N.default,null),!o&&f&&Object(s.f)($,null,Object(s.f)(C.a,{merged:!0,active:i?"grouping":"event"},Object(s.f)(A.b,{barId:"event",size:"small",onClick:this.toggleDiffMode},Object(P.b)("Diff stack trace and message")),Object(s.f)(A.b,{barId:"grouping",size:"small",onClick:this.toggleDiffMode},Object(P.b)("Diff grouping information")))),!o&&a&&c.map((function(t,e){var n;return Object(s.f)(a,{key:e,base:t,target:null!==(n=u[e])&&void 0!==n?n:"",type:"words"})})))}}]),r}(u.a.Component);T.displayName="IssueDiff",T.defaultProps={baseEventId:"latest",targetEventId:"latest"};var F=Object(z.a)(T),U=Object(I.a)("div",{shouldForwardProp:function(t){return Object(E.default)(t)&&"loading"!==t},target:"e13n3zub0",label:"StyledIssueDiff"})("background-color:",(function(t){return t.theme.backgroundSecondary}),";overflow:auto;padding:",Object(M.a)(1),";flex:1;display:flex;flex-direction:column;",(function(t){return t.loading&&"\n        background-color: ".concat(t.theme.background,";\n        justify-content: center;\n      ")}),";"),$=Object(I.a)("div",{target:"e13n3zub1",label:"HeaderWrapper"})("display:flex;align-items:center;margin-bottom:",Object(M.a)(2),";"),G=function(t){var e=t.className,n=t.Body,r=i()(t,["className","Body"]);return Object(s.f)(n,null,Object(s.f)(F,a()({className:e},r)))};G.displayName="DiffModal";var K={name:"1vh8okv-modalCss",styles:".modal-dialog{display:flex;margin:0;left:10px;right:10px;top:10px;bottom:10px;width:auto;}.modal-content{display:flex;flex:1;}.modal-body{display:flex;overflow:hidden;flex:1;};label:modalCss;"};e.default=G},2268:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(517);function a(t){if(!t||!t.entries)return[];var e=t.entries.find((function(t){return"exception"===t.type}));if(!e){var n,a=t.entries.find((function(t){return"message"===t.type}));return a?(null==a||null===(n=a.data)||void 0===n?void 0:n.formatted)&&[a.data.formatted]:[]}return e.data?e.data.values.filter((function(t){return!!t.stacktrace})).map((function(e){return Object(r.a)(e.stacktrace,t.platform,e)})).reduce((function(t,e){return t.concat(e)}),[]):[]}}}]);
//# sourceMappingURL=DiffModal.js.map