(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[61],{2007:function(t,e,n){"use strict";var r=n(3),a=(n(1),n(96)),i=n(6),o=n(0);function s(t){var e=t.className,n=t.image,r=t.children;return Object(o.f)(a.a,{className:e},Object(o.f)(c,null,Object(o.f)(u,null,n),Object(o.f)(l,null,r)))}s.displayName="OnboardingPanel";var c=Object(r.a)("div",{target:"eipqko00",label:"Container"})("padding:",Object(i.a)(3),";position:relative;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width:",(function(t){return t.theme.breakpoints[1]}),"){min-height:350px;}"),l=Object(r.a)("div",{target:"eipqko01",label:"StyledBox"})("z-index:1;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){flex:2;}"),u=Object(r.a)(l,{target:"eipqko02",label:"IlloBox"})("position:relative;min-height:100px;max-width:300px;margin:",Object(i.a)(2)," auto;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){flex:1;margin:",Object(i.a)(3),";max-width:auto;}");e.a=s},2675:function(t,e,n){t.exports=n.p+"alerts-empty-state.9078ef.svg"},2938:function(t,e,n){"use strict";n.r(e);var r=n(20),a=n.n(r),i=n(29),o=n.n(i),s=n(8),c=n.n(s),l=n(9),u=n.n(l),d=n(10),b=n.n(d),f=n(11),p=n.n(f),h=n(12),j=n.n(h),m=n(7),O=n.n(m),g=n(3),v=n(1),y=n.n(v),w=n(575),k=n.n(w),x=n(114),z=n.n(x),S=n(578),R=n(154),L=n(70),q=n(693),A=n(27),P=n(76),I=n(2064),N=n(298),D=n(43),V=n(44),B=n(702),E=n(694),_=n(96),C=n(1912),T=n(15),W=n(2),F=n(6),M=n(35),X=n(225),G=n(54),J=n(440),U=n(2379),H=n(2675),K=n.n(H),Y=n(2007),Q=n(0);function Z(t){var e=t.actions;return Object(Q.f)(Y.a,{image:Object(Q.f)($,{src:K.a})},Object(Q.f)("h3",null,Object(W.b)("More signal, less noise")),Object(Q.f)("p",null,Object(W.b)("Not every error is worth an email. Set your own rules for alerts you need, with information that helps.")),Object(Q.f)(tt,{gap:1},e))}Z.displayName="Onboarding";var $=Object(g.a)("img",{target:"e1ljbtxe0",label:"AlertsImage"})("@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){user-select:none;position:absolute;top:0;bottom:0;width:220px;margin-top:auto;margin-bottom:auto;transform:translateX(-50%);left:50%;}@media (min-width:",(function(t){return t.theme.breakpoints[2]}),"){transform:translateX(-60%);width:280px;}@media (min-width:",(function(t){return t.theme.breakpoints[3]}),"){transform:translateX(-75%);width:320px;}"),tt=Object(g.a)(P.a,{target:"e1ljbtxe1",label:"ButtonList"})({name:"1tuvsuv",styles:"grid-template-columns:repeat(auto-fit,minmax(130px,max-content));"}),et=Z,nt=n(2443),rt=n(2380);function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(Object(n),!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O()(t);if(e){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j()(this,n)}}var st="https://docs.sentry.io/workflow/alerts-notifications/alerts/?_ga=2.21848383.580096147.1592364314-1444595810.1582160976";function ct(t){return["open","closed"].includes(t)?t:"open"}var lt=function(t){p()(r,t);var e,n=ot(r);function r(){return u()(this,r),n.apply(this,arguments)}return b()(r,[{key:"getEndpoints",value:function(){var t=this.props,e=t.params,n=t.location.query,r=ct(n.status);return[["incidentList","/organizations/".concat(e&&e.orgId,"/incidents/"),{query:it(it({},n),{},{status:r})}]]}},{key:"onLoadAllEndpointsSuccess",value:(e=o()(a.a.mark((function t(){var e,n,r,i,o,s,c,l,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this.state.incidentList)&&0===e.length){t.next=4;break}return this.setState({hasAlertRule:!0,firstVisitShown:!1}),t.abrupt("return");case 4:return this.setState({loading:!0}),n=this.props,r=n.params,i=n.location,o=n.organization,t.next=8,this.api.requestPromise("/organizations/".concat(null==r?void 0:r.orgId,"/alert-rules/"),{method:"GET",query:i.query});case 8:if(s=t.sent,!(c=s.length>0)){t.next=13;break}return this.setState({hasAlertRule:c,firstVisitShown:!1,loading:!1}),t.abrupt("return");case 13:return t.next=15,Object(S.a)(this.api,{organizationId:o.id,feature:"alert_stream"});case 15:l=t.sent,(u=!(null!=l&&l.dismissedTime))&&Object(S.b)(this.api,{feature:"alert_stream",organizationId:o.id,status:"dismissed"}),this.setState({hasAlertRule:c,firstVisitShown:u,loading:!1});case 19:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tryRenderOnboarding",value:function(){var t=this.state.firstVisitShown,e=this.props.organization;if(!t)return null;var n=Object(Q.f)(y.a.Fragment,null,Object(Q.f)(A.b,{size:"small",external:!0,href:st},Object(W.b)("View Features")),Object(Q.f)(I.b,{organization:e,iconProps:{size:"xs"},size:"small",priority:"primary",referrer:"alert_stream"},Object(W.b)("Create Alert Rule")));return Object(Q.f)(et,{actions:n})}},{key:"tryRenderEmpty",value:function(){var t=this.state,e=t.hasAlertRule,n=t.incidentList,r=ct(this.props.location.query.status);return!n||n.length>0?null:Object(Q.f)(J.a,{size:"medium",icon:Object(Q.f)(T.i,{isCircled:!0,size:"48"}),title:e?"open"===r?Object(W.b)("No unresolved metric alerts in the selected projects."):Object(W.b)("No resolved metric alerts in the selected projects."):Object(W.b)("No metric alert rules exist for the selected projects."),description:Object(W.c)("Learn more about [link:Metric Alerts]",{link:Object(Q.f)(D.a,{href:st})})})}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderList",value:function(){var t,e,n=this.state,r=n.loading,a=n.incidentList,i=n.incidentListPageLinks,o=n.hasAlertRule,s=this.props,c=s.params.orgId,l=s.organization,u=new Set(k()(null==a?void 0:a.map((function(t){return t.projects})))),d=!(!a||0!==a.length||void 0!==o),b=r||d,f=ct(this.props.location.query.status);return Object(Q.f)(y.a.Fragment,null,null!==(t=this.tryRenderOnboarding())&&void 0!==t?t:Object(Q.f)(_.a,null,!r&&Object(Q.f)(ft,null,Object(Q.f)(rt.a,{status:f},Object(Q.f)(bt,{status:f},Object(Q.f)("div",null,Object(W.b)("Alert")),"open"===f&&Object(Q.f)("div",null,Object(W.b)("Graph"))),Object(Q.f)("div",null,Object(W.b)("Project")),Object(Q.f)("div",null,Object(W.b)("Triggered")),"closed"===f&&Object(Q.f)("div",null,Object(W.b)("Duration")),"closed"===f&&Object(Q.f)("div",null,Object(W.b)("Resolved")))),b?Object(Q.f)(V.default,null):null!==(e=this.tryRenderEmpty())&&void 0!==e?e:Object(Q.f)(_.c,null,Object(Q.f)(X.a,{orgId:c,slugs:Array.from(u)},(function(t){var e=t.initiallyLoaded,n=t.projects;return a.map((function(t){return Object(Q.f)(nt.a,{key:t.id,projectsLoaded:e,projects:n,incident:t,orgId:c,filteredStatus:f,organization:l})}))})))),Object(Q.f)(E.a,{pageLinks:i}))}},{key:"renderBody",value:function(){var t=this.props,e=t.params,n=t.location,r=t.organization,a=t.router,i=n.pathname,o=n.query,s=e.orgId,c=z()(it(it({},o),{},{status:"open"}),"cursor"),l=z()(it(it({},o),{},{status:"closed"}),"cursor"),u=ct(o.status);return Object(Q.f)(C.a,{title:Object(W.b)("Alerts"),orgSlug:s},Object(Q.f)(B.a,{organization:r,showDateSelector:!1},Object(Q.f)(U.a,{organization:r,router:a,activeTab:"stream"}),Object(Q.f)(N.a,null,Object(Q.f)(N.f,{fullWidth:!0},!this.tryRenderOnboarding()&&Object(Q.f)(dt,{merged:!0,active:u},Object(Q.f)(A.b,{to:{pathname:i,query:c},barId:"open",size:"small"},Object(W.b)("Unresolved")),Object(Q.f)(A.b,{to:{pathname:i,query:l},barId:"closed",size:"small"},Object(W.b)("Resolved"))),this.renderList()))))}}]),r}(q.a),ut=function(t){p()(n,t);var e=ot(n);function n(){return u()(this,n),e.apply(this,arguments)}return b()(n,[{key:"componentDidMount",value:function(){this.trackView()}},{key:"componentDidUpdate",value:function(t){var e,n;(null===(e=t.location.query)||void 0===e?void 0:e.status)!==(null===(n=this.props.location.query)||void 0===n?void 0:n.status)&&this.trackView()}},{key:"trackView",value:function(){var t=this.props,e=t.location,n=t.organization,r=ct(e.query.status);Object(M.e)({eventKey:"alert_stream.viewed",eventName:"Alert Stream: Viewed",organization_id:n.id,status:r})}},{key:"renderNoAccess",value:function(){return Object(Q.f)(N.a,null,Object(Q.f)(N.f,{fullWidth:!0},Object(Q.f)(L.b,{type:"warning"},Object(W.b)("You don't have access to this feature"))))}},{key:"render",value:function(){var t=this.props.organization;return Object(Q.f)(R.a,{features:["organizations:incidents"],organization:t,hookName:"feature-disabled:alerts-page",renderDisabled:this.renderNoAccess},Object(Q.f)(lt,this.props))}}]),n}(y.a.Component);ut.displayName="IncidentsListContainer";var dt=Object(g.a)(P.a,{target:"ebw9n8a0",label:"StyledButtonBar"})("width:100px;margin-bottom:",Object(F.a)(1),";"),bt=Object(g.a)(rt.b,{target:"ebw9n8a1",label:"PaddedTitleAndSparkLine"})("padding-left:",Object(F.a)(2),";"),ft=Object(g.a)(_.e,{target:"ebw9n8a2",label:"StyledPanelHeader"})("padding:",Object(F.a)(1.5)," ",Object(F.a)(2)," ",Object(F.a)(1.5)," 0;");e.default=Object(G.a)(ut)}}]);
//# sourceMappingURL=AlertsList.js.map