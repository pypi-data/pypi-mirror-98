(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[125],{1898:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(9),a=n.n(r),i=n(10),o=n.n(i),s=n(11),c=n.n(s),u=n(12),l=n.n(u),p=n(7),f=n.n(p),d=(n(1),n(264)),b=n.n(d),m=n(693),v=n(0);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l()(this,n)}}var y=function(e){c()(n,e);var t=O(n);function n(){return a()(this,n),t.apply(this,arguments)}return o()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(v.f)(b.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),n}(m.a);y.displayName="AsyncView"},2049:function(e,t,n){"use strict";var r=n(5),a=n.n(r),i=(n(1),n(39)),o=n.n(i),s=n(25),c=n.n(s),u=n(227),l=n(97),p=n(0);t.a=function(e){return o()({displayName:"withTeams(".concat(Object(l.a)(e),")"),mixins:[c.a.listenTo(u.a,"onTeamUpdate")],getInitialState:function(){return{teams:u.a.getAll()}},onTeamUpdate:function(){this.setState({teams:u.a.getAll()})},render:function(){return Object(p.f)(e,a()({},this.props,{teams:this.state.teams}))}})}},2240:function(e,t,n){"use strict";var r=n(8),a=n.n(r),i=n(5),o=n.n(i),s=n(14),c=n.n(s),u=n(3),l=(n(1),n(64)),p=n(120),f=n(6),d=n(38),b=n(0);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){var t=e.roles,n=e.disableUnallowed,r=c()(e,["roles","disableUnallowed"]);return Object(b.f)(p.a,o()({options:null==t?void 0:t.map((function(e){return{value:e.id,label:e.name,disabled:n&&!e.allowed,description:e.desc}})),components:{Option:function(e){var t=e.label,n=e.data,r=c()(e,["label","data"]);return Object(b.f)(l.z.Option,o()({label:t},r),Object(b.f)(y,null,Object(b.f)("h1",null,t),Object(b.f)("div",null,n.description)))}},styles:{control:function(e){return v(v({},e),{},{borderBottomLeftRadius:d.c.borderRadius,borderBottomRightRadius:d.c.borderRadius})},menu:function(e){return v(v({},e),{},{borderRadius:d.c.borderRadius,marginTop:Object(f.a)(.5),width:"350px",overflow:"hidden"})}}},r))}O.displayName="RoleSelectControl";var y=Object(u.a)("div",{target:"enwdr730",label:"RoleItem"})("display:grid;grid-template-columns:80px 1fr;grid-gap:",Object(f.a)(1),";h1,div{font-size:",(function(e){return e.theme.fontSizeSmall}),";line-height:1.4;margin:",Object(f.a)(.25)," 0;}");t.a=O},2902:function(e,t,n){"use strict";n.r(t);var r=n(20),a=n.n(r),i=n(8),o=n.n(i),s=n(29),c=n.n(s),u=n(9),l=n.n(u),p=n(10),f=n.n(p),d=n(187),b=n.n(d),m=n(11),v=n.n(m),O=n(12),y=n.n(O),j=n(7),h=n.n(j),g=n(1),R=n.n(g),q=n(33),w=n(96),P=n(32),S=n(2),x=n(35),A=n(54),D=n(2049),k=n(1898),z=n(440),I=n(3),N=n(27),B=n(137),T=n(120),E=n(305),M=n(2240),U=n(330),C=n(31),_=n(6),L=n(0),F=Object(E.a)({hookName:"member-invite-modal:customization",defaultComponent:function(e){var t=e.onSendInvites;return(0,e.children)({sendInvites:t,canSend:!0})}}),J=function(e){var t=e.inviteRequest,n=e.inviteRequestBusy,r=e.organization,a=e.onApprove,i=e.onDeny,o=e.onUpdate,s=e.allTeams,c=e.allRoles,u=c.find((function(e){return e.id===t.role})),l=!(u&&u.allowed);return Object(L.f)(F,{willInvite:!0,organization:r,onSendInvites:function(){return a(t)}},(function(e){var r=e.sendInvites,a=e.canSend,u=e.headerInfo;return Object(L.f)(W,null,Object(L.f)("div",null,Object(L.f)("h5",{style:{marginBottom:Object(_.a)(.5)}},Object(L.f)(V,null,t.email)),"requested_to_be_invited"===t.inviteStatus?t.inviterName&&Object(L.f)(G,null,Object(L.f)(C.a,{title:Object(S.b)("An existing member has asked to invite this user to your organization")},Object(S.c)("Requested by [inviterName]",{inviterName:t.inviterName}))):Object(L.f)(K,{tooltipText:Object(S.b)("This user has asked to join your organization.")},Object(S.b)("Join request"))),Object(L.f)(Y,{name:"role",disableUnallowed:!0,onChange:function(e){return o({role:e.value})},value:t.role,roles:c}),Object(L.f)(H,{name:"teams",placeholder:Object(S.b)("Add to teamsâ€¦"),onChange:function(e){return o({teams:e.map((function(e){return e.value}))})},value:t.teams,options:s.map((function(e){var t=e.slug;return{value:t,label:"#".concat(t)}})),multiple:!0,clearable:!0}),Object(L.f)(Q,null,Object(L.f)(B.a,{onConfirm:r,disableConfirmButton:!a,disabled:l,message:Object(L.f)(R.a.Fragment,null,Object(S.c)("Are you sure you want to invite [email] to your organization?",{email:t.email}),u)},Object(L.f)(N.b,{priority:"primary",size:"small",busy:n[t.id],title:l?Object(S.b)("You do not have permission to approve a user of this role.\n                     Select a different role to approve this user."):void 0},Object(S.b)("Approve"))),Object(L.f)(N.b,{size:"small",busy:n[t.id],onClick:function(){return i(t)}},Object(S.b)("Deny"))))}))};J.displayName="InviteRequestRow";var K=Object(I.a)(U.b,{target:"e15jhn050",label:"JoinRequestIndicator"})({name:"1lejymi",styles:"text-transform:uppercase;"}),W=Object(I.a)(w.f,{target:"e15jhn051",label:"StyledPanelItem"})("display:grid;grid-template-columns:minmax(150px,auto) minmax(100px,140px) 220px max-content;grid-gap:",Object(_.a)(2),";align-items:center;"),V=Object(I.a)("div",{target:"e15jhn052",label:"UserName"})("font-size:",(function(e){return e.theme.fontSizeLarge}),";overflow:hidden;text-overflow:ellipsis;"),G=Object(I.a)("div",{target:"e15jhn053",label:"Description"})("display:block;color:",(function(e){return e.theme.subText}),";font-size:14px;overflow:hidden;text-overflow:ellipsis;"),Y=Object(I.a)(M.a,{target:"e15jhn054",label:"StyledRoleSelectControl"})({name:"1gn5ro3",styles:"max-width:140px;"}),H=Object(I.a)(T.a,{target:"e15jhn055",label:"TeamSelectControl"})({name:"1qnipy5",styles:"max-width:220px;.Select-value-label{max-width:150px;word-break:break-all;}"}),Q=Object(I.a)("div",{target:"e15jhn056",label:"ButtonGroup"})("display:inline-grid;grid-template-columns:repeat(2,max-content);grid-gap:",Object(_.a)(1),";"),X=J,Z=n(47);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y()(this,n)}}var ne=function(e){v()(r,e);var t,n=te(r);function r(){var e;l()(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).state={accessRequestBusy:{}},e.handleApprove=function(t,n){n.stopPropagation(),e.handleAction({id:t,isApproved:!0,successMessage:Object(S.b)("Team request approved"),errorMessage:Object(S.b)("Error approving team request")})},e.handleDeny=function(t,n){n.stopPropagation(),e.handleAction({id:t,isApproved:!1,successMessage:Object(S.b)("Team request denied"),errorMessage:Object(S.b)("Error denying team request")})},e}return f()(r,[{key:"handleAction",value:(t=c()(a.a.mark((function e(t){var n,r,i,s,c,u,l,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.isApproved,i=t.successMessage,s=t.errorMessage,c=this.props,u=c.api,l=c.orgId,p=c.onRemoveAccessRequest,this.setState((function(e){return{accessRequestBusy:ee(ee({},e.accessRequestBusy),{},o()({},n,!0))}})),e.prev=3,e.next=6,u.requestPromise("/organizations/".concat(l,"/access-requests/").concat(n,"/"),{method:"PUT",data:{isApproved:r}});case 6:p(n),Object(q.c)(i),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Object(q.a)(s);case 13:this.setState((function(e){return{accessRequestBusy:ee(ee({},e.accessRequestBusy),{},o()({},n,!1))}}));case 14:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props.requestList,n=this.state.accessRequestBusy;return t&&t.length?Object(L.f)(w.a,null,Object(L.f)(w.e,null,Object(S.b)("Pending Team Requests")),Object(L.f)(w.c,null,t.map((function(t){var r=t.id,a=t.member,i=t.team,o=t.requester,s=a.user&&(a.user.name||a.user.email||a.user.username),c=o&&(o.name||o.email||o.username);return Object(L.f)(re,{key:r},Object(L.f)("div",{"data-test-id":"request-message"},c?Object(S.c)("[requesterName] requests to add [name] to the [team] team.",{requesterName:c,name:Object(L.f)("strong",null,s),team:Object(L.f)("strong",null,"#",i.slug)}):Object(S.c)("[name] requests access to the [team] team.",{name:Object(L.f)("strong",null,s),team:Object(L.f)("strong",null,"#",i.slug)})),Object(L.f)("div",null,Object(L.f)(ae,{priority:"primary",size:"small",onClick:function(t){return e.handleApprove(r,t)},busy:n[r]},Object(S.b)("Approve")),Object(L.f)(N.b,{busy:n[r],onClick:function(t){return e.handleDeny(r,t)},size:"small"},Object(S.b)("Deny"))))})))):null}}]),r}(R.a.Component);ne.displayName="OrganizationAccessRequests";var re=Object(I.a)(w.f,{target:"e1kgr13n0",label:"StyledPanelItem"})("display:grid;grid-template-columns:auto max-content;grid-gap:",Object(_.a)(2),";align-items:center;"),ae=Object(I.a)(N.b,{target:"e1kgr13n1",label:"StyledButton"})("margin-right:",Object(_.a)(1),";"),ie=Object(Z.a)(ne);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y()(this,n)}}var ue=function(e){v()(n,e);var t=ce(n);function n(){var e;l()(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).handleAction=function(){var t=c()(a.a.mark((function t(n){var r,i,s,c,u,l,p,f,d,b,m;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.inviteRequest,i=n.method,s=n.data,c=n.successMessage,u=n.errorMessage,l=n.eventKey,p=n.eventName,f=e.props,d=f.params,b=f.organization,m=f.onRemoveInviteRequest,e.setState((function(e){return{inviteRequestBusy:se(se({},e.inviteRequestBusy),{},o()({},r.id,!0))}})),t.prev=3,t.next=6,e.api.requestPromise("/organizations/".concat(d.orgId,"/invite-requests/").concat(r.id,"/"),{method:i,data:s});case 6:m(r.id),Object(q.c)(c),Object(x.e)({eventKey:l,eventName:p,organization_id:b.id,member_id:parseInt(r.id,10),invite_status:r.inviteStatus}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),Object(q.a)(u);case 14:e.setState((function(e){return{inviteRequestBusy:se(se({},e.inviteRequestBusy),{},o()({},r.id,!1))}}));case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}(),e.handleApprove=function(t){e.handleAction({inviteRequest:t,method:"PUT",data:{role:t.role,teams:t.teams,approve:1},successMessage:Object(S.c)("[email] has been invited",{email:t.email}),errorMessage:Object(S.c)("Error inviting [email]",{email:t.email}),eventKey:"invite_request.approved",eventName:"Invite Request Approved"})},e.handleDeny=function(t){e.handleAction({inviteRequest:t,method:"DELETE",data:{},successMessage:Object(S.c)("Invite request for [email] denied",{email:t.email}),errorMessage:Object(S.c)("Error denying invite request for [email]",{email:t.email}),eventKey:"invite_request.denied",eventName:"Invite Request Denied"})},e}return f()(n,[{key:"getDefaultState",value:function(){return se(se({},b()(h()(n.prototype),"getDefaultState",this).call(this)),{},{inviteRequestBusy:{}})}},{key:"UNSAFE_componentWillMount",value:function(){b()(h()(n.prototype),"UNSAFE_componentWillMount",this).call(this),this.handleRedirect()}},{key:"componentDidUpdate",value:function(){this.handleRedirect()}},{key:"getEndpoints",value:function(){var e=this.props.organization.slug;return[["member","/organizations/".concat(e,"/members/me/")]]}},{key:"handleRedirect",value:function(){var e=this.props,t=e.router,n=e.params,r=e.requestList;return e.showInviteRequests||r.length?null:t.push("/settings/".concat(n.orgId,"/members/"))}},{key:"render",value:function(){var e=this,t=this.props,n=t.params,r=t.requestList,a=t.showInviteRequests,i=t.inviteRequests,o=t.onRemoveAccessRequest,s=t.onUpdateInviteRequest,c=t.organization,u=t.teams,l=this.state,p=l.inviteRequestBusy,f=l.member;return Object(L.f)(R.a.Fragment,null,a&&Object(L.f)(w.a,null,Object(L.f)(w.e,null,Object(S.b)("Pending Invite Requests")),Object(L.f)(w.c,null,i.map((function(t){return Object(L.f)(X,{key:t.id,organization:c,inviteRequest:t,inviteRequestBusy:p,allTeams:u,allRoles:f?f.roles:P.y,onApprove:e.handleApprove,onDeny:e.handleDeny,onUpdate:function(e){return s(t.id,e)}})})),0===i.length&&Object(L.f)(z.a,null,Object(S.b)("No requests found.")))),Object(L.f)(ie,{orgId:n.orgId,requestList:r,onRemoveAccessRequest:o}))}}]),n}(k.a);ue.displayName="OrganizationRequestsView",ue.defaultProps={inviteRequests:[]};t.default=Object(D.a)(Object(A.a)(ue))}}]);
//# sourceMappingURL=OrganizationRequestsView.js.map