(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[175],{1898:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(9),r=n.n(a),o=n(10),c=n.n(o),i=n(11),s=n.n(i),l=n(12),u=n.n(l),f=n(7),d=n.n(f),p=(n(1),n(264)),m=n.n(p),b=n(693),h=n(0);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var v=function(e){s()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return c()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(h.f)(m.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),n}(b.a);v.displayName="AsyncView"},1899:function(e,t,n){"use strict";var a=n(14),r=n.n(a),o=n(9),c=n.n(o),i=n(10),s=n.n(i),l=n(11),u=n.n(l),f=n(12),d=n.n(f),p=n(7),m=n.n(p),b=n(3),h=n(1),g=n.n(h),v=n(222),j=n(6),y=n(0);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d()(this,n)}}var T=function(e){u()(n,e);var t=O(n);function n(){return c()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.subtitle,o=e.action,c=e.tabs,i=e.noTitleStyles,s=e.body,l=r()(e,["icon","title","subtitle","action","tabs","noTitleStyles","body"]),u=!a;return Object(y.f)("div",l,Object(y.f)(R,{isNarrow:u},Object(y.f)(w,null,t&&Object(y.f)(C,null,t),n&&Object(y.f)(S,{tabs:c,styled:i},Object(y.f)(v.a,null,n),a&&Object(y.f)(x,null,a))),o&&Object(y.f)(A,{isNarrow:u},o)),s&&Object(y.f)(z,null,s),c&&Object(y.f)(D,null,c))}}]),n}(g.a.Component);T.displayName="UnstyledSettingsPageHeader",T.defaultProps={noTitleStyles:!1};var R=Object(b.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})("display:flex;align-items:",(function(e){return e.isNarrow?"center":"flex-start"}),";"),w=Object(b.a)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),S=Object(b.a)("div",{target:"e1uay4fd2",label:"Title"})((function(e){return!e.styled&&"font-size: 20px; font-weight: 600;"}),";margin:",Object(j.a)(4)," ",Object(j.a)(2)," ",Object(j.a)(3)," 0;"),x=Object(b.a)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",Object(j.a)(1.5)," 0 0;"),C=Object(b.a)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",Object(j.a)(1),";"),A=Object(b.a)("div",{target:"e1uay4fd5",label:"Action"})("margin-top:",(function(e){return e.isNarrow?"0":Object(j.a)(4)}),";"),k=Object(b.a)(T,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",Object(j.a)(4),";"),z=Object(b.a)("div",{target:"e1uay4fd7",label:"BodyWrapper"})("flex:1;margin:0 0 ",Object(j.a)(3),";"),D=Object(b.a)("div",{target:"e1uay4fd8",label:"TabsWrapper"})({name:"8k0ai7",styles:"flex:1;margin:0;"});t.a=k},1911:function(e,t,n){"use strict";t.a=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3?arguments[3]:void 0,r="".concat(e," - ").concat(t),o=a?"".concat(r," - ").concat(a):r;return n?"".concat(o," - Sentry"):o}},2224:function(e,t,n){"use strict";var a=n(20),r=n.n(a),o=n(29),c=n.n(o),i=n(9),s=n.n(i),l=n(10),u=n.n(l),f=n(11),d=n.n(f),p=n(12),m=n.n(p),b=n(7),h=n.n(b),g=n(3),v=n(1),j=n.n(v),y=n(133),O=n.n(y),T=n(27),R=n(137),w=n(229),S=n(265),x=n(62),C=n(96),A=n(32),k=n(15),z=n(2),D=n(6),I=n(47),P=n(440),N=n(0);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var L=function(e){d()(n,e);var t=M(n);function n(){var e;s()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!0,teams:null},e.fetchTeams=O()(function(){var t=c()(r.a.mark((function t(n){var a,o,c,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,o=a.api,c=a.organization,t.next=3,o.requestPromise("/organizations/".concat(c.slug,"/teams/"),{query:{query:n,per_page:A.G}});case 3:i=t.sent,e.setState({teams:i,loading:!1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A.g),e.handleQueryUpdate=function(t){e.setState({loading:!0}),e.fetchTeams(t.target.value)},e.handleAddTeam=function(t){var n,a=null===(n=e.state.teams)||void 0===n?void 0:n.find((function(e){return e.slug===t.value}));a&&e.props.onAddTeam(a)},e.handleRemove=function(t){e.props.onRemoveTeam(t)},e}return u()(n,[{key:"componentDidMount",value:function(){this.fetchTeams()}},{key:"renderTeamAddDropDown",value:function(){var e=this.props,t=e.disabled,n=e.selectedTeams,a=e.menuHeader,r=this.state.teams,o=t,c=[];return c=null===r||0===r.length?[]:r.filter((function(e){return!n.includes(e.slug)})).map((function(e,t){return{index:t,value:e.slug,searchKey:e.slug,label:Object(N.f)(B,null,"#",e.slug)}})),Object(N.f)(w.a,{items:c,busyItemsStillVisible:this.state.loading,onChange:this.handleQueryUpdate,onSelect:this.handleAddTeam,emptyMessage:Object(z.b)("No teams"),menuHeader:a,disabled:o,alignMenu:"right"},(function(e){var t=e.isOpen;return Object(N.f)(S.a,{"aria-label":Object(z.b)("Add Team"),isOpen:t,size:"xsmall",disabled:o},Object(z.b)("Add Team"))}))}},{key:"renderBody",value:function(){var e=this,t=this.props,n=t.organization,a=t.selectedTeams,r=t.disabled,o=t.confirmLastTeamRemoveMessage;if(0===a.length)return Object(N.f)(P.a,null,Object(z.b)("No Teams assigned"));var c=1===a.length&&o?o:null;return a.map((function(t){return Object(N.f)(q,{key:t,orgId:n.slug,team:t,onRemove:e.handleRemove,disabled:r,confirmMessage:c})}))}},{key:"render",value:function(){return Object(N.f)(C.a,null,Object(N.f)(C.e,{hasButtons:!0},Object(z.b)("Team"),this.renderTeamAddDropDown()),Object(N.f)(C.c,null,this.renderBody()))}}]),n}(j.a.Component);L.displayName="TeamSelect";var q=function(e){var t=e.orgId,n=e.team,a=e.onRemove,r=e.disabled,o=e.confirmMessage;return Object(N.f)(H,null,Object(N.f)(W,{to:"/settings/".concat(t,"/teams/").concat(n,"/")},"#".concat(n)),Object(N.f)(R.a,{message:o,bypass:!o,onConfirm:function(){return a(n)},disabled:r},Object(N.f)(T.b,{size:"xsmall",icon:Object(N.f)(k.xb,{isCircled:!0,size:"xs"}),disabled:r},Object(z.b)("Remove"))))};q.displayName="TeamRow";var B=Object(g.a)("div",{target:"e1rhi4ev0",label:"TeamDropdownElement"})("padding:",Object(D.a)(.5)," 0px;text-transform:none;"),H=Object(g.a)(C.f,{target:"e1rhi4ev1",label:"TeamPanelItem"})("padding:",Object(D.a)(2),";align-items:center;"),W=Object(g.a)(x.a,{target:"e1rhi4ev2",label:"StyledLink"})("flex:1;margin-right:",Object(D.a)(1),";");t.a=Object(I.a)(L)},2791:function(e,t,n){"use strict";n.r(t);var a=n(24),r=n.n(a),o=n(9),c=n.n(o),i=n(10),s=n.n(i),l=n(11),u=n.n(l),f=n(12),d=n.n(f),p=n(7),m=n.n(p),b=n(3),h=(n(1),n(0)),g=n(33),v=n(65),j=n(450),y=n(62),O=n(31),T=n(2),R=n(6),w=n(1911),S=n(1898),x=n(1899),C=n(2224);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d()(this,n)}}var k=function(e){u()(n,e);var t=A(n);function n(){var e;c()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).canCreateTeam=function(){var t=e.props.organization,n=new Set(t.access);return n.has("org:write")&&n.has("team:write")&&n.has("project:write")},e.handleRemove=function(t){if(!e.state.loading){var n=e.props.params,a=n.orgId,r=n.projectId;Object(j.j)(e.api,a,r,t).then((function(){return e.handleRemovedTeam(t)})).catch((function(){Object(g.a)(Object(T.b)("Could not remove the %s team",t)),e.setState({loading:!1})}))}},e.handleRemovedTeam=function(t){e.setState((function(e){return{projectTeams:r()((e.projectTeams||[]).filter((function(e){return e.slug!==t})))}}))},e.handleAddedTeam=function(t){e.setState((function(e){return{projectTeams:[].concat(r()(e.projectTeams),[t])}}))},e.handleAdd=function(t){if(!e.state.loading){var n=e.props.params,a=n.orgId,r=n.projectId;Object(j.a)(e.api,a,r,t).then((function(){e.handleAddedTeam(t)}),(function(){e.setState({error:!0,loading:!1})}))}},e.handleCreateTeam=function(t){var n=e.props,a=n.project,r=n.organization;e.canCreateTeam()&&(t.stopPropagation(),t.preventDefault(),Object(v.openCreateTeamModal)({project:a,organization:r,onClose:function(t){Object(j.a)(e.api,r.slug,a.slug,t).then(e.remountComponent,e.remountComponent)}}))},e}return s()(n,[{key:"getEndpoints",value:function(){var e=this.props.params,t=e.orgId,n=e.projectId;return[["projectTeams","/projects/".concat(t,"/").concat(n,"/teams/")]]}},{key:"getTitle",value:function(){var e=this.props.params.projectId;return Object(w.a)(Object(T.b)("Project Teams"),e,!1)}},{key:"renderBody",value:function(){var e,t=this.props,n=t.params,a=t.organization,r=this.canCreateTeam(),o=a.access.includes("project:write"),c=Object(T.b)("This is the last team with access to this project. Removing it will mean only organization owners and managers will be able to access the project pages. Are you sure you want to remove this team from the project %s?",n.projectId),i=this.state.projectTeams,s=null!==(e=null==i?void 0:i.map((function(e){return e.slug})))&&void 0!==e?e:[],l=Object(h.f)(z,null,Object(T.b)("Teams"),Object(h.f)(O.a,{disabled:r,title:Object(T.b)("You must be a project admin to create teams"),position:"top"},Object(h.f)(D,{to:"",disabled:!r,onClick:this.handleCreateTeam},Object(T.b)("Create Team"))));return Object(h.f)("div",null,Object(h.f)(x.a,{title:Object(T.b)("%s Teams",n.projectId)}),Object(h.f)(C.a,{organization:a,selectedTeams:s,onAddTeam:this.handleAdd,onRemoveTeam:this.handleRemove,menuHeader:l,confirmLastTeamRemoveMessage:c,disabled:!o}))}}]),n}(S.a),z=Object(b.a)("div",{target:"e1902wmv0",label:"StyledTeamsLabel"})("font-size:0.875em;padding:",Object(R.a)(.5)," 0px;text-transform:uppercase;"),D=Object(b.a)(y.a,{target:"e1902wmv1",label:"StyledCreateTeamLink"})("float:right;text-transform:none;",(function(e){return e.disabled&&Object(h.e)("cursor:not-allowed;color:",e.theme.gray300,";opacity:0.6;;label:StyledCreateTeamLink;")}),";");t.default=k}}]);
//# sourceMappingURL=ProjectTeams.js.map