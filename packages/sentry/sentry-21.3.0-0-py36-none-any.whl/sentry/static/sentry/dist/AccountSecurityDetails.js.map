{"version":3,"sources":["webpack:///./app/views/asyncView.tsx","webpack:///./app/views/settings/components/settingsPageHeader.tsx","webpack:///./app/views/settings/account/accountSecurity/components/confirmHeader.tsx","webpack:///./app/views/settings/account/accountSecurity/components/removeConfirm.tsx","webpack:///./app/views/settings/account/accountSecurity/components/recoveryCodes.tsx","webpack:///./app/views/settings/account/accountSecurity/components/u2fEnrolledDetails.tsx","webpack:///./app/views/settings/account/accountSecurity/accountSecurityDetails.tsx"],"names":["AsyncView","title","this","getTitle","renderComponent","AsyncComponent","UnstyledSettingsPageHeader","props","icon","subtitle","action","tabs","noTitleStyles","body","isNarrow","TitleAndActions","TitleWrapper","Icon","Title","styled","Subtitle","Action","BodyWrapper","TabsWrapper","React","Component","defaultProps","p","space","theme","gray400","fontSizeLarge","SettingsPageHeader","ConfirmHeader","message","Fragment","t","RemoveConfirm","RecoveryCodes","className","isEnrolled","codes","onRegenerateBackupCodes","formattedCodes","join","CodeContainer","hasButtons","Actions","hideUnsupported","value","size","label","onClick","iframe","window","frames","document","write","print","close","download","href","onConfirm","priority","type","length","map","code","Code","key","name","css","Panel","PanelItem","text","familyMono","U2fEnrolledDetails","devices","id","onRemoveU2fDevice","hasDevices","isLastDevice","device","DevicePanelItem","DeviceInformation","Name","FadedDateTime","date","timestamp","disabled","AddAnotherPanelItem","to","DateTime","fontSizeRelativeSmall","ENDPOINT","AuthenticatorDate","DateLabel","AccountSecurityDetails","handleRemove","a","authenticator","state","authId","deviceId","key_handle","deviceName","setState","loading","api","requestPromise","method","router","push","addSuccessMessage","addErrorMessage","params","deleteDisabled","AuthenticatorStatus","enabled","removeButton","description","AuthenticatorDates","createdAt","lastUsedAt","phone","PhoneWrapper","Phone","CircleIndicator"],"mappings":"0qBAQqBA,E,uIAKjB,MAAO,K,+BAIP,IAAMC,EAAQC,KAAKC,WACnB,OACE,YAAC,IAAD,CAAeF,MAAK,UAAKA,EAAQ,GAAH,OAAMA,EAAN,OAAmB,GAA7B,WACjBC,KAAKE,uB,GATJC,KAHWL,E,6nBCkBfM,E,qIAKK,MAUHJ,KAAKK,MARPC,EAFK,EAELA,KACAP,EAHK,EAGLA,MACAQ,EAJK,EAILA,SACAC,EALK,EAKLA,OACAC,EANK,EAMLA,KACAC,EAPK,EAOLA,cACAC,EARK,EAQLA,KACGN,EATE,0EAeDO,GAAYL,EAElB,OACE,kBAASF,EACP,YAACQ,EAAD,CAAiBD,SAAUA,GACzB,YAACE,EAAD,KACGR,GAAQ,YAACS,EAAD,KAAOT,GACfP,GACC,YAACiB,EAAD,CAAOP,KAAMA,EAAMQ,OAAQP,GACzB,YAAC,IAAD,KAAcX,GACbQ,GAAY,YAACW,EAAD,KAAWX,KAI7BC,GAAU,YAACW,EAAD,CAAQP,SAAUA,GAAWJ,IAGzCG,GAAQ,YAACS,EAAD,KAAcT,GACtBF,GAAQ,YAACY,EAAD,KAAcZ,Q,GAtCUa,IAAMC,WAAzCnB,E,yCAAAA,EACGoB,aAAe,CACpBd,eAAe,GA+CnB,IAAMG,EAAkB,YAAO,MAAP,8CAAH,6BAEJ,SAAAY,GAAC,OAAKA,EAAEb,SAAW,SAAW,eAF1B,KAIfE,EAAe,YAAO,MAAP,2CAAH,mCAIZE,EAAQ,YAAO,MAAP,qCACV,SAAAS,GAAC,OAAKA,EAAER,QAAH,uCADE,WAECS,YAAM,GAFP,IAEaA,YAAM,GAFnB,IAEyBA,YAAM,GAF/B,OAILR,EAAW,YAAO,MAAP,uCAAH,UACH,SAAAO,GAAC,OAAIA,EAAEE,MAAMC,UADV,+BAGC,SAAAH,GAAC,OAAIA,EAAEE,MAAME,gBAHd,YAIDH,YAAM,KAJL,SAORX,EAAO,YAAO,MAAP,mCAAH,gBACQW,YAAM,GADd,KAIJP,EAAS,YAAO,MAAP,qCAAH,eACI,SAAAM,GAAC,OAAKA,EAAEb,SAAW,IAAMc,YAAM,KADnC,KAINI,EAAqB,YAAO1B,EAAP,iDAAH,8BAIPsB,YAAM,GAJC,KAOlBN,EAAc,YAAO,MAAP,0CAAH,qBAEDM,YAAM,GAFL,KAIXL,EAAc,YAAO,MAAP,0CAAH,2CAKFS,O,6CCpHTC,EAAgB,YAAO,MAAP,4CAAH,+DAKJA,O,gHCETC,EACJ,YAAC,IAAMC,SAAP,KACE,YAAC,IAAD,KAAgBC,YAAE,uCAClB,YAAC,IAAD,KACGA,YACC,gGAMFC,EAAgB,SAAC9B,GAAD,OAAkB,YAAC,IAAD,OAAaA,EAAb,CAAoB2B,QAASA,MAA/DG,E,4BAESA,O,0XCGTC,EAAgB,SAAC,GAKV,IAJXC,EAIW,EAJXA,UACAC,EAGW,EAHXA,WACAC,EAEW,EAFXA,MACAC,EACW,EADXA,wBAUA,IAAKF,IAAeC,EAClB,OAAO,KAGT,IAAME,EAAiBF,EAAMG,KAAK,OAElC,OACE,YAACC,EAAD,CAAeN,UAAWA,GACxB,YAAC,IAAD,CAAaO,YAAU,GACpBV,YAAE,gBAEH,YAACW,EAAD,KACE,YAAC,IAAD,CAAWC,iBAAe,EAACC,MAAON,GAChC,YAAC,IAAD,CAAQO,KAAK,QAAQC,MAAOf,YAAE,SAC5B,YAAC,IAAD,QAGJ,YAAC,IAAD,CAAQc,KAAK,QAAQE,QAzBV,WAEjB,IAAMC,EAASC,OAAOC,OAAP,UACfF,EAAOG,SAASC,MAAMhB,EAAMG,KAAK,SACjCS,EAAOK,QACPL,EAAOG,SAASG,SAoBgCR,MAAOf,YAAE,UACjD,YAAC,KAAD,OAEF,YAAC,IAAD,CACEc,KAAK,QACLU,SAAS,4BACTC,KAAI,wCAAmClB,GACvCQ,MAAOf,YAAE,aAET,YAAC,IAAD,OAEF,YAAC,IAAD,CACE0B,UAAWpB,EACXR,QAASE,YACP,4FAGF,YAAC,IAAD,CAAQ2B,SAAS,SAASb,KAAK,SAC5Bd,YAAE,wBAKX,YAAC,IAAD,KACE,YAAC,IAAD,CAAY4B,KAAK,WACd5B,YACC,oFAGJ,yBAAQK,EAAMwB,QAAUxB,EAAMyB,KAAI,SAAAC,GAAI,OAAI,YAACC,EAAD,CAAMC,IAAKF,GAAOA,QAC1D1B,EAAMwB,QACN,YAAC,IAAD,KAAe7B,YAAE,4CAGrB,sBAAQkC,KAAK,YAAYC,IAAG,MAjE5BjC,E,4BAsESA,QAETO,EAAgB,YAAO2B,IAAP,2CAAH,cACH5C,YAAM,GADH,KAIbmB,EAAU,YAAO,MAAP,qCAAH,+CAGCnB,YAAM,GAHP,KAMPwC,EAAO,YAAOK,IAAP,kCAAH,gBACO,SAAA9C,GAAC,OAAIA,EAAEE,MAAM6C,KAAKC,aADzB,YAEG/C,YAAM,GAFT,K,6BChFV,SAASgD,EAAT,GAMU,IALRrC,EAKQ,EALRA,UACAC,EAIQ,EAJRA,WACAqC,EAGQ,EAHRA,QACAC,EAEQ,EAFRA,GACAC,EACQ,EADRA,kBAEA,GAAW,QAAPD,IAAiBtC,EACnB,OAAO,KAGT,IAAMwC,EAAaH,aAAH,EAAGA,EAASZ,OAEtBgB,EAA8B,IAAfD,EAErB,OACE,YAAC,IAAD,CAAOzC,UAAWA,GAChB,YAAC,IAAD,KAAcH,YAAE,gBAEhB,YAAC,IAAD,MACI4C,GACA,YAAC,IAAD,KAAe5C,YAAE,uCAElB4C,IACCH,aADS,EACTA,EAASX,KAAI,SAAAgB,GAAM,OACjB,YAACC,EAAD,CAAiBd,IAAKa,EAAOZ,MAC3B,YAACc,EAAD,KACE,YAACC,EAAD,KAAOH,EAAOZ,MACd,YAACgB,EAAD,CAAeC,KAAML,EAAOM,aAG9B,YAAC,EAAD,KACE,YAAC,IAAD,CACE1B,UAAW,kBAAMiB,EAAkBG,IACnCO,SAAUR,EACV/C,QACE,YAAC,IAAMC,SAAP,KACE,YAAC,IAAD,KACGC,YAAE,sCAEL,YAAC,IAAD,KACGA,YAAE,mDAAD,OACmD8C,EAAOZ,KAD1D,UAOR,YAAC,IAAD,CAAQpB,KAAK,QAAQa,SAAS,UAC5B,YAAC,IAAD,CACE0B,UAAWR,EACXhF,MAAOmC,YAAE,mCAET,YAAC,IAAD,CAAYc,KAAK,gBAO/B,YAACwC,EAAD,KACE,YAAC,IAAD,CACE1B,KAAK,SACL2B,GAAG,6CACHzC,KAAK,SAEJd,YAAE,0BAlENwC,E,iCA0ET,IAAMO,EAAkB,YAAOV,IAAP,8CAAH,qCAIfW,EAAoB,YAAO,MAAP,gDAAH,kDAKVxD,YAAM,GALI,qBASjB0D,EAAgB,YAAOM,IAAP,4CAAH,cACJ,SAAAjE,GAAC,OAAIA,EAAEE,MAAMgE,wBADT,iBAKbR,EAAO,YAAO,MAAP,mCAAH,mCAIJtC,EAAU,YAAO,MAAP,sCAAH,UACDnB,YAAM,GADL,KAIP8D,EAAsB,YAAOjB,IAAP,kDAAH,oCAEZ7C,YAAM,GAFM,KAKV,cAAOgD,EAAP,sBAAf,cACgBhD,YAAM,GADtB,K,kbC3GA,IAAMkE,EAAW,4BAWjB,SAASC,GAAT,GAAkE,IAAtC5C,EAAsC,EAAtCA,MAAOoC,EAA+B,EAA/BA,KACjC,OACE,YAAC,IAAMpD,SAAP,KACE,YAAC6D,GAAD,KAAY7C,GACZ,uBAAMoC,EAAO,YAAC,IAAD,CAAUA,KAAMA,IAAWnD,YAAE,WAJvC2D,G,oCAkBHE,G,kLAYJC,a,+BAAe,WAAOhB,GAAP,mBAAAiB,EAAA,0DACNC,EAAiB,EAAKC,MAAtBD,gBAEgBA,EAAcE,OAHxB,wDAQPC,EAAWrB,EAAS,GAAH,OAAMA,EAAOsB,WAAb,KAA6B,GAC9CC,EAAavB,EAASA,EAAOZ,KAAOlC,YAAE,iBAE5C,EAAKsE,SAAS,CAACC,SAAS,IAXX,kBAcL,EAAKC,IAAIC,eAAT,UAA2Bf,GAA3B,OAAsCM,EAAcE,OAApD,YAA8DC,GAAY,CAC9EO,OAAQ,WAfC,OAiBX,EAAKvG,MAAMwG,OAAOC,KAAK,8BACvBC,YAAkB7E,YAAE,sBAAuBqE,IAlBhC,kDAqBX,EAAKC,SAAS,CAACC,SAAS,IACxBO,YAAgB9E,YAAE,oBAAqBqE,IAtB5B,0D,uGAVb,OAAOrE,YAAE,c,qCAG2C,IAE7CkE,EADUpG,KAAKK,MAAf4G,OACAb,OAEP,MAAO,CAAC,CAAC,gBAAD,UAAqBR,GAArB,OAAgCQ,EAAhC,S,mCA6BG,IACJF,EAAiBlG,KAAKmG,MAAtBD,cAEP,IAAKA,EACH,OAAO,KAJE,MAOuClG,KAAKK,MAAhD6G,EAPI,EAOJA,eAAgB1E,EAPZ,EAOYA,wBAEvB,OACE,YAAC,IAAMP,SAAP,KACE,YAAC,IAAD,CACElC,MACE,YAAC,IAAMkC,SAAP,KACE,wBAAOiE,EAAc9B,MACrB,YAAC+C,GAAD,CAAqBC,QAASlB,EAAc5D,cAGhD9B,OACE0F,EAAc5D,YACd4D,EAAcmB,cACZ,YAAC,IAAD,CACEtH,MAAOmC,YACL,2FAEFqD,UAAW2B,GAEX,YAAC,IAAD,CAAetD,UAAW5D,KAAKgG,aAAcT,SAAU2B,GACrD,YAAC,IAAD,CAAQrD,SAAS,UAAUqC,EAAcmB,kBAOnD,YAAC,IAAD,KAAYnB,EAAcoB,aAE1B,YAACC,GAAD,KACE,YAAC1B,GAAD,CAAmB5C,MAAOf,YAAE,cAAemD,KAAMa,EAAcsB,YAC/D,YAAC3B,GAAD,CAAmB5C,MAAOf,YAAE,aAAcmD,KAAMa,EAAcuB,cAGhE,YAAC,EAAD,CACEnF,WAAY4D,EAAc5D,WAC1BsC,GAAIsB,EAActB,GAClBD,QAASuB,EAAcvB,QACvBE,kBAAmB7E,KAAKgG,eAGzBE,EAAc5D,YAAc4D,EAAcwB,OACzC,YAACC,GAAD,KACGzF,YAAE,6DADL,IAEE,YAAC0F,GAAD,KAAQ1B,EAAcwB,QAI1B,YAAC,EAAD,CACElF,wBAAyBA,EACzBF,WAAY4D,EAAc5D,WAC1BC,MAAO2D,EAAc3D,a,GAjGMzC,KA0G/BqH,IAFSpB,aAEa,YAAO8B,IAAP,iDAAH,eACRnG,YAAM,GADE,MAInB6F,GAAqB,YAAO,MAAP,gDAAH,yBAEV7F,YAAM,GAFI,4CAMlBoE,GAAY,YAAO,OAAP,uCAAH,4CAIT6B,GAAe,YAAO,MAAP,0CAAH,cACFjG,YAAM,GADJ,KAIZkG,GAAQ,YAAO,OAAP,mCAAH,gCAEMlG,YAAM,GAFZ","file":"AccountSecurityDetails.js","sourcesContent":["import React from 'react';\nimport DocumentTitle from 'react-document-title';\n\nimport AsyncComponent from 'app/components/asyncComponent';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    const title = this.getTitle();\n    return (\n      <DocumentTitle title={`${title ? `${title} - ` : ''}Sentry`}>\n        {this.renderComponent()}\n      </DocumentTitle>\n    );\n  }\n}\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport {HeaderTitle} from 'app/styles/organization';\nimport space from 'app/styles/space';\n\ntype Props = {\n  // Icon left of title\n  icon?: React.ReactNode;\n\n  // The title\n  title: React.ReactNode;\n  subtitle?: React.ReactNode;\n\n  // Disables font styles in the title. Allows for more custom titles.\n  noTitleStyles?: boolean;\n  className?: string;\n\n  // CTA button\n  action?: React.ReactNode;\n\n  body?: React.ReactNode;\n\n  tabs?: React.ReactNode;\n};\n\nclass UnstyledSettingsPageHeader extends React.Component<Props> {\n  static defaultProps = {\n    noTitleStyles: false,\n  };\n\n  render() {\n    const {\n      icon,\n      title,\n      subtitle,\n      action,\n      tabs,\n      noTitleStyles,\n      body,\n      ...props\n    } = this.props;\n\n    // If Header is narrow, use align-items to center <Action>.\n    // Otherwise, use a fixed margin to prevent an odd alignment.\n    // This is needed as Actions could be a button or a dropdown.\n    const isNarrow = !subtitle;\n\n    return (\n      <div {...props}>\n        <TitleAndActions isNarrow={isNarrow}>\n          <TitleWrapper>\n            {icon && <Icon>{icon}</Icon>}\n            {title && (\n              <Title tabs={tabs} styled={noTitleStyles}>\n                <HeaderTitle>{title}</HeaderTitle>\n                {subtitle && <Subtitle>{subtitle}</Subtitle>}\n              </Title>\n            )}\n          </TitleWrapper>\n          {action && <Action isNarrow={isNarrow}>{action}</Action>}\n        </TitleAndActions>\n\n        {body && <BodyWrapper>{body}</BodyWrapper>}\n        {tabs && <TabsWrapper>{tabs}</TabsWrapper>}\n      </div>\n    );\n  }\n}\n\ntype TitleProps = {\n  styled?: boolean;\n  tabs?: React.ReactNode;\n};\n\nconst TitleAndActions = styled('div')<{isNarrow?: boolean}>`\n  display: flex;\n  align-items: ${p => (p.isNarrow ? 'center' : 'flex-start')};\n`;\nconst TitleWrapper = styled('div')`\n  flex: 1;\n`;\n\nconst Title = styled('div')<TitleProps & React.HTMLProps<HTMLDivElement>>`\n  ${p => !p.styled && `font-size: 20px; font-weight: 600;`};\n  margin: ${space(4)} ${space(2)} ${space(3)} 0;\n`;\nconst Subtitle = styled('div')`\n  color: ${p => p.theme.gray400};\n  font-weight: 400;\n  font-size: ${p => p.theme.fontSizeLarge};\n  padding: ${space(1.5)} 0 0;\n`;\n\nconst Icon = styled('div')`\n  margin-right: ${space(1)};\n`;\n\nconst Action = styled('div')<{isNarrow?: boolean}>`\n  margin-top: ${p => (p.isNarrow ? '0' : space(4))};\n`;\n\nconst SettingsPageHeader = styled(UnstyledSettingsPageHeader)<\n  Omit<React.HTMLProps<HTMLDivElement>, keyof Props> & Props\n>`\n  font-size: 14px;\n  margin-top: -${space(4)};\n`;\n\nconst BodyWrapper = styled('div')`\n  flex: 1;\n  margin: 0 0 ${space(3)};\n`;\nconst TabsWrapper = styled('div')`\n  flex: 1;\n  margin: 0; /* sentry/components/navTabs has added margin */\n`;\n\nexport default SettingsPageHeader;\n","import styled from '@emotion/styled';\n\nconst ConfirmHeader = styled('div')`\n  font-size: 1.2em;\n  margin-bottom: 10px;\n`;\n\nexport default ConfirmHeader;\n","import React from 'react';\n\nimport Confirm from 'app/components/confirm';\nimport {t} from 'app/locale';\nimport ConfirmHeader from 'app/views/settings/account/accountSecurity/components/confirmHeader';\nimport TextBlock from 'app/views/settings/components/text/textBlock';\n\ntype Props = React.ComponentProps<typeof Confirm>;\n\nconst message = (\n  <React.Fragment>\n    <ConfirmHeader>{t('Do you want to remove this method?')}</ConfirmHeader>\n    <TextBlock>\n      {t(\n        'Removing the last authentication method will disable two-factor authentication completely.'\n      )}\n    </TextBlock>\n  </React.Fragment>\n);\n\nconst RemoveConfirm = (props: Props) => <Confirm {...props} message={message} />;\n\nexport default RemoveConfirm;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport Button from 'app/components/button';\nimport Clipboard from 'app/components/clipboard';\nimport Confirm from 'app/components/confirm';\nimport {\n  Panel,\n  PanelAlert,\n  PanelBody,\n  PanelHeader,\n  PanelItem,\n} from 'app/components/panels';\nimport {IconCopy, IconDownload, IconPrint} from 'app/icons';\nimport {t} from 'app/locale';\nimport space from 'app/styles/space';\nimport EmptyMessage from 'app/views/settings/components/emptyMessage';\n\ntype Props = {\n  isEnrolled: boolean;\n  codes: string[];\n  onRegenerateBackupCodes: () => void;\n  className?: string;\n};\n\nconst RecoveryCodes = ({\n  className,\n  isEnrolled,\n  codes,\n  onRegenerateBackupCodes,\n}: Props) => {\n  const printCodes = () => {\n    // eslint-disable-next-line dot-notation\n    const iframe = window.frames['printable'];\n    iframe.document.write(codes.join('<br>'));\n    iframe.print();\n    iframe.document.close();\n  };\n\n  if (!isEnrolled || !codes) {\n    return null;\n  }\n\n  const formattedCodes = codes.join(' \\n');\n\n  return (\n    <CodeContainer className={className}>\n      <PanelHeader hasButtons>\n        {t('Unused Codes')}\n\n        <Actions>\n          <Clipboard hideUnsupported value={formattedCodes}>\n            <Button size=\"small\" label={t('copy')}>\n              <IconCopy />\n            </Button>\n          </Clipboard>\n          <Button size=\"small\" onClick={printCodes} label={t('print')}>\n            <IconPrint />\n          </Button>\n          <Button\n            size=\"small\"\n            download=\"sentry-recovery-codes.txt\"\n            href={`data:text/plain;charset=utf-8,${formattedCodes}`}\n            label={t('download')}\n          >\n            <IconDownload />\n          </Button>\n          <Confirm\n            onConfirm={onRegenerateBackupCodes}\n            message={t(\n              'Are you sure you want to regenerate recovery codes? Your old codes will no longer work.'\n            )}\n          >\n            <Button priority=\"danger\" size=\"small\">\n              {t('Regenerate Codes')}\n            </Button>\n          </Confirm>\n        </Actions>\n      </PanelHeader>\n      <PanelBody>\n        <PanelAlert type=\"warning\">\n          {t(\n            'Make sure to save a copy of your recovery codes and store them in a safe place.'\n          )}\n        </PanelAlert>\n        <div>{!!codes.length && codes.map(code => <Code key={code}>{code}</Code>)}</div>\n        {!codes.length && (\n          <EmptyMessage>{t('You have no more recovery codes to use')}</EmptyMessage>\n        )}\n      </PanelBody>\n      <iframe name=\"printable\" css={{display: 'none'}} />\n    </CodeContainer>\n  );\n};\n\nexport default RecoveryCodes;\n\nconst CodeContainer = styled(Panel)`\n  margin-top: ${space(4)};\n`;\n\nconst Actions = styled('div')`\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: ${space(1)};\n`;\n\nconst Code = styled(PanelItem)`\n  font-family: ${p => p.theme.text.familyMono};\n  padding: ${space(2)};\n`;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport Button from 'app/components/button';\nimport Confirm from 'app/components/confirm';\nimport DateTime from 'app/components/dateTime';\nimport {Panel, PanelBody, PanelHeader, PanelItem} from 'app/components/panels';\nimport Tooltip from 'app/components/tooltip';\nimport {IconDelete} from 'app/icons';\nimport {t} from 'app/locale';\nimport space from 'app/styles/space';\nimport {AuthenticatorDevice} from 'app/types';\nimport ConfirmHeader from 'app/views/settings/account/accountSecurity/components/confirmHeader';\nimport EmptyMessage from 'app/views/settings/components/emptyMessage';\nimport TextBlock from 'app/views/settings/components/text/textBlock';\n\ntype Props = {\n  isEnrolled: boolean;\n  id: string;\n  onRemoveU2fDevice: (device: AuthenticatorDevice) => void;\n  devices?: AuthenticatorDevice[];\n  className?: string;\n};\n\n/**\n * List u2f devices w/ ability to remove a single device\n */\nfunction U2fEnrolledDetails({\n  className,\n  isEnrolled,\n  devices,\n  id,\n  onRemoveU2fDevice,\n}: Props) {\n  if (id !== 'u2f' || !isEnrolled) {\n    return null;\n  }\n\n  const hasDevices = devices?.length;\n  // Note Tooltip doesn't work because of bootstrap(?) pointer events for disabled buttons\n  const isLastDevice = hasDevices === 1;\n\n  return (\n    <Panel className={className}>\n      <PanelHeader>{t('Device name')}</PanelHeader>\n\n      <PanelBody>\n        {!hasDevices && (\n          <EmptyMessage>{t('You have not added any U2F devices')}</EmptyMessage>\n        )}\n        {hasDevices &&\n          devices?.map(device => (\n            <DevicePanelItem key={device.name}>\n              <DeviceInformation>\n                <Name>{device.name}</Name>\n                <FadedDateTime date={device.timestamp} />\n              </DeviceInformation>\n\n              <Actions>\n                <Confirm\n                  onConfirm={() => onRemoveU2fDevice(device)}\n                  disabled={isLastDevice}\n                  message={\n                    <React.Fragment>\n                      <ConfirmHeader>\n                        {t('Do you want to remove U2F device?')}\n                      </ConfirmHeader>\n                      <TextBlock>\n                        {t(\n                          `Are you sure you want to remove the U2F device \"${device.name}\"?`\n                        )}\n                      </TextBlock>\n                    </React.Fragment>\n                  }\n                >\n                  <Button size=\"small\" priority=\"danger\">\n                    <Tooltip\n                      disabled={!isLastDevice}\n                      title={t('Can not remove last U2F device')}\n                    >\n                      <IconDelete size=\"xs\" />\n                    </Tooltip>\n                  </Button>\n                </Confirm>\n              </Actions>\n            </DevicePanelItem>\n          ))}\n        <AddAnotherPanelItem>\n          <Button\n            type=\"button\"\n            to=\"/settings/account/security/mfa/u2f/enroll/\"\n            size=\"small\"\n          >\n            {t('Add Another Device')}\n          </Button>\n        </AddAnotherPanelItem>\n      </PanelBody>\n    </Panel>\n  );\n}\n\nconst DevicePanelItem = styled(PanelItem)`\n  padding: 0;\n`;\n\nconst DeviceInformation = styled('div')`\n  display: flex;\n  align-items: center;\n  flex: 1;\n\n  padding: ${space(2)};\n  padding-right: 0;\n`;\n\nconst FadedDateTime = styled(DateTime)`\n  font-size: ${p => p.theme.fontSizeRelativeSmall};\n  opacity: 0.6;\n`;\n\nconst Name = styled('div')`\n  flex: 1;\n`;\n\nconst Actions = styled('div')`\n  margin: ${space(2)};\n`;\n\nconst AddAnotherPanelItem = styled(PanelItem)`\n  justify-content: flex-end;\n  padding: ${space(2)};\n`;\n\nexport default styled(U2fEnrolledDetails)`\n  margin-top: ${space(4)};\n`;\n","/**\n * AccountSecurityDetails is only displayed when user is enrolled in the 2fa method.\n * It displays created + last used time of the 2fa method.\n *\n * Also displays 2fa method specific details.\n */\nimport React from 'react';\nimport {RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport {addErrorMessage, addSuccessMessage} from 'app/actionCreators/indicator';\nimport Button from 'app/components/button';\nimport CircleIndicator from 'app/components/circleIndicator';\nimport DateTime from 'app/components/dateTime';\nimport Tooltip from 'app/components/tooltip';\nimport {t} from 'app/locale';\nimport space from 'app/styles/space';\nimport {Authenticator, AuthenticatorDevice} from 'app/types';\nimport AsyncView from 'app/views/asyncView';\nimport RecoveryCodes from 'app/views/settings/account/accountSecurity/components/recoveryCodes';\nimport RemoveConfirm from 'app/views/settings/account/accountSecurity/components/removeConfirm';\nimport U2fEnrolledDetails from 'app/views/settings/account/accountSecurity/components/u2fEnrolledDetails';\nimport SettingsPageHeader from 'app/views/settings/components/settingsPageHeader';\nimport TextBlock from 'app/views/settings/components/text/textBlock';\n\nconst ENDPOINT = '/users/me/authenticators/';\n\ntype AuthenticatorDateProps = {\n  label: string;\n  /**\n   * Can be null or a Date object.\n   * Component will have value \"never\" if it is null\n   */\n  date: string | null;\n};\n\nfunction AuthenticatorDate({label, date}: AuthenticatorDateProps) {\n  return (\n    <React.Fragment>\n      <DateLabel>{label}</DateLabel>\n      <div>{date ? <DateTime date={date} /> : t('never')}</div>\n    </React.Fragment>\n  );\n}\n\ntype Props = {\n  deleteDisabled: boolean;\n  onRegenerateBackupCodes: () => void;\n} & RouteComponentProps<{authId: string}, {}>;\n\ntype State = {\n  authenticator: Authenticator | null;\n} & AsyncView['state'];\n\nclass AccountSecurityDetails extends AsyncView<Props, State> {\n  getTitle() {\n    return t('Security');\n  }\n\n  getEndpoints(): ReturnType<AsyncView['getEndpoints']> {\n    const {params} = this.props;\n    const {authId} = params;\n\n    return [['authenticator', `${ENDPOINT}${authId}/`]];\n  }\n\n  handleRemove = async (device?: AuthenticatorDevice) => {\n    const {authenticator} = this.state;\n\n    if (!authenticator || !authenticator.authId) {\n      return;\n    }\n\n    // if the device is defined, it means that U2f is being removed\n    const deviceId = device ? `${device.key_handle}/` : '';\n    const deviceName = device ? device.name : t('Authenticator');\n\n    this.setState({loading: true});\n\n    try {\n      await this.api.requestPromise(`${ENDPOINT}${authenticator.authId}/${deviceId}`, {\n        method: 'DELETE',\n      });\n      this.props.router.push('/settings/account/security');\n      addSuccessMessage(t('%s has been removed', deviceName));\n    } catch {\n      // Error deleting authenticator\n      this.setState({loading: false});\n      addErrorMessage(t('Error removing %s', deviceName));\n    }\n  };\n\n  renderBody() {\n    const {authenticator} = this.state;\n\n    if (!authenticator) {\n      return null;\n    }\n\n    const {deleteDisabled, onRegenerateBackupCodes} = this.props;\n\n    return (\n      <React.Fragment>\n        <SettingsPageHeader\n          title={\n            <React.Fragment>\n              <span>{authenticator.name}</span>\n              <AuthenticatorStatus enabled={authenticator.isEnrolled} />\n            </React.Fragment>\n          }\n          action={\n            authenticator.isEnrolled &&\n            authenticator.removeButton && (\n              <Tooltip\n                title={t(\n                  \"Two-factor authentication is required for at least one organization you're a member of.\"\n                )}\n                disabled={!deleteDisabled}\n              >\n                <RemoveConfirm onConfirm={this.handleRemove} disabled={deleteDisabled}>\n                  <Button priority=\"danger\">{authenticator.removeButton}</Button>\n                </RemoveConfirm>\n              </Tooltip>\n            )\n          }\n        />\n\n        <TextBlock>{authenticator.description}</TextBlock>\n\n        <AuthenticatorDates>\n          <AuthenticatorDate label={t('Created at')} date={authenticator.createdAt} />\n          <AuthenticatorDate label={t('Last used')} date={authenticator.lastUsedAt} />\n        </AuthenticatorDates>\n\n        <U2fEnrolledDetails\n          isEnrolled={authenticator.isEnrolled}\n          id={authenticator.id}\n          devices={authenticator.devices}\n          onRemoveU2fDevice={this.handleRemove}\n        />\n\n        {authenticator.isEnrolled && authenticator.phone && (\n          <PhoneWrapper>\n            {t('Confirmation codes are sent to the following phone number')}:\n            <Phone>{authenticator.phone}</Phone>\n          </PhoneWrapper>\n        )}\n\n        <RecoveryCodes\n          onRegenerateBackupCodes={onRegenerateBackupCodes}\n          isEnrolled={authenticator.isEnrolled}\n          codes={authenticator.codes}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default AccountSecurityDetails;\n\nconst AuthenticatorStatus = styled(CircleIndicator)`\n  margin-left: ${space(1)};\n`;\n\nconst AuthenticatorDates = styled('div')`\n  display: grid;\n  grid-gap: ${space(2)};\n  grid-template-columns: max-content auto;\n`;\n\nconst DateLabel = styled('span')`\n  font-weight: bold;\n`;\n\nconst PhoneWrapper = styled('div')`\n  margin-top: ${space(4)};\n`;\n\nconst Phone = styled('span')`\n  font-weight: bold;\n  margin-left: ${space(1)};\n`;\n"],"sourceRoot":""}