(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[48],{2910:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(264),i=r.n(s),o=r(96),c=r(2),l=r(9),u=r.n(l),p=r(10),f=r.n(p),v=r(11),h=r.n(v),d=r(12),y=r.n(d),x=r(7),b=r.n(x),m=r(711),O=r(131),j=r(44),w=r(38),D=r(47),g=r(0);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b()(e);if(t){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var k={error:!1,loading:!0,rawData:{"client-api.all-versions.responses.2xx":[],"client-api.all-versions.responses.4xx":[],"client-api.all-versions.responses.5xx":[]}},R=function(e){h()(r,e);var t=S(r);function r(){var e;u()(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state=k,e.fetchData=function(){["client-api.all-versions.responses.2xx","client-api.all-versions.responses.4xx","client-api.all-versions.responses.5xx"].forEach((function(t){e.props.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(r){e.setState((function(e){var n=e.rawData;return n[t]=r,{rawData:n}}),e.requestFinished)},error:function(){e.setState({error:!0})}})}))},e.requestFinished=function(){var t=e.state.rawData;t["client-api.all-versions.responses.2xx"]&&t["client-api.all-versions.responses.4xx"]&&t["client-api.all-versions.responses.5xx"]&&e.setState({loading:!1})},e}return f()(r,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(e){this.props.since!==e.since&&this.setState(k,this.fetchData)}},{key:"processRawSeries",value:function(e){return e.map((function(e){return{name:1e3*e[0],value:e[1]}}))}},{key:"getChartSeries",value:function(){var e=this.state.rawData;return[{seriesName:"2xx",data:this.processRawSeries(e["client-api.all-versions.responses.2xx"]),color:w.c.green200},{seriesName:"4xx",data:this.processRawSeries(e["client-api.all-versions.responses.4xx"]),color:w.c.blue300},{seriesName:"5xx",data:this.processRawSeries(e["client-api.all-versions.responses.5xx"]),color:w.c.red200}]}},{key:"render",value:function(){var e=this.state,t=e.loading,r=e.error;if(t)return Object(g.f)(j.default,null);if(r)return Object(g.f)(O.a,{onRetry:this.fetchData});var n=this.getChartSeries(),a=n.map((function(e){return e.color}));return Object(g.f)(m.a,{series:n,colors:a,height:110,stacked:!0,isGroupedByDate:!0,showTimeInTooltip:!0,labelYAxisExtents:!0})}}]),r}(a.a.Component);R.displayName="ApiChart";var A=Object(D.a)(R);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b()(e);if(t){var a=b()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var C={error:!1,loading:!0,rawData:{"events.total":[],"events.dropped":[]},stats:{received:[],rejected:[]}},N=function(e){h()(r,e);var t=E(r);function r(){var e;u()(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state=C,e.fetchData=function(){["events.total","events.dropped"].forEach((function(t){e.props.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(r){e.setState((function(e){var n=e.rawData;return n[t]=r,{rawData:n}}),e.requestFinished)},error:function(){e.setState({error:!0})}})}))},e}return f()(r,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(e){this.props.since!==e.since&&this.setState(C,this.fetchData)}},{key:"requestFinished",value:function(){var e=this.state.rawData;e["events.total"]&&e["events.dropped"]&&this.processOrgData()}},{key:"processOrgData",value:function(){var e=this.state.rawData,t={},r={},n=[0,0];e["events.total"].forEach((function(a,s){var i=a[1],o=e["events.dropped"][s][1],c=a[0];void 0===t[c]?(t[c]=i,r[c]=o):(t[c]+=i,r[c]+=o),i>0&&(n[0]+=i,n[1]+=1)})),this.setState({stats:{rejected:Object.keys(r).map((function(e){return{name:1e3*parseInt(e,10),value:r[e]||0}})),accepted:Object.keys(t).map((function(e){return{name:1e3*parseInt(e,10),value:t[e]-r[e]}}))},loading:!1})}},{key:"getChartSeries",value:function(){var e=this.state.stats;return[{seriesName:Object(c.b)("Accepted"),data:e.accepted,color:w.c.blue300},{seriesName:Object(c.b)("Dropped"),data:e.rejected,color:w.c.red200}]}},{key:"render",value:function(){var e=this.state,t=e.loading,r=e.error;if(t)return Object(g.f)(j.default,null);if(r)return Object(g.f)(O.a,{onRetry:this.fetchData});var n=this.getChartSeries(),a=n.map((function(e){return e.color}));return Object(g.f)(m.a,{series:n,colors:a,height:110,stacked:!0,isGroupedByDate:!0,showTimeInTooltip:!0,labelYAxisExtents:!0})}}]),r}(a.a.Component);N.displayName="EventChart";var T=Object(D.a)(N),P=function(){var e=(new Date).getTime()/1e3-604800;return Object(g.f)(i.a,{title:"Admin Overview - Sentry"},Object(g.f)(a.a.Fragment,null,Object(g.f)("h3",null,Object(c.b)("System Overview")),Object(g.f)(o.a,{key:"events"},Object(g.f)(o.e,null,Object(c.b)("Event Throughput")),Object(g.f)(o.c,{withPadding:!0},Object(g.f)(T,{since:e,resolution:"1h"}))),Object(g.f)(o.a,{key:"api"},Object(g.f)(o.e,null,Object(c.b)("API Responses")),Object(g.f)(o.c,{withPadding:!0},Object(g.f)(A,{since:e,resolution:"1h"})))))};P.displayName="AdminOverview";t.default=P}}]);
//# sourceMappingURL=AdminOverview.js.map