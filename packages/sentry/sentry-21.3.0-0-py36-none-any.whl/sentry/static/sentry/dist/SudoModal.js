(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[192],{1888:function(t,e,r){"use strict";r.r(e),r.d(e,"SudoModal",(function(){return H}));var n=r(20),a=r.n(n),o=r(29),c=r.n(o),s=r(9),u=r.n(s),i=r(10),l=r.n(i),f=r(11),p=r.n(f),h=r(12),d=r.n(h),b=r(7),y=r.n(b),m=r(3),v=r(1),O=r.n(v),j=r(22),g=r(70),w=r(27),S=r(5),R=r.n(S),k=r(47),x=r(1128),C=r(0);function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y()(t);if(e){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d()(this,r)}}var q=function(t){p()(n,t);var e,r=P(n);function n(){var t;u()(this,n);for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return(t=r.call.apply(r,[this].concat(a))).state={authenticators:[]},t}return l()(n,[{key:"componentDidMount",value:function(){this.getAuthenticators()}},{key:"getAuthenticators",value:(e=c()(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.api,t.prev=1,t.next=4,e.requestPromise("/authenticators/");case 4:r=t.sent,this.setState({authenticators:null!=r?r:[]}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this,e=this.props.className,r=this.state.authenticators;return r.length?Object(C.f)("div",{className:e},r.map((function(e){return"u2f"===e.id&&e.challenge?Object(C.f)(x.default,R()({key:e.id},t.props,{challengeData:e.challenge})):null}))):null}}]),n}(O.a.Component);q.displayName="U2fContainer";var A=Object(k.a)(q),D=r(15),M=r(2),U=r(36),F=r(6),T=r(329),B=r(69),E=r(696);function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y()(t);if(e){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d()(this,r)}}var H=function(t){p()(r,t);var e=N(r);function r(){var t;u()(this,r);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={error:!1,busy:!1},t.handleSuccess=function(){var e=t.props,r=e.closeModal,n=e.superuser,a=e.location,o=e.router,c=e.retryRequest;c?n?o.replace({pathname:a.pathname,state:{forceUpdate:new Date}}):t.setState({busy:!0},(function(){c().then((function(){t.setState({busy:!1},r)}))})):r()},t.handleError=function(){t.setState({busy:!1,error:!0})},t.handleU2fTap=function(){var e=c()(a.a.mark((function e(r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({busy:!0}),n=t.props.api,e.prev=2,e.next=5,n.requestPromise("/auth/",{method:"PUT",data:r});case 5:t.handleSuccess(),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),t.setState({busy:!1}),e.t0;case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),t}return l()(r,[{key:"renderBodyContent",value:function(){var t=this.props.superuser,e=this.state.error,r=U.default.get("user");return r.hasPasswordAuth?Object(C.f)(O.a.Fragment,null,Object(C.f)(I,null,t?Object(M.b)("You are attempting to access a resource that requires superuser access, please re-authenticate as a superuser."):Object(M.b)("Help us keep your account safe by confirming your identity.")),e&&Object(C.f)(J,{type:"error",icon:Object(C.f)(D.C,{size:"md"})},Object(M.b)("Incorrect password")),Object(C.f)(T.a,{apiMethod:"PUT",apiEndpoint:"/auth/",submitLabel:Object(M.b)("Confirm Password"),onSubmitSuccess:this.handleSuccess,onSubmitError:this.handleError,hideFooter:!r.hasPasswordAuth,resetOnError:!0},Object(C.f)(z,{type:"password",inline:!1,label:Object(M.b)("Password"),name:"password",autoFocus:!0,flexibleControlStateSize:!0}),Object(C.f)(A,{displayMode:"sudo",onTap:this.handleU2fTap}))):Object(C.f)(O.a.Fragment,null,Object(C.f)(E.a,null,Object(M.b)("You will need to reauthenticate to continue.")),Object(C.f)(w.b,{priority:"primary",href:"/auth/login/?next=".concat(encodeURIComponent(location.pathname))},Object(M.b)("Continue")))}},{key:"render",value:function(){var t=this.props,e=t.closeModal,r=t.Header,n=t.Body;return Object(C.f)(O.a.Fragment,null,Object(C.f)(r,{closeButton:!0,onHide:e},Object(M.b)("Confirm Password to Continue")),Object(C.f)(n,null,this.renderBodyContent()))}}]),r}(O.a.Component);H.displayName="SudoModal";e.default=Object(j.withRouter)(Object(k.a)(H));var I=Object(m.a)(E.a,{target:"eag9q640",label:"StyledTextBlock"})("margin-bottom:",Object(F.a)(1),";"),z=Object(m.a)(B.a,{target:"eag9q641",label:"StyledInputField"})({name:"131yq1t",styles:"padding-left:0;"}),J=Object(m.a)(g.b,{target:"eag9q642",label:"StyledAlert"})({name:"gx0lhm",styles:"margin-bottom:0;"})}}]);
//# sourceMappingURL=SudoModal.js.map