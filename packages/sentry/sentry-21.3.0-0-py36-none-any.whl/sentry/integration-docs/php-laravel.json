{
  "id": "php-laravel",
  "name": "Laravel",
  "html": "<p>Install the <code>sentry/sentry-laravel</code> package:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash highlight\"><code class=\"language-bash\"><span class=\"token function\">composer</span> require sentry/sentry-laravel</code></pre></div>\n<p>If you're on Laravel 5.5 or later the package will be auto-discovered. Otherwise you will need to manually configure it in your <code>config/app.php</code>.</p>\n<p>Add Sentry reporting to <code>App/Exceptions/Handler.php</code>.</p>\n<p><strong>For Laravel 7.x and later:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php highlight\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">report</span><span class=\"token punctuation\">(</span>Throwable <span class=\"token variable\">$exception</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">app</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span><span class=\"token function\">bound</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sentry'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span><span class=\"token function\">shouldReport</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$exception</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">app</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sentry'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span><span class=\"token function\">captureException</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$exception</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">parent</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">report</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$exception</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>For Laravel 5.x and 6.x:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php highlight\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">report</span><span class=\"token punctuation\">(</span>Exception <span class=\"token variable\">$exception</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">app</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span><span class=\"token function\">bound</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sentry'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span><span class=\"token function\">shouldReport</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$exception</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">app</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sentry'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span><span class=\"token function\">captureException</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$exception</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">parent</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">report</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$exception</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Setup Sentry with this command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell highlight\"><code class=\"language-shell\">php artisan sentry:publish --dsn<span class=\"token operator\">=</span>___PUBLIC_DSN___</code></pre></div>\n<p>It creates (<code>config/sentry.php</code>) and adds the <code>DSN</code> to your <code>.env</code> file.</p>\n<p>You can easily verify that Sentry is capturing errors in your Laravel application by creating a debug route that will throw an exception:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php highlight\"><code class=\"language-php\">Route<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'/debug-sentry'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Exception</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'My first Sentry error!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Visiting this route will trigger an exception that will be captured by Sentry.</p>\n<p><strong>Monitor Performane</strong></p>\n<p>Set <code>traces_sample_rate</code> to a value greater than <code>0.0</code> (<code>config/sentry.php</code>) after that, Performance Monitoring will be enabled.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php highlight\"><code class=\"language-php\"><span class=\"token single-quoted-string string\">'traces_sample_rate'</span> <span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span> <span class=\"token number\">1.0</span> <span class=\"token shell-comment comment\"># be sure to lower this in production to prevent quota issues</span></code></pre></div>\n<p>or in the <code>.env</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell highlight\"><code class=\"language-shell\"><span class=\"token assign-left variable\">SENTRY_TRACES_SAMPLE_RATE</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></code></pre></div>",
  "link": "https://docs.sentry.io/platforms/php/guides/laravel/"
}
