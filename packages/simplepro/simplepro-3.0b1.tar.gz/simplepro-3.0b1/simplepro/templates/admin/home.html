{% load i18n static simpletags sptags %}
<link rel="stylesheet" href="{% static 'admin/simplepro/css/home.css' %}">
<script type="text/javascript" src="{% static 'admin/simplepro/echarts/echarts.min.js' %}"></script>
<div class="home-body">

    {% block quick %}
        {% include 'admin/parts/quick.html' %}
    {% endblock %}

    {% get_chart_display as chart_display %}
    {% block chart_cards %}
        {% if chart_display %}
            {% include 'admin/parts/charts_cards.html' %}
        {% endif %}
    {% endblock %}

    {% block line_chart %}
        {% if chart_display %}
            {% include 'admin/parts/line_chart.html' %}
        {% endif %}
    {% endblock %}

    {% block timeline %}
        {% if "SIMPLEUI_HOME_ACTION"|get_config != False %}
            <el-card class="timeline" style="margin-top: 10px;">
                <div slot="header" class="clearfix">
                    <span>{% trans 'Recent actions' %}</span>
                    <el-button v-waves style="float: right; padding: 3px 0" type="text"
                               :icon="timeline?'el-icon-arrow-up':'el-icon-arrow-down'"
                               @click="displayTimeline()"></el-button>
                </div>
                {% load log %}
                {% get_admin_log 10 as admin_log for_user user %}
                {% if admin_log %}
                    <transition name="el-zoom-in-top">
                        <div class="block" v-if="timeline">
                            <el-timeline>
                                {% for entry in admin_log %}
                                    <el-timeline-item timestamp="{{ entry.action_time }}" placement="top">
                                        <div>
                                            <p>{{ entry.user }} {{ entry.action_time }}</p>
                                            <h4 v-pre="true">{{ entry.content_type }}: {{ entry }}</h4>
                                        </div>
                                    </el-timeline-item>
                                {% endfor %}
                            </el-timeline>
                        </div>
                    </transition>
                {% endif %}
            </el-card>
        {% endif %}
    {% endblock %}
    <div style="height: 80px"></div>
</div>
<el-backtop target=".home-body"></el-backtop>
