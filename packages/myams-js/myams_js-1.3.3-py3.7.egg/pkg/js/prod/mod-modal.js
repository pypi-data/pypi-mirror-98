!function(a,e){"function"==typeof define&&define.amd?define(["exports"],e):"undefined"!=typeof exports?e(exports):(e(e={}),a.modModal=e)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.modalToggleEventHandler=t,a.modalShownEventHandler=n,a.dynamicModalShownEventHandler=s,a.modalDismissEventHandler=o,a.modalHiddenEventHandler=d,a.dynamicModalHiddenEventHandler=l,a.modal=void 0;var i=MyAMS.$,e=!1;function t(o){return new Promise(function(a,e){var t=i(o.currentTarget),n=t.data("ams-disabled-handlers");!t.attr("disabled")&&!t.hasClass("disabled")&&!0!==n&&"click"!==n&&"all"!==n&&!0!==t.data("ams-context-menu")?(!0===t.data("ams-stop-propagation")&&o.stopPropagation(),o.preventDefault(),MyAMS.modal.open(t).then(function(){a(!0)},e)):a(!1)})}function n(a){var a=i(a.target),e=1100+100*i(".modal:visible").length;a.css("z-index",e),setTimeout(function(){i(".modal-backdrop").not(".modal-stack").first().css("z-index",e-10).addClass("modal-stack")},0),i(a).off("click",'[data-dismiss="modal"]').on("click",'[data-dismiss="modal"]',function(a){var e=i(a.currentTarget).data("ams-dismiss-handler")||o;return MyAMS.core.executeFunctionByName(e,document,a)})}function s(a){a=i(a.target);return MyAMS.core.executeFunctionByName(a.data("ams-init-content")||MyAMS.config.initContent,document,a)}function o(n){return new Promise(function(a,e){var t=i(n.currentTarget).parents(".modal").first();t.data("modal-result",i(n.currentTarget).data("modal-dismiss-value")),MyAMS.form?MyAMS.form.confirmChangedForm(t).then(function(a){"success"===a&&t.modal("hide")}).then(a,e):(t.modal("hide"),a())})}function d(){0<i(".modal:visible").length&&(i.fn.modal.Constructor.prototype._checkScrollbar(),i.fn.modal.Constructor.prototype._setScrollbar(),i("body").addClass("modal-open"))}function l(a){var e=i(a.target);MyAMS.core.executeFunctionByName(e.data("ams-clear-content")||MyAMS.config.clearContent,document,e).then(function(){!0===e.data("dynamic")&&e.remove()})}var c={init:function(){e||(e=!0,MyAMS.config.ajaxNav&&i(document).off("click",'[data-toggle="modal"]').on("click",'[data-toggle="modal"]',function(a){var e=i(a.currentTarget).data("ams-modal-handler")||t;MyAMS.core.executeFunctionByName(e,document,a)}),i(document).on("shown.bs.modal",".modal",function(a){var e=i(a.currentTarget).data("ams-shown-handler")||n;MyAMS.core.executeFunctionByName(e,document,a)}),i(document).on("hidden.bs.modal",".modal",function(a){var e=i(a.currentTarget).data("ams-hidden-handler")||d;MyAMS.core.executeFunctionByName(e,document,a)}))},open:function(r,n){return new Promise(function(t,a){var d={},c=r;"string"!=typeof r&&(d=r.data(),c=r.attr("href")||d.amsUrl);var e=MyAMS.core.getFunctionByName(c);"function"==typeof e&&(c=e(r)),c||a("No provided URL!"),c.startsWith("#")?(i(c).modal("show"),t()):i.ajax({type:"get",url:c,cache:void 0!==d.amsAllowCache&&d.amsAllowCache,data:n}).then(function(a,e,o){MyAMS.require("ajax").then(function(){var a,e=MyAMS.ajax.getResponse(o),t=e.contentType,n=e.data;switch(t){case"json":MyAMS.ajax.handleJSON(n,i(i(r).data("ams-json-target")||"#content"));break;case"script":case"xml":break;case"html":case"text":default:a=i(n),n={backdrop:void 0===(t=(e=i(".modal-dialog",a.wrap("<div></div>").parent())).data()||{}).backdrop?"static":t.backdrop},n=i.extend({},n,t.amsOptions),n=MyAMS.core.executeFunctionByName(t.amsInit,e,n)||n,i("<div>").addClass("modal fade").data("dynamic",!0).append(a).on("show.bs.modal",s).on("hidden.bs.modal",l).modal(n),MyAMS.stats&&!1!==d.amsLogEvent&&!1!==t.amsLogEvent&&MyAMS.stats.logPageview(c)}}).then(t)})})},close:function(a){"string"==typeof a?a=i(a):void 0===a&&(a=i(".modal-dialog:last"));a=a.objectOrParentWithClass("modal");0<a.length&&a.modal("hide")}};a.modal=c,MyAMS.env.bundle?MyAMS.config.modules.push("modal"):(MyAMS.modal=c,console.debug("MyAMS: modal module loaded..."))});