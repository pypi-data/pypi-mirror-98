{"version":3,"sources":["mod-container.js"],"names":["$","MyAMS","container","deleteElement","action","link","params","require","then","alert","bigBox","status","icon","title","i18n","WARNING","message","CONFIRM_REMOVE","successLabel","CONFIRM","cancelLabel","BTN_CANCEL","row","parents","table","location","data","deleteTarget","objectName","ajax","post","result","xhr","hasClass","DataTable","remove","draw","handle_json","handleJSON","window","env","bundle","config","modules","push","console","debug"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;;AACA;AACA;AACA;AAEA,MAAMA,CAAC,GAAGC,KAAK,CAACD,CAAhB;AAGO,MAAME,SAAS,GAAG;AAExBC,IAAAA,aAAa,EAAE,uBAACC,MAAD,EAAY;AAC1B,aAAO,UAASC,IAAT,EAAeC,MAAf,EAAuB;AAC7BL,QAAAA,KAAK,CAACM,OAAN,CAAc,MAAd,EAAsB,OAAtB,EAA+B,MAA/B,EAAuCC,IAAvC,CAA4C,YAAM;AACjDP,UAAAA,KAAK,CAACQ,KAAN,CAAYC,MAAZ,CAAmB;AAClBC,YAAAA,MAAM,EAAE,QADU;AAElBC,YAAAA,IAAI,EAAE,aAFY;AAGlBC,YAAAA,KAAK,EAAEZ,KAAK,CAACa,IAAN,CAAWC,OAHA;AAIlBC,YAAAA,OAAO,EAAEf,KAAK,CAACa,IAAN,CAAWG,cAJF;AAKlBC,YAAAA,YAAY,EAAEjB,KAAK,CAACa,IAAN,CAAWK,OALP;AAMlBC,YAAAA,WAAW,EAAEnB,KAAK,CAACa,IAAN,CAAWO;AANN,WAAnB,EAOGb,IAPH,CAOQ,UAACG,MAAD,EAAY;AACnB,gBAAIA,MAAM,KAAK,SAAf,EAA0B;AACzB;AACA;;AACD,gBACCW,GAAG,GAAGjB,IAAI,CAACkB,OAAL,CAAa,IAAb,CADP;AAAA,gBAECC,KAAK,GAAGF,GAAG,CAACC,OAAJ,CAAY,OAAZ,CAFT;AAGA,gBAAIE,QAAQ,GAAGpB,IAAI,CAACqB,IAAL,CAAU,cAAV,KAA6BJ,GAAG,CAACI,IAAJ,CAAS,cAAT,CAA7B,IAAyDF,KAAK,CAACE,IAAN,CAAW,cAAX,CAAzD,IAAuF,EAAtG;;AACA,gBAAID,QAAJ,EAAc;AACbA,cAAAA,QAAQ,IAAI,GAAZ;AACA;;AACD,gBACCE,YAAY,GAAGtB,IAAI,CAACqB,IAAL,CAAU,mBAAV,KAAkCJ,GAAG,CAACI,IAAJ,CAAS,mBAAT,CAAlC,IACdF,KAAK,CAACE,IAAN,CAAW,mBAAX,CADc,IACqB,qBAFrC;AAAA,gBAGCE,UAAU,GAAGN,GAAG,CAACI,IAAJ,CAAS,kBAAT,CAHd;AAIAzB,YAAAA,KAAK,CAAC4B,IAAN,CAAWC,IAAX,CAAgBL,QAAQ,GAAGE,YAA3B,EAAyC;AACxC,6BAAeC;AADyB,aAAzC,EAEGpB,IAFH,CAEQ,UAACuB,MAAD,EAASpB,MAAT,EAAiBqB,GAAjB,EAAyB;AAChC,kBAAID,MAAM,CAACpB,MAAP,KAAkB,SAAtB,EAAiC;AAChC,oBAAIa,KAAK,CAACS,QAAN,CAAe,WAAf,CAAJ,EAAiC;AAChCT,kBAAAA,KAAK,CAACU,SAAN,GAAkBZ,GAAlB,CAAsBA,GAAtB,EAA2Ba,MAA3B,GAAoCC,IAApC;AACA,iBAFD,MAEO;AACNd,kBAAAA,GAAG,CAACa,MAAJ;AACA;;AACD,oBAAIJ,MAAM,CAACM,WAAX,EAAwB;AACvBpC,kBAAAA,KAAK,CAAC4B,IAAN,CAAWS,UAAX,CAAsBP,MAAtB;AACA;AACD,eATD,MASO;AACN9B,gBAAAA,KAAK,CAAC4B,IAAN,CAAWS,UAAX,CAAsBP,MAAtB;AACA;AACD,aAfD;AAgBA,WAtCD;AAuCA,SAxCD;AAyCA,OA1CD;AA2CA;AA9CuB,GAAlB;AAkDP;AACA;AACA;;;;AACA,MAAIQ,MAAM,CAACtC,KAAX,EAAkB;AACjB,QAAIA,KAAK,CAACuC,GAAN,CAAUC,MAAd,EAAsB;AACrBxC,MAAAA,KAAK,CAACyC,MAAN,CAAaC,OAAb,CAAqBC,IAArB,CAA0B,WAA1B;AACA,KAFD,MAEO;AACN3C,MAAAA,KAAK,CAACC,SAAN,GAAkBA,SAAlB;AACA2C,MAAAA,OAAO,CAACC,KAAR,CAAc,mCAAd;AACA;AACD","sourcesContent":["/* global MyAMS */\n/**\n * MyAMS container management\n */\n\nconst $ = MyAMS.$;\n\n\nexport const container = {\n\n\tdeleteElement: (action) => {\n\t\treturn function(link, params) {\n\t\t\tMyAMS.require('ajax', 'alert', 'i18n').then(() => {\n\t\t\t\tMyAMS.alert.bigBox({\n\t\t\t\t\tstatus: 'danger',\n\t\t\t\t\ticon: 'fas fa-bell',\n\t\t\t\t\ttitle: MyAMS.i18n.WARNING,\n\t\t\t\t\tmessage: MyAMS.i18n.CONFIRM_REMOVE,\n\t\t\t\t\tsuccessLabel: MyAMS.i18n.CONFIRM,\n\t\t\t\t\tcancelLabel: MyAMS.i18n.BTN_CANCEL\n\t\t\t\t}).then((status) => {\n\t\t\t\t\tif (status !== 'success') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst\n\t\t\t\t\t\trow = link.parents('tr'),\n\t\t\t\t\t\ttable = row.parents('table');\n\t\t\t\t\tlet location = link.data('ams-location') || row.data('ams-location') || table.data('ams-location') || '';\n\t\t\t\t\tif (location) {\n\t\t\t\t\t\tlocation += '/';\n\t\t\t\t\t}\n\t\t\t\t\tconst\n\t\t\t\t\t\tdeleteTarget = link.data('ams-delete-target') || row.data('ams-delete-target') ||\n\t\t\t\t\t\t\ttable.data('ams-delete-target') || 'delete-element.json',\n\t\t\t\t\t\tobjectName = row.data('ams-element-name');\n\t\t\t\t\tMyAMS.ajax.post(location + deleteTarget, {\n\t\t\t\t\t\t'object_name': objectName\n\t\t\t\t\t}).then((result, status, xhr) => {\n\t\t\t\t\t\tif (result.status === 'success') {\n\t\t\t\t\t\t\tif (table.hasClass('datatable')) {\n\t\t\t\t\t\t\t\ttable.DataTable().row(row).remove().draw();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\trow.remove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (result.handle_json) {\n\t\t\t\t\t\t\t\tMyAMS.ajax.handleJSON(result);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tMyAMS.ajax.handleJSON(result);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t}\n};\n\n\n/**\n * Global module initialization\n */\nif (window.MyAMS) {\n\tif (MyAMS.env.bundle) {\n\t\tMyAMS.config.modules.push('container');\n\t} else {\n\t\tMyAMS.container = container;\n\t\tconsole.debug(\"MyAMS: container module loaded...\");\n\t}\n}\n"],"file":"mod-container-dev.js"}