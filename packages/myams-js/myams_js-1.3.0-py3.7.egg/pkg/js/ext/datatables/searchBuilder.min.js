!function(){"use strict";
/*! DateTime picker for DataTables.net v0.0.8
	 *
	 * Â©2020 SpryMedia Ltd, all rights reserved.
	 * License: MIT datatables.net/license/mit
	 */var t,i,e;t=function(t,i,e,s){var n=i.moment?i.moment:i.dayjs?i.dayjs:null,a=function(i,e){this.c=t.extend(!0,{},a.defaults,e);var s=this.c.classPrefix,o=this.c.i18n;if(!n&&"YYYY-MM-DD"!==this.c.format)throw"DateTime: Without momentjs or dayjs only the format 'YYYY-MM-DD' can be used";"string"==typeof this.c.minDate&&(this.c.minDate=new Date(this.c.minDate)),"string"==typeof this.c.maxDate&&(this.c.maxDate=new Date(this.c.maxDate));var r=t('<div class="'+s+'"><div class="'+s+'-date"><div class="'+s+'-title"><div class="'+s+'-iconLeft"><button>'+o.previous+'</button></div><div class="'+s+'-iconRight"><button>'+o.next+'</button></div><div class="'+s+'-label"><span></span><select class="'+s+'-month"></select></div><div class="'+s+'-label"><span></span><select class="'+s+'-year"></select></div></div><div class="'+s+'-calendar"></div></div><div class="'+s+'-time"><div class="'+s+'-hours"></div><div class="'+s+'-minutes"></div><div class="'+s+'-seconds"></div></div><div class="'+s+'-error"></div></div>');this.dom={container:r,date:r.find("."+s+"-date"),title:r.find("."+s+"-title"),calendar:r.find("."+s+"-calendar"),time:r.find("."+s+"-time"),error:r.find("."+s+"-error"),input:t(i)},this.s={d:null,display:null,minutesRange:null,secondsRange:null,namespace:"dateime-"+a._instance++,parts:{date:null!==this.c.format.match(/[YMD]|L(?!T)|l/),time:null!==this.c.format.match(/[Hhm]|LT|LTS/),seconds:-1!==this.c.format.indexOf("s"),hours12:null!==this.c.format.match(/[haA]/)}},this.dom.container.append(this.dom.date).append(this.dom.time).append(this.dom.error),this.dom.date.append(this.dom.title).append(this.dom.calendar),this._constructor()};return t.extend(a.prototype,{destroy:function(){this._hide(),this.dom.container.off().empty(),this.dom.input.off(".datetime")},errorMsg:function(t){var i=this.dom.error;return t?i.html(t):i.empty(),this},hide:function(){return this._hide(),this},max:function(t){return this.c.maxDate="string"==typeof t?new Date(t):t,this._optionsTitle(),this._setCalander(),this},min:function(t){return this.c.minDate="string"==typeof t?new Date(t):t,this._optionsTitle(),this._setCalander(),this},owns:function(i){return t(i).parents().filter(this.dom.container).length>0},val:function(t,i){if(t===s)return this.s.d;if(t instanceof Date)this.s.d=this._dateToUtc(t);else if(null===t||""===t)this.s.d=null;else if("--now"===t)this.s.d=new Date;else if("string"==typeof t)if(n){var e=n.utc(t,this.c.format,this.c.locale,this.c.strict);this.s.d=e.isValid()?e.toDate():null}else{var a=t.match(/(\d{4})\-(\d{2})\-(\d{2})/);this.s.d=a?new Date(Date.UTC(a[1],a[2]-1,a[3])):null}return(i||i===s)&&(this.s.d?this._writeOutput():this.dom.input.val(t)),this.s.d||(this.s.d=this._dateToUtc(new Date)),this.s.display=new Date(this.s.d.toString()),this.s.display.setUTCDate(1),this._setTitle(),this._setCalander(),this._setTime(),this},_constructor:function(){var i=this,e=this.c.classPrefix,s=function(){i.c.onChange.call(i,i.dom.input.val(),i.s.d,i.dom.input)};this.s.parts.date||this.dom.date.css("display","none"),this.s.parts.time||this.dom.time.css("display","none"),this.s.parts.seconds||(this.dom.time.children("div."+e+"-seconds").remove(),this.dom.time.children("span").eq(1).remove()),this._optionsTitle(),this.dom.input.attr("autocomplete","off").on("focus.datetime click.datetime",(function(){i.dom.container.is(":visible")||i.dom.input.is(":disabled")||(i.val(i.dom.input.val(),!1),i._show())})).on("keyup.datetime",(function(){i.dom.container.is(":visible")&&i.val(i.dom.input.val(),!1)})),this.dom.container.on("change","select",(function(){var n=t(this),a=n.val();if(n.hasClass(e+"-month"))i._correctMonth(i.s.display,a),i._setTitle(),i._setCalander();else if(n.hasClass(e+"-year"))i.s.display.setUTCFullYear(a),i._setTitle(),i._setCalander();else if(n.hasClass(e+"-hours")||n.hasClass(e+"-ampm")){if(i.s.parts.hours12){var o=1*t(i.dom.container).find("."+e+"-hours").val(),r="pm"===t(i.dom.container).find("."+e+"-ampm").val();i.s.d.setUTCHours(12!==o||r?r&&12!==o?o+12:o:0)}else i.s.d.setUTCHours(a);i._setTime(),i._writeOutput(!0),s()}else n.hasClass(e+"-minutes")?(i.s.d.setUTCMinutes(a),i._setTime(),i._writeOutput(!0),s()):n.hasClass(e+"-seconds")&&(i.s.d.setSeconds(a),i._setTime(),i._writeOutput(!0),s());i.dom.input.focus(),i._position()})).on("click",(function(n){var a=i.s.d,o=n.target.nodeName.toLowerCase(),r="span"===o?n.target.parentNode:n.target;if("select"!==(o=r.nodeName.toLowerCase()))if(n.stopPropagation(),"button"===o){var d=t(r),l=d.parent();if(l.hasClass("disabled")&&!l.hasClass("range"))return void d.blur();if(l.hasClass(e+"-iconLeft"))i.s.display.setUTCMonth(i.s.display.getUTCMonth()-1),i._setTitle(),i._setCalander(),i.dom.input.focus();else if(l.hasClass(e+"-iconRight"))i._correctMonth(i.s.display,i.s.display.getUTCMonth()+1),i._setTitle(),i._setCalander(),i.dom.input.focus();else if(d.parents("."+e+"-time").length){var c=d.data("value"),u=d.data("unit");if("minutes"===u){if(l.hasClass("disabled")&&l.hasClass("range"))return i.s.minutesRange=c,void i._setTime();i.s.minutesRange=null}if("seconds"===u){if(l.hasClass("disabled")&&l.hasClass("range"))return i.s.secondsRange=c,void i._setTime();i.s.secondsRange=null}if("am"===c){if(!(a.getUTCHours()>=12))return;c=a.getUTCHours()-12}else if("pm"===c){if(!(a.getUTCHours()<12))return;c=a.getUTCHours()+12}a["hours"===u?"setUTCHours":"minutes"===u?"setUTCMinutes":"setSeconds"](c),i._setTime(),i._writeOutput(!0),s()}else a||(a=i._dateToUtc(new Date)),a.setUTCDate(1),a.setUTCFullYear(d.data("year")),a.setUTCMonth(d.data("month")),a.setUTCDate(d.data("day")),i._writeOutput(!0),i.s.parts.time?i._setCalander():setTimeout((function(){i._hide()}),10),s()}else i.dom.input.focus()}))},_compareDates:function(t,i){return this._dateToUtcString(t)===this._dateToUtcString(i)},_correctMonth:function(t,i){var e=this._daysInMonth(t.getUTCFullYear(),i),s=t.getUTCDate()>e;t.setUTCMonth(i),s&&(t.setUTCDate(e),t.setUTCMonth(i))},_daysInMonth:function(t,i){return[31,t%4!=0||t%100==0&&t%400!=0?28:29,31,30,31,30,31,31,30,31,30,31][i]},_dateToUtc:function(t){return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()))},_dateToUtcString:function(t){return t.getUTCFullYear()+"-"+this._pad(t.getUTCMonth()+1)+"-"+this._pad(t.getUTCDate())},_hide:function(){var s=this.s.namespace;this.dom.container.detach(),t(i).off("."+s),t(e).off("keydown."+s),t("div.dataTables_scrollBody").off("scroll."+s),t("div.DTE_Body_Content").off("scroll."+s),t("body").off("click."+s)},_hours24To12:function(t){return 0===t?12:t>12?t-12:t},_htmlDay:function(t){if(t.empty)return'<td class="empty"></td>';var i=["selectable"],e=this.c.classPrefix;return t.disabled&&i.push("disabled"),t.today&&i.push("now"),t.selected&&i.push("selected"),'<td data-day="'+t.day+'" class="'+i.join(" ")+'"><button class="'+e+"-button "+e+'-day" type="button" data-year="'+t.year+'" data-month="'+t.month+'" data-day="'+t.day+'"><span>'+t.day+"</span></button></td>"},_htmlMonth:function(i,e){var s=this._dateToUtc(new Date),n=this._daysInMonth(i,e),a=new Date(Date.UTC(i,e,1)).getUTCDay(),o=[],r=[];this.c.firstDay>0&&(a-=this.c.firstDay)<0&&(a+=7);for(var d=n+a,l=d;l>7;)l-=7;d+=7-l;var c=this.c.minDate,u=this.c.maxDate;c&&(c.setUTCHours(0),c.setUTCMinutes(0),c.setSeconds(0)),u&&(u.setUTCHours(23),u.setUTCMinutes(59),u.setSeconds(59));for(var h=0,p=0;h<d;h++){var m=new Date(Date.UTC(i,e,h-a+1)),f=!!this.s.d&&this._compareDates(m,this.s.d),v=this._compareDates(m,s),g=h<a||h>=n+a,C=c&&m<c||u&&m>u,b=this.c.disableDays;t.isArray(b)&&-1!==t.inArray(m.getUTCDay(),b)?C=!0:"function"==typeof b&&!0===b(m)&&(C=!0);var y={day:h-a+1,month:e,year:i,selected:f,today:v,disabled:C,empty:g};r.push(this._htmlDay(y)),7==++p&&(this.c.showWeekNumber&&r.unshift(this._htmlWeekOfYear(h-a,e,i)),o.push("<tr>"+r.join("")+"</tr>"),r=[],p=0)}var _=this.c.classPrefix,T=_+"-table";if(this.c.showWeekNumber&&(T+=" weekNumber"),c){var I=c>=new Date(Date.UTC(i,e,1,0,0,0));this.dom.title.find("div."+_+"-iconLeft").css("display",I?"none":"block")}if(u){var V=u<new Date(Date.UTC(i,e+1,1,0,0,0));this.dom.title.find("div."+_+"-iconRight").css("display",V?"none":"block")}return'<table class="'+T+'"><thead>'+this._htmlMonthHead()+"</thead><tbody>"+o.join("")+"</tbody></table>"},_htmlMonthHead:function(){var t=[],i=this.c.firstDay,e=this.c.i18n,s=function(t){for(t+=i;t>=7;)t-=7;return e.weekdays[t]};this.c.showWeekNumber&&t.push("<th></th>");for(var n=0;n<7;n++)t.push("<th>"+s(n)+"</th>");return t.join("")},_htmlWeekOfYear:function(t,i,e){var s=new Date(e,i,t,0,0,0,0);s.setDate(s.getDate()+4-(s.getDay()||7));var n=new Date(e,0,1),a=Math.ceil(((s-n)/864e5+1)/7);return'<td class="'+this.c.classPrefix+'-week">'+a+"</td>"},_options:function(t,i,e){e||(e=i);var s=this.dom.container.find("select."+this.c.classPrefix+"-"+t);s.empty();for(var n=0,a=i.length;n<a;n++)s.append('<option value="'+i[n]+'">'+e[n]+"</option>")},_optionSet:function(t,i){var e=this.dom.container.find("select."+this.c.classPrefix+"-"+t),s=e.parent().children("span");e.val(i);var n=e.find("option:selected");s.html(0!==n.length?n.text():this.c.i18n.unknown)},_optionsTime:function(i,e,s,n,a){var o,r,d=this.c.classPrefix,l=this.dom.container.find("div."+d+"-"+i),c=12===e?function(t){return t}:this._pad,u=(d=this.c.classPrefix)+"-table",h=this.c.i18n;if(l.length){var p="",m=10,f=function(a,o,r){12===e&&s>=12&&"number"==typeof a&&(a+=12);var l=s===a||"am"===a&&s<12||"pm"===a&&s>=12?"selected":"";return n&&-1===t.inArray(a,n)&&(l+=" disabled"),r&&(l+=" "+r),'<td class="selectable '+l+'"><button class="'+d+"-button "+d+'-day" type="button" data-unit="'+i+'" data-value="'+a+'"><span>'+o+"</span></button></td>"};if(12===e){for(p+="<tr>",o=1;o<=6;o++)p+=f(o,c(o));for(p+=f("am",h.amPm[0]),p+="</tr>",p+="<tr>",o=7;o<=12;o++)p+=f(o,c(o));p+=f("pm",h.amPm[1]),p+="</tr>",m=7}else if(24===e){var v=0;for(r=0;r<4;r++){for(p+="<tr>",o=0;o<6;o++)p+=f(v,c(v)),v++;p+="</tr>"}m=6}else{for(p+="<tr>",r=0;r<60;r+=10)p+=f(r,c(r),"range");p+="</tr>",p+='</tbody></thead><table class="'+u+" "+u+'-nospace"><tbody>';var g=null!==a?a:10*Math.floor(s/10);for(p+="<tr>",r=g+1;r<g+10;r++)p+=f(r,c(r));p+="</tr>",m=6}l.empty().append('<table class="'+u+'"><thead><tr><th colspan="'+m+'">'+h[i]+"</th></tr></thead><tbody>"+p+"</tbody></table>")}},_optionsTitle:function(){var t=this.c.i18n,i=this.c.minDate,e=this.c.maxDate,s=i?i.getFullYear():null,n=e?e.getFullYear():null,a=null!==s?s:(new Date).getFullYear()-this.c.yearRange,o=null!==n?n:(new Date).getFullYear()+this.c.yearRange;this._options("month",this._range(0,11),t.months),this._options("year",this._range(a,o))},_pad:function(t){return t<10?"0"+t:t},_position:function(){var e="input"===this.c.attachTo?this.dom.input.position():this.dom.input.offset(),s=this.dom.container,n=this.dom.input.outerHeight();this.s.parts.date&&this.s.parts.time&&t(i).width()>550?s.addClass("horizontal"):s.removeClass("horizontal"),"input"===this.c.attachTo?s.css({top:e.top+n,left:e.left}).insertAfter(this.dom.input):s.css({top:e.top+n,left:e.left}).appendTo("body");var a=s.outerHeight(),o=s.outerWidth(),r=t(i).scrollTop();if(e.top+n+a-r>t(i).height()){var d=e.top-a;s.css("top",d<0?0:d)}if(o+e.left>t(i).width()){var l=t(i).width()-o;s.css("left",l<0?0:l)}},_range:function(t,i,e){var s=[];e||(e=1);for(var n=t;n<=i;n+=e)s.push(n);return s},_setCalander:function(){this.s.display&&this.dom.calendar.empty().append(this._htmlMonth(this.s.display.getUTCFullYear(),this.s.display.getUTCMonth()))},_setTitle:function(){this._optionSet("month",this.s.display.getUTCMonth()),this._optionSet("year",this.s.display.getUTCFullYear())},_setTime:function(){var t=this,i=this.s.d,e=i?i.getUTCHours():0,s=function(i){return t.c[i+"Available"]?t.c[i+"Available"]:t._range(0,59,t.c[i+"Increment"])};this._optionsTime("hours",this.s.parts.hours12?12:24,e,this.c.hoursAvailable),this._optionsTime("minutes",60,i?i.getUTCMinutes():0,s("minutes"),this.s.minutesRange),this._optionsTime("seconds",60,i?i.getSeconds():0,s("seconds"),this.s.secondsRange)},_show:function(){var s=this,n=this.s.namespace;this._position(),t(i).on("scroll."+n+" resize."+n,(function(){s._hide()})),t("div.DTE_Body_Content").on("scroll."+n,(function(){s._hide()})),t("div.dataTables_scrollBody").on("scroll."+n,(function(){s._hide()}));var a=this.dom.input[0].offsetParent;a!==e.body&&t(a).on("scroll."+n,(function(){s._hide()})),t(e).on("keydown."+n,(function(t){9!==t.keyCode&&27!==t.keyCode&&13!==t.keyCode||s._hide()})),setTimeout((function(){t("body").on("click."+n,(function(i){t(i.target).parents().filter(s.dom.container).length||i.target===s.dom.input[0]||s._hide()}))}),10)},_writeOutput:function(t){var i=this.s.d,e=n?n.utc(i,s,this.c.locale,this.c.strict).format(this.c.format):i.getUTCFullYear()+"-"+this._pad(i.getUTCMonth()+1)+"-"+this._pad(i.getUTCDate());this.dom.input.val(e).trigger("change",{write:i}),t&&this.dom.input.focus()}}),a.use=function(t){n=t},a._instance=0,a.defaults={attachTo:"body",classPrefix:"dt-datetime",disableDays:null,firstDay:1,format:"YYYY-MM-DD",hoursAvailable:null,i18n:{previous:"Previous",next:"Next",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],amPm:["am","pm"],hours:"Hour",minutes:"Minute",seconds:"Second",unknown:"-"},maxDate:null,minDate:null,minutesAvailable:null,minutesIncrement:1,strict:!0,locale:"en",onChange:function(){},secondsAvailable:null,secondsIncrement:1,showWeekNumber:!1,yearRange:25},i.DateTime||(i.DateTime=a),t.fn.dtDateTime=function(t){return this.each((function(){new a(this,t)}))},t.dataTable&&(t.dataTable.DateTime=a,t.DataTable.DateTime=a),a},"function"==typeof define&&define.amd?define(["jquery"],(function(i){return t(i,window,document)})):"object"==typeof exports?module.exports=function(i,e){return i||(i=window),t(e,i,i.document)}:t(jQuery,window,document);var s=window.moment;function n(t){i=t,e=t.fn.dataTable}var a,o,r=function(){function t(s,n,a,o,r){var d=this;if(void 0===o&&(o=0),void 0===r&&(r=1),!e||!e.versionCheck||!e.versionCheck("1.10.0"))throw new Error("SearchPane requires DataTables 1.10 or newer");if(this.classes=i.extend(!0,{},t.classes),this.c=i.extend(!0,{},t.defaults,i.fn.dataTable.ext.searchBuilder,n),this.s={condition:void 0,conditions:new Map,data:void 0,dataIdx:-1,dataPoints:[],depth:r,dt:s,filled:!1,index:o,momentFormat:!1,topGroup:a,type:"",value:[]},this.dom={buttons:i("<div/>").addClass(this.classes.buttonContainer),condition:i("<select disabled/>").addClass(this.classes.condition).addClass(this.classes.dropDown).addClass(this.classes.italic),conditionTitle:i('<option value="" disabled selected hidden/>').text(this.s.dt.i18n("searchBuilder.condition","Condition")),container:i("<div/>").addClass(this.classes.container),data:i("<select/>").addClass(this.classes.data).addClass(this.classes.dropDown).addClass(this.classes.italic),dataTitle:i('<option value="" disabled selected hidden/>').text(this.s.dt.i18n("searchBuilder.data","Data")),defaultValue:i("<select disabled/>").addClass(this.classes.value).addClass(this.classes.dropDown),delete:i("<button>&times</button>").addClass(this.classes.delete).addClass(this.classes.button).attr("title",this.s.dt.i18n("searchBuilder.deleteTitle","Delete filtering rule")),left:i("<button><</button>").addClass(this.classes.left).addClass(this.classes.button).attr("title",this.s.dt.i18n("searchBuilder.leftTitle","Outdent criteria")),right:i("<button>></button>").addClass(this.classes.right).addClass(this.classes.button).attr("title",this.s.dt.i18n("searchBuilder.rightTitle","Indent criteria")),value:[i("<select disabled/>").addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.italic)],valueTitle:i('<option value="" disabled selected hidden/>').text(this.s.dt.i18n("searchBuilder.value","Value"))},this.c.greyscale){i(this.dom.data).addClass(this.classes.greyscale),i(this.dom.condition).addClass(this.classes.greyscale);for(var l=0,c=this.dom.value;l<c.length;l++){var u=c[l];i(u).addClass(this.classes.greyscale)}}return this.s.dt.on("draw.dtsp",(function(){d._adjustCriteria()})),this.s.dt.on("buttons-action",(function(){d._adjustCriteria()})),i(window).on("resize.dtsp",e.util.throttle((function(){d._adjustCriteria()}))),this._buildCriteria(),this}return t.prototype.updateArrows=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0),i(this.dom.container).empty().append(this.dom.data).append(this.dom.condition).append(this.dom.value[0]),i(this.dom.value[0]).trigger("dtsb-inserted");for(var s=1;s<this.dom.value.length;s++)i(this.dom.container).append(this.dom.value[s]),i(this.dom.value[s]).trigger("dtsb-inserted");this.s.depth>1&&i(this.dom.buttons).append(this.dom.left),(!1===this.c.depthLimit||this.s.depth<this.c.depthLimit)&&t&&i(this.dom.buttons).append(this.dom.right),i(this.dom.buttons).append(this.dom.delete),i(this.dom.container).append(this.dom.buttons),e&&this._adjustCriteria()},t.prototype.destroy=function(){i(this.dom.data).off(".dtsb"),i(this.dom.condition).off(".dtsb"),i(this.dom.delete).off(".dtsb");for(var t=0,e=this.dom.value;t<e.length;t++){var s=e[t];i(s).off(".dtsb")}i(this.dom.container).remove()},t.prototype.search=function(t){var i=this.s.conditions.get(this.s.condition);if(void 0!==this.s.condition&&void 0!==i)return i.search(t[this.s.dataIdx],this.s.value,this)},t.prototype.getDetails=function(){return{condition:this.s.condition,data:this.s.data,value:this.s.value}},t.prototype.getNode=function(){return this.dom.container},t.prototype.populate=function(){this._populateData(),-1!==this.s.dataIdx&&(this._populateCondition(),void 0!==this.s.condition&&this._populateValue())},t.prototype.rebuild=function(t){var e,s=!1;if(this._populateData(),void 0!==t.data){var n=this.classes.italic,a=this.dom.data;i(this.dom.data).children("option").each((function(){i(this).text()===t.data&&(i(this).attr("selected",!0),i(a).removeClass(n),s=!0,e=i(this).val())}))}if(s){var o;this.s.data=t.data,this.s.dataIdx=e,i(this.dom.dataTitle).remove(),this._populateCondition(),i(this.dom.conditionTitle).remove();this.s.conditions;i(this.dom.condition).children("option").each((function(){void 0!==t.condition&&i(this).val()===t.condition&&"string"==typeof t.condition&&(i(this).attr("selected",!0),o=i(this).val())})),this.s.condition=o,void 0!==this.s.condition?(i(this.dom.conditionTitle).remove(),i(this.dom.condition).removeClass(this.classes.italic),this._populateValue(t)):i(this.dom.conditionTitle).prependTo(this.dom.condition).attr("selected",!0)}},t.prototype.setListeners=function(){var t=this;i(this.dom.data).unbind("input").on("input",(function(){i(t.dom.dataTitle).attr("selected",!1),i(t.dom.data).removeClass(t.classes.italic),t.s.dataIdx=i(t.dom.data).children("option:selected").val(),t.s.data=i(t.dom.data).children("option:selected").text(),t._clearCondition(),t._clearValue(),t._populateCondition(),t.s.filled&&(t.s.filled=!1,t.s.dt.draw(),t.setListeners()),t.s.dt.state.save()})),i(this.dom.condition).unbind("input").on("input",(function(){i(t.dom.conditionTitle).attr("selected",!1),i(t.dom.condition).removeClass(t.classes.italic);for(var e=i(t.dom.condition).children("option:selected").val(),s=0,n=Array.from(t.s.conditions.keys());s<n.length;s++){if(n[s]===e){t.s.condition=e;break}}t._clearValue(),t._populateValue();for(var a=0,o=t.dom.value;a<o.length;a++){var r=o[a];t.s.filled&&0!==i(t.dom.container).has(r).length&&(t.s.filled=!1,t.s.dt.draw(),t.setListeners())}t.s.dt.draw()}))},t.prototype._adjustCriteria=function(){if(0!==i(document).has(this.dom.container).length){var t,e,s=this.dom.value[this.dom.value.length-1];if(0!==i(this.dom.container).has(s).length){e=i(s).outerWidth(!0),t=i(s).offset().left+e;var n=i(this.dom.left).offset(),a=i(this.dom.right).offset(),o=i(this.dom.delete).offset(),r=0!==i(this.dom.container).has(this.dom.left).length,d=0!==i(this.dom.container).has(this.dom.right).length,l=r?n.left:d?a.left:o.left;l-t<15||r&&n.top!==o.top||d&&a.top!==o.top?(i(this.dom.container).parent().addClass(this.classes.vertical),i(this.s.topGroup).trigger("dtsb-redrawContents")):l-(i(this.dom.data).offset().left+i(this.dom.data).outerWidth(!0)+i(this.dom.condition).outerWidth(!0)+e)>15&&(i(this.dom.container).parent().removeClass(this.classes.vertical),i(this.s.topGroup).trigger("dtsb-redrawContents"))}}},t.prototype._buildCriteria=function(){i(this.dom.data).append(this.dom.dataTitle),i(this.dom.condition).append(this.dom.conditionTitle),i(this.dom.container).append(this.dom.data).append(this.dom.condition);for(var t=0,e=this.dom.value;t<e.length;t++){var s=e[t];i(s).append(this.dom.valueTitle),i(this.dom.container).append(s)}i(this.dom.container).append(this.dom.delete).append(this.dom.right),this.setListeners()},t.prototype._clearCondition=function(){i(this.dom.condition).empty(),i(this.dom.conditionTitle).attr("selected",!0).attr("disabled",!0),i(this.dom.condition).append(this.dom.conditionTitle),this.s.conditions=new Map,this.s.condition=void 0},t.prototype._clearValue=function(){if(void 0!==this.s.condition){for(var e=0,s=this.dom.value;e<s.length;e++){var n=s[e];i(n).remove()}var a=this.s.conditions.get(this.s.condition).init(this,t.updateListener);this.dom.value=Array.isArray(a)?a:[a],i(this.dom.value[0]).insertAfter(this.dom.condition).trigger("dtsb-inserted");for(var o=1;o<this.dom.value.length;o++)i(this.dom.value[o]).insertAfter(this.dom.value[o-1]).trigger("dtsb-inserted")}else{for(var r=0,d=this.dom.value;r<d.length;r++){n=d[r];i(n).remove()}i(this.dom.valueTitle).attr("selected",!0).attr("disabled",!1),i(this.dom.defaultValue).append(this.dom.valueTitle).insertAfter(this.dom.condition)}this.s.value=[]},t.prototype._populateCondition=function(){var t=[];if(0===this.s.conditions.size){var e=i(this.dom.data).children("option:selected").val();this.s.type=this.s.dt.columns().type().toArray()[e],null===this.s.type&&(this.s.dt.draw(),this.setListeners(),this.s.type=this.s.dt.columns().type().toArray()[e]),i(this.dom.condition).attr("disabled",!1).empty().append(this.dom.conditionTitle).addClass(this.classes.italic),i(this.dom.conditionTitle).attr("selected",!0);var s=void 0!==this.c.conditions[this.s.type]?this.c.conditions[this.s.type]:-1!==this.s.type.indexOf("moment")&&void 0!==i.fn.dataTable.moment?this.c.conditions.moment:this.c.conditions.string;-1!==this.s.type.indexOf("moment")&&(this.s.momentFormat=this.s.type.replace(/moment\-/g,""));for(var n=0,a=Object.keys(s);n<a.length;n++){null!==s[d=a[n]]&&(this.s.conditions.set(d,s[d]),t.push(i("<option>",{text:s[d].conditionName,value:d}).addClass(this.classes.option).addClass(this.classes.notItalic)))}}else{if(!(this.s.conditions.size>0))return void i(this.dom.condition).attr("disabled",!0).addClass(this.classes.italic);i(this.dom.condition).empty().attr("disabled",!1).addClass(this.classes.italic);for(var o=0,r=Array.from(this.s.conditions.keys());o<r.length;o++){var d=r[o],l=this.s.conditions.get(d).conditionName,c=i("<option>",{text:l,value:d}).addClass(this.classes.option).addClass(this.classes.notItalic);void 0!==this.s.condition&&this.s.condition===l&&(i(c).attr("selected",!0),i(this.dom.condition).removeClass(this.classes.italic)),t.push(c)}}t.sort((function(t,e){return i(t).val()<i(e).val()?-1:i(t).val()<i(e).val()?1:0}));for(var u=0,h=t;u<h.length;u++){var p=h[u];i(this.dom.condition).append(p)}},t.prototype._populateData=function(){var t=this;if(i(this.dom.data).empty().append(this.dom.dataTitle),0===this.s.dataPoints.length)this.s.dt.columns().every((function(e){if(!0===t.c.columns||-1!==t.s.dt.columns(t.c.columns).indexes().toArray().indexOf(e)){for(var s=!1,n=0,a=t.s.dataPoints;n<a.length;n++){if(a[n].index===e){s=!0;break}}if(!s){var o={text:t.s.dt.settings()[0].aoColumns[e].sTitle,index:e};t.s.dataPoints.push(o),i(t.dom.data).append(i("<option>",{text:o.text,value:o.index}).addClass(t.classes.option).addClass(t.classes.notItalic))}}}));else for(var e=function(e){s.s.dt.columns().every((function(i){t.s.dt.settings()[0].aoColumns[i].sTitle===e.text&&(e.index=i)}));var n=i("<option>",{text:e.text,value:e.index}).addClass(s.classes.option).addClass(s.classes.notItalic);s.s.data===e.text&&(s.s.dataIdx=e.index,i(n).attr("selected",!0),i(s.dom.data).removeClass(s.classes.italic)),i(s.dom.data).append(n)},s=this,n=0,a=this.s.dataPoints;n<a.length;n++){e(a[n])}},t.prototype._populateValue=function(e){var s=this,n=this.s.filled;this.s.filled=!1,i(this.dom.defaultValue).remove();for(var a=0,o=this.dom.value;a<o.length;a++){var r=o[a];i(r).remove()}var d=i(this.dom.container).children();if(d.length>3)for(var l=2;l<d.length-1;l++)i(d[l]).remove();void 0!==e&&this.s.dt.columns().every((function(t){s.s.dt.settings()[0].aoColumns[t].sTitle===e.data&&(s.s.dataIdx=t)}));var c=this.s.conditions.get(this.s.condition).init(this,t.updateListener,void 0!==e?e.value:void 0);void 0!==e&&void 0!==e.value&&(this.s.value=e.value),this.dom.value=Array.isArray(c)?c:[c],i(this.dom.value[0]).insertAfter(this.dom.condition).trigger("dtsb-inserted");for(l=1;l<this.dom.value.length;l++)i(this.dom.value[l]).insertAfter(this.dom.value[l-1]).trigger("dtsb-inserted");this.s.filled=this.s.conditions.get(this.s.condition).isInputValid(this.dom.value,this),this.setListeners(),n!==this.s.filled&&(this.s.dt.draw(),this.setListeners())},t.version="0.0.1",t.classes={button:"dtsb-button",buttonContainer:"dtsb-buttonContainer",condition:"dtsb-condition",container:"dtsb-criteria",data:"dtsb-data",delete:"dtsb-delete",dropDown:"dtsb-dropDown",greyscale:"dtsb-greyscale",input:"dtsb-input",italic:"dtsb-italic",joiner:"dtsp-joiner",left:"dtsb-left",notItalic:"dtsb-notItalic",option:"dtsb-option",right:"dtsb-right",value:"dtsb-value",vertical:"dtsb-vertical"},t.initSelect=function(e,s,n){void 0===n&&(n=null);for(var a=i(e.dom.data).children("option:selected").val(),o=e.s.dt.rows().indexes().toArray(),r=e.s.dt.settings()[0],d=i("<select/>").addClass(t.classes.value).addClass(t.classes.dropDown).addClass(t.classes.italic).append(e.dom.valueTitle).on("input",(function(){i(this).removeClass(t.classes.italic),s(e,this)})),l=[],c=[],u=0,h=o;u<h.length;u++){var p=h[u],m={filter:r.oApi._fnGetCellData(r,p,a,e.c.orthogonal.search),index:p,text:r.oApi._fnGetCellData(r,p,a,"display")},f=i("<option>",{text:e.s.type.includes("html")?m.text.replace(/(<([^>]+)>)/gi,""):m.text,value:e.s.type.includes("html")?m.filter.replace(/(<([^>]+)>)/gi,""):m.filter}).addClass(e.classes.option).addClass(e.classes.notItalic),v=i(f).val();-1===l.indexOf(v)&&(l.push(v),c.push(f),null!==n&&f.val()===n[0]&&(f.attr("selected",!0),e.dom.valueTitle.remove(),i(d).removeClass(t.classes.italic)))}c.sort((function(t,s){return"string"===e.s.type||"num"===e.s.type||"html"===e.s.type||"html-num"===e.s.type?i(t).val()<i(s).val()?-1:i(t).val()<i(s).val()?1:0:"num-fmt"===e.s.type||"html-num-fmt"===e.s.type?+i(t).val().replace(/[^0-9.]/g,"")<+i(s).val().replace(/[^0-9.]/g,"")?-1:+i(t).val().replace(/[^0-9.]/g,"")<+i(s).val().replace(/[^0-9.]/g,"")?1:0:void 0}));for(var g=0,C=c;g<C.length;g++){f=C[g];i(d).append(f)}return d},t.initInput=function(e,s,n){void 0===n&&(n=null);var a=i("<input/>").addClass(t.classes.value).addClass(t.classes.input).on("input",(function(){s(e,this)}));return null!==n&&i(a).val(n[0]),a},t.init2Input=function(e,s,n){void 0===n&&(n=null);var a=[i("<input/>").addClass(t.classes.value).addClass(t.classes.input).on("input",(function(){s(e,this)})),i("<span>").addClass(e.classes.joiner).text("and"),i("<input/>").addClass(t.classes.value).addClass(t.classes.input).on("input",(function(){s(e,this)}))];return null!==n&&(i(a[0]).val(n[0]),i(a[2]).val(n[1])),a},t.initDate=function(e,s,n){void 0===n&&(n=null);var a=i("<input/>").addClass(t.classes.value).addClass(t.classes.input).dtDateTime({attachTo:"input",format:e.s.momentFormat?e.s.momentFormat:void 0}).on("input change",(function(){s(e,this)}));return null!==n&&i(a).val(n[0]),a},t.init2Date=function(e,s,n){void 0===n&&(n=null);var a=[i("<input/>").addClass(t.classes.value).addClass(t.classes.input).dtDateTime({attachTo:"input",format:e.s.momentFormat?e.s.momentFormat:void 0}).on("input change",(function(){s(e,this)})),i("<span>").addClass(e.classes.joiner).text("and"),i("<input/>").addClass(t.classes.value).addClass(t.classes.input).dtDateTime({attachTo:"input",format:e.s.momentFormat?e.s.momentFormat:void 0}).on("input change",(function(){s(e,this)}))];return null!==n&&n.length>0&&(i(a[0]).val(n[0]),i(a[2]).val(n[1])),a},t.isInputValidSelect=function(e){for(var s=!0,n=0,a=e;n<a.length;n++){var o=a[n];i(o).children("option:selected").length===i(o).children("option").length-i(o).children("option."+t.classes.notItalic).length&&1===i(o).children("option:selected").length&&i(o).children("option:selected")[0]===i(o).children("option:hidden")[0]&&(s=!1)}return s},t.isInputValidInput=function(t){for(var e=!0,s=0,n=t;s<n.length;s++){var a=n[s];i(a).is("input")&&0===i(a).val().length&&(e=!1)}return e},t.inputValueSelect=function(t){for(var e=[],s=0,n=t;s<n.length;s++){var a=n[s];i(a).is("select")&&e.push(i(a).children("option:selected").val())}return e},t.inputValueInput=function(t){for(var e=[],s=0,n=t;s<n.length;s++){var a=n[s];i(a).is("input")&&e.push(i(a).val())}return e},t.updateListener=function(t,e){var s=t.s.conditions.get(t.s.condition);t.s.filled=s.isInputValid(t.dom.value,t),t.s.value=s.inputValue(t.dom.value,t),Array.isArray(t.s.value)||(t.s.value=[t.s.value]);for(var n=null,a=null,o=0;o<t.dom.value.length;o++)e===t.dom.value[o][0]&&(n=o,void 0!==e.selectionStart&&(a=e.selectionStart));t.s.dt.draw(),null!==n&&(i(t.dom.value[n]).removeClass(t.classes.italic),i(t.dom.value[n]).focus(),null!==a&&i(t.dom.value[n])[0].setSelectionRange(a,a))},t.dateConditions={"!=":{conditionName:"Not",init:t.initDate,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return(t=t.replace(/(\/|\-|\,)/g,"-"))!==i[0]}},"!between":{conditionName:"Not Between",init:t.init2Date,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return t=t.replace(/(\/|\-|\,)/g,"-"),i[0]<i[1]?!(i[0]<=t&&t<=i[1]):!(i[1]<=t&&t<=i[0])}},"!null":{conditionName:"Not Empty",isInputValid:function(){return!0},init:function(){},inputValue:function(){},search:function(t,i){return!(null==t||0===t.length)}},"<":{conditionName:"Before",init:t.initDate,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return(t=t.replace(/(\/|\-|\,)/g,"-"))<i[0]}},"=":{conditionName:"Equals",init:t.initDate,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return(t=t.replace(/(\/|\-|\,)/g,"-"))===i[0]}},">":{conditionName:"After",init:t.initDate,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return(t=t.replace(/(\/|\-|\,)/g,"-"))>i[0]}},between:{conditionName:"Between",init:t.init2Date,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return t=t.replace(/(\/|\-|\,)/g,"-"),i[0]<i[1]?i[0]<=t&&t<=i[1]:i[1]<=t&&t<=i[0]}},null:{conditionName:"Empty",isInputValid:function(){return!0},init:function(){},inputValue:function(){},search:function(t,i){return null==t||0===t.length}}},t.momentDateConditions={"!=":{conditionName:"Not",init:t.initDate,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i,e){return s(t,e.s.momentFormat).valueOf()!==s(i[0],e.s.momentFormat).valueOf()}},"!between":{conditionName:"Not Between",init:t.init2Date,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i,e){var n=s(t,e.s.momentFormat).valueOf(),a=s(i[0],e.s.momentFormat).valueOf(),o=s(i[1],e.s.momentFormat).valueOf();return a<o?!(+a<=+n&&+n<=+o):!(+o<=+n&&+n<=+a)}},"!null":{conditionName:"Not Empty",isInputValid:function(){return!0},init:function(){},inputValue:function(){},search:function(t,i){return!(null==t||0===t.length)}},"<":{conditionName:"Before",init:t.initDate,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i,e){return s(t,e.s.momentFormat).valueOf()<s(i[0],e.s.momentFormat).valueOf()}},"=":{conditionName:"Equals",init:t.initDate,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i,e){return s(t,e.s.momentFormat).valueOf()===s(i[0],e.s.momentFormat).valueOf()}},">":{conditionName:"After",init:t.initDate,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i,e){return s(t,e.s.momentFormat).valueOf()>s(i[0],e.s.momentFormat).valueOf()}},between:{conditionName:"Between",init:t.init2Date,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i,e){var n=s(t,e.s.momentFormat).valueOf(),a=s(i[0],e.s.momentFormat).valueOf(),o=s(i[1],e.s.momentFormat).valueOf();return a<o?a<=n&&n<=o:o<=n&&n<=a}},null:{conditionName:"Empty",isInputValid:function(){return!0},init:function(){},inputValue:function(){},search:function(t,i){return null==t||0===t.length}}},t.numConditions={"!=":{conditionName:"Not",init:t.initSelect,inputValue:t.inputValueSelect,isInputValid:t.isInputValidSelect,search:function(t,i){return+t!=+i[0]}},"!between":{conditionName:"Not Between",init:t.init2Input,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return+i[0]<+i[1]?!(+i[0]<=+t&&+t<=+i[1]):!(+i[1]<=+t&&+t<=+i[0])}},"!null":{conditionName:"Not Empty",isInputValid:function(){return!0},init:function(){},inputValue:function(){},search:function(t,i){return!(null==t||0===t.length)}},"<":{conditionName:"Less Than",init:t.initInput,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return+t<+i[0]}},"<=":{conditionName:"Less Than Equal To",init:t.initInput,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return+t<=+i[0]}},"=":{conditionName:"Equals",init:t.initSelect,inputValue:t.inputValueSelect,isInputValid:t.isInputValidSelect,search:function(t,i){return+t==+i[0]}},">":{conditionName:"Greater Than",init:t.initInput,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return+t>+i[0]}},">=":{conditionName:"Greater Than Equal To",init:t.initInput,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return+t>=+i[0]}},between:{conditionName:"Between",init:t.init2Input,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return+i[0]<+i[1]?+i[0]<=+t&&+t<=+i[1]:+i[1]<=+t&&+t<=+i[0]}},null:{conditionName:"Empty",init:function(){},inputValue:function(){},isInputValid:function(){return!0},search:function(t,i){return null==t||0===t.length}}},t.numFmtConditions={"!=":{conditionName:"Not",init:t.initSelect,inputValue:t.inputValueSelect,isInputValid:t.isInputValidSelect,search:function(t,i){return+t.replace(/[^0-9.]/g,"")!=+i[0].replace(/[^0-9.]/g,"")}},"!between":{conditionName:"Not Between",init:t.init2Input,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){var e=t.replace(/[^0-9.]/g,""),s=i[0].replace(/[^0-9.]/g,""),n=i[1].replace(/[^0-9.]/g,"");return s<n?!(+s<=+e&&+e<=+n):!(+n<=+e&&+e<=+s)}},"!null":{conditionName:"Not Empty",isInputValid:function(){return!0},init:function(){},inputValue:function(){},search:function(t,i){return!(null==t||0===t.length)}},"<":{conditionName:"Less Than",init:t.initInput,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return+t.replace(/[^0-9.]/g,"")<+i[0].replace(/[^0-9.]/g,"")}},"<=":{conditionName:"Less Than Equal To",init:t.initInput,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return+t.replace(/[^0-9.]/g,"")<=+i[0].replace(/[^0-9.]/g,"")}},"=":{conditionName:"Equals",init:t.initSelect,inputValue:t.inputValueSelect,isInputValid:t.isInputValidSelect,search:function(t,i){return+t.replace(/[^0-9.]/g,"")==+i[0].replace(/[^0-9.]/g,"")}},">":{conditionName:"Greater Than",init:t.initInput,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return+t.replace(/[^0-9.]/g,"")>+i[0].replace(/[^0-9.]/g,"")}},">=":{conditionName:"Greater Than Equal To",init:t.initInput,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return+t.replace(/[^0-9.]/g,"")>=+i[0].replace(/[^0-9.]/g,"")}},between:{conditionName:"Between",init:t.init2Input,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){var e=t.replace(/[^0-9.]/g,""),s=i[0].replace(/[^0-9.]/g,""),n=i[1].replace(/[^0-9.]/g,"");return s<n?+s<=+e&&+e<=+n:+n<=+e&&+e<=+s}},null:{conditionName:"Empty",init:function(){},inputValue:function(){},isInputValid:function(){return!0},search:function(t,i){return null==t||0===t.length}}},t.stringConditions={"!=":{conditionName:"Not",init:t.initSelect,inputValue:t.inputValueSelect,isInputValid:t.isInputValidInput,search:function(t,i){return t!==i[0]}},"!null":{conditionName:"Not Empty",isInputValid:function(){return!0},init:function(){},inputValue:function(){},search:function(t,i){return!(null==t||0===t.length)}},"=":{conditionName:"Equals",init:t.initSelect,inputValue:t.inputValueSelect,isInputValid:t.isInputValidSelect,search:function(t,i){return t===i[0]}},contains:{conditionName:"Contains",init:t.initInput,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return t.toLowerCase().includes(i[0].toLowerCase())}},ends:{conditionName:"Ends With",init:t.initInput,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return t.toLowerCase().indexOf(i[0].toLowerCase())===t.length-i[0].length}},null:{conditionName:"Empty",init:function(){},inputValue:function(){},isInputValid:function(){return!0},search:function(t,i){return null==t||0===t.length}},starts:{conditionName:"Starts With",init:t.initInput,inputValue:t.inputValueInput,isInputValid:t.isInputValidInput,search:function(t,i){return 0===t.toLowerCase().indexOf(i[0].toLowerCase())}}},t.defaults={columns:!0,conditions:{date:t.dateConditions,html:t.stringConditions,"html-num":t.numConditions,"html-num-fmt":t.numFmtConditions,moment:t.momentDateConditions,num:t.numConditions,"num-fmt":t.numFmtConditions,string:t.stringConditions},depthLimit:!1,greyscale:!1,orthogonal:{conditionName:"Condition Name",search:"filter"}},t}();var d,l,c=function(){function t(i,e,s,n,r,d){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===d&&(d=1),!o||!o.versionCheck||!o.versionCheck("1.10.0"))throw new Error("SearchBuilder requires DataTables 1.10 or newer");return this.classes=a.extend(!0,{},t.classes),this.c=a.extend(!0,{},t.defaults,e),this.s={criteria:[],depth:d,dt:i,index:n,isChild:r,logic:void 0,opts:e,toDrop:void 0,topGroup:s},this.dom={add:a("<button/>").addClass(this.classes.add).addClass(this.classes.button),clear:a("<button>&times</button>").addClass(this.classes.button).addClass(this.classes.clearGroup),container:a("<div/>").addClass(this.classes.group),logic:a("<button/>").addClass(this.classes.logic).addClass(this.classes.button),logicContainer:a("<div/>").addClass(this.classes.logicContainer)},void 0===this.s.topGroup&&(this.s.topGroup=this.dom.container),this._setup(),this}return t.prototype.destroy=function(){a(this.dom.add).off(".dtsb"),a(this.dom.logic).off(".dtsb"),a(this.dom.container).trigger("dtsb-destroy").remove(),this.s.criteria=[]},t.prototype.getDetails=function(){if(0===this.s.criteria.length)return{};for(var t={criteria:[],logic:this.s.logic},i=0,e=this.s.criteria;i<e.length;i++){var s=e[i];t.criteria.push(s.criteria.getDetails())}return t},t.prototype.getNode=function(){return this.dom.container},t.prototype.rebuild=function(t){if(void 0!==t.criteria&&null!==t.criteria&&0!==t.criteria.length){this.s.logic=t.logic,a(this.dom.logic).text("OR"===this.s.logic?this.s.dt.i18n("searchBuilder.logicOr","Or"):this.s.dt.i18n("searchBuilder.logicAnd","And"));for(var i=0,e=t.criteria;i<e.length;i++){void 0!==(o=e[i]).logic?this._addPrevGroup(o):void 0===o.logic&&this._addPrevCriteria(o)}for(var s=0,n=this.s.criteria;s<n.length;s++){var o;void 0===(o=n[s]).logic&&(o.criteria.updateArrows(this.s.criteria.length>1,!1),this._setCriteriaListeners(o.criteria))}}},t.prototype.redrawContents=function(){a(this.dom.container).empty().append(this.dom.logicContainer).append(this.dom.add),this.s.criteria.sort((function(t,i){return t.criteria.s.index<i.criteria.s.index?-1:t.criteria.s.index>i.criteria.s.index?1:0})),this.setListeners();for(var t=0;t<this.s.criteria.length;t++)void 0===this.s.criteria[t].logic?(this.s.criteria[t].index=t,this.s.criteria[t].criteria.s.index=t,a(this.s.criteria[t].criteria.dom.container).insertBefore(this.dom.add),this._setCriteriaListeners(this.s.criteria[t].criteria),this.s.criteria[t].criteria.rebuild(this.s.criteria[t].criteria.getDetails())):this.s.criteria[t].criteria.s.criteria.length>0?(this.s.criteria[t].index=t,this.s.criteria[t].criteria.s.index=t,a(this.s.criteria[t].criteria.dom.container).insertBefore(this.dom.add),this.s.criteria[t].criteria.redrawContents(),this._setGroupListeners(this.s.criteria[t].criteria)):(this.s.criteria.splice(t,1),t--);this.setupLogic()},t.prototype.search=function(t){return"AND"===this.s.logic?this._andSearch(t):"OR"!==this.s.logic||this._orSearch(t)},t.prototype.setupLogic=function(){if(a(this.dom.logicContainer).remove(),a(this.dom.clear).remove(),this.s.criteria.length<1)this.s.isChild||(a(this.dom.container).trigger("dtsb-destroy"),a(this.dom.container).css("margin-left",0));else{var t=a(this.dom.container).height()-2;a(this.dom.clear).height("0px"),a(this.dom.logicContainer).append(this.dom.clear).width(t),a(this.dom.container).prepend(this.dom.logicContainer),this._setLogicListener(),a(this.dom.container).css("margin-left",a(this.dom.logicContainer).outerHeight(!0));var i=a(this.dom.logicContainer).offset(),e=i.left,s=e-(e-a(this.dom.container).offset().left)-a(this.dom.logicContainer).outerHeight(!0);a(this.dom.logicContainer).offset({left:s});var n=a(this.dom.logicContainer).next(),o=i.top,r=o-(o-a(n).offset().top);a(this.dom.logicContainer).offset({top:r}),a(this.dom.clear).outerHeight(a(this.dom.logicContainer).height()),this._setClearListener()}},t.prototype.setListeners=function(){var t=this;a(this.dom.add).unbind("click"),a(this.dom.add).on("click",(function(){return t.s.isChild||a(t.dom.container).prepend(t.dom.logicContainer),t.addCriteria(),a(t.dom.container).trigger("dtsb-add"),t.s.dt.state.save(),!1}));for(var i=0,e=this.s.criteria;i<e.length;i++){e[i].criteria.setListeners()}this._setClearListener(),this._setLogicListener()},t.prototype.addCriteria=function(t,i){void 0===t&&(t=null),void 0===i&&(i=!0);var e=null===t?this.s.criteria.length:t.s.index,s=new r(this.s.dt,this.s.opts,this.s.topGroup,e,this.s.depth);null!==t&&(s.c=t.c,s.s=t.s,s.s.depth=this.s.depth,s.classes=t.classes),s.populate();for(var n=!1,o=0;o<this.s.criteria.length;o++)0===o&&this.s.criteria[o].criteria.s.index>s.s.index?(a(s.getNode()).insertBefore(this.s.criteria[o].criteria.dom.container),n=!0):o<this.s.criteria.length-1&&this.s.criteria[o].criteria.s.index<s.s.index&&this.s.criteria[o+1].criteria.s.index>s.s.index&&(a(s.getNode()).insertAfter(this.s.criteria[o].criteria.dom.container),n=!0);n||a(s.getNode()).insertBefore(this.dom.add),this.s.criteria.push({criteria:s,index:e}),this.s.criteria=this.s.criteria.sort((function(t,i){return t.criteria.s.index-i.criteria.s.index}));for(var d=0,l=this.s.criteria;d<l.length;d++){var c=l[d];void 0===c.logic&&c.criteria.updateArrows(this.s.criteria.length>1,i)}this._setCriteriaListeners(s),s.setListeners(),this.setupLogic()},t.prototype.checkFilled=function(){for(var t=0,i=this.s.criteria;t<i.length;t++){var e=i[t];if(void 0===e.logic&&e.criteria.s.filled||void 0!==e.logic&&e.criteria.checkFilled())return!0}return!1},t.prototype.count=function(){for(var t=0,i=0,e=this.s.criteria;i<e.length;i++){var s=e[i];void 0!==s.logic?t+=s.criteria.count():t++}return t},t.prototype._addPrevGroup=function(i){var e=this.s.criteria.length,s=new t(this.s.dt,this.c,this.s.topGroup,e,!0,this.s.depth+1);this.s.criteria.push({criteria:s,index:e,logic:s.s.logic}),s.rebuild(i),this.s.criteria[e].criteria=s,a(this.s.topGroup).trigger("dtsb-redrawContents"),this._setGroupListeners(s)},t.prototype._addPrevCriteria=function(t){var i=this.s.criteria.length,e=new r(this.s.dt,this.s.opts,this.s.topGroup,i,this.s.depth);e.populate(),this.s.criteria.push({criteria:e,index:i}),e.rebuild(t),this.s.criteria[i].criteria=e,a(this.s.topGroup).trigger("dtsb-redrawContents")},t.prototype._andSearch=function(t){if(0===this.s.criteria.length)return!0;for(var i=0,e=this.s.criteria;i<e.length;i++){var s=e[i];if((void 0!==s.logic||s.criteria.s.filled)&&!s.criteria.search(t))return!1}return!0},t.prototype._orSearch=function(t){if(0===this.s.criteria.length)return!0;for(var i=!1,e=0,s=this.s.criteria;e<s.length;e++){var n=s[e];if(n.criteria.s.filled){if(i=!0,n.criteria.search(t))return!0}else if(void 0!==n.logic&&n.criteria.checkFilled()&&(i=!0,n.criteria.search(t)))return!0}return!i},t.prototype._removeCriteria=function(i,e){if(void 0===e&&(e=!1),this.s.criteria.length<=1&&this.s.isChild)this.destroy();else{for(var s=void 0,n=0;n<this.s.criteria.length;n++)this.s.criteria[n].index===i.s.index&&(!e||this.s.criteria[n].criteria instanceof t)&&(s=n);void 0!==s&&this.s.criteria.splice(s,1);for(n=0;n<this.s.criteria.length;n++)this.s.criteria[n].index=n,this.s.criteria[n].criteria.s.index=n}},t.prototype._setCriteriaListeners=function(i){var e=this;a(i.dom.delete).unbind("click").on("click",(function(){e._removeCriteria(i),a(i.dom.container).remove(),e.setupLogic();for(var t=0,s=e.s.criteria;t<s.length;t++){var n=s[t];void 0===n.logic&&n.criteria.updateArrows(e.s.criteria.length>1)}return i.destroy(),e.s.dt.draw(),a(e.s.topGroup).trigger("dtsb-updateTitle"),!1})),a(i.dom.right).unbind("click").on("click",(function(){var s=i.s.index,n=new t(e.s.dt,e.s.opts,e.s.topGroup,i.s.index,!0,e.s.depth+1);return n.addCriteria(i),e.s.criteria[s].criteria=n,e.s.criteria[s].logic="AND",a(e.s.topGroup).trigger("dtsb-redrawContents"),e._setGroupListeners(n),!1})),a(i.dom.left).unbind("click").on("click",(function(){e.s.toDrop=new r(e.s.dt,e.s.opts,e.s.topGroup,i.s.index),e.s.toDrop.s=i.s,e.s.toDrop.c=i.c,e.s.toDrop.classes=i.classes,e.s.toDrop.populate();var t=e.s.toDrop.s.index;return a(e.dom.container).trigger("dtsb-dropCriteria"),i.s.index=t,e._removeCriteria(i),a(e.s.topGroup).trigger("dtsb-redrawContents"),e.s.dt.draw(),!1}))},t.prototype._setClearListener=function(){var t=this;a(this.dom.clear).unbind("click").on("click",(function(){return t.s.isChild?(t.destroy(),a(t.s.topGroup).trigger("dtsb-updateTitle"),a(t.s.topGroup).trigger("dtsb-redrawContents"),!1):(a(t.dom.container).trigger("dtsb-clearContents"),!1)}))},t.prototype._setGroupListeners=function(t){var i=this;a(t.dom.add).unbind("click").on("click",(function(){return i.setupLogic(),a(i.dom.container).trigger("dtsb-add"),!1})),a(t.dom.container).unbind("dtsb-add").on("dtsb-add",(function(){return i.setupLogic(),a(i.dom.container).trigger("dtsb-add"),!1})),a(t.dom.container).unbind("dtsb-destroy").on("dtsb-destroy",(function(){return i._removeCriteria(t,!0),a(t.dom.container).remove(),i.setupLogic(),!1})),a(t.dom.container).unbind("dtsb-dropCriteria").on("dtsb-dropCriteria",(function(){var e=t.s.toDrop;return e.s.index=t.s.index,e.updateArrows(i.s.criteria.length>1,!1),i.addCriteria(e,!1),!1})),t.setListeners()},t.prototype._setup=function(){this.setListeners(),a(this.dom.add).text(this.s.dt.i18n("searchBuilder.add","Add Condition")),a(this.dom.logic).text("OR"===this.c.logic?this.s.dt.i18n("searchBuilder.logicOr","Or"):this.s.dt.i18n("searchBuilder.logicAnd","And")),this.s.logic="OR"===this.c.logic?"OR":"AND",this.c.greyscale&&a(this.dom.logic).addClass(this.classes.greyscale),a(this.dom.logicContainer).append(this.dom.logic).append(this.dom.clear),this.s.isChild&&a(this.dom.container).append(this.dom.logicContainer),a(this.dom.container).append(this.dom.add)},t.prototype._setLogicListener=function(){var t=this;a(this.dom.logic).unbind("click").on("click",(function(){t._toggleLogic(),t.s.dt.draw();for(var i=0,e=t.s.criteria;i<e.length;i++){e[i].criteria.setListeners()}}))},t.prototype._toggleLogic=function(){"OR"===this.s.logic?(this.s.logic="AND",a(this.dom.logic).text(this.s.dt.i18n("searchBuilder.logicAnd","And"))):"AND"===this.s.logic&&(this.s.logic="OR",a(this.dom.logic).text(this.s.dt.i18n("searchBuilder.logicOr","Or")))},t.version="0.0.1",t.classes={add:"dtsb-add",button:"dtsb-button",clearGroup:"dtsb-clearGroup",greyscale:"dtsb-greyscale",group:"dtsb-group",inputButton:"dtsb-iptbtn",logic:"dtsb-logic",logicContainer:"dtsb-logicContainer"},t.defaults={depthLimit:!1,greyscale:!1,logic:"AND"},t}();var u=function(){function t(i,e){var s=this;if(!l||!l.versionCheck||!l.versionCheck("1.10.0"))throw new Error("SearchBuilder requires DataTables 1.10 or newer");var n=new l.Api(i);if(this.classes=d.extend(!0,{},t.classes),this.c=d.extend(!0,{},t.defaults,e),this.dom={clearAll:d('<button type="button">'+n.i18n("searchBuilder.clearAll","Clear All")+"</button>").addClass(this.classes.clearAll).addClass(this.classes.button),container:d("<div/>").addClass(this.classes.container),title:d("<div/>").addClass(this.classes.title),titleRow:d("<div/>").addClass(this.classes.titleRow),topGroup:void 0},this.s={dt:n,opts:e,search:void 0,topGroup:void 0},void 0===n.settings()[0]._searchBuilder)return n.settings()[0]._searchBuilder=this,this.s.dt.settings()[0]._bInitComplete?this._setUp():n.one("init.dt",(function(){s._setUp()})),this}return t.prototype.getDetails=function(){return this.s.topGroup.getDetails()},t.prototype.getNode=function(){return this.dom.container},t.prototype.rebuild=function(t){return d(this.dom.clearAll).click(),null==t?this:(this.s.topGroup.rebuild(t),this.s.dt.draw(),this.s.topGroup.setListeners(),this)},t.prototype._applyPreDefDefaults=function(t){var i=this;void 0!==t.criteria&&void 0===t.logic&&(t.logic="AND");for(var e=function(t){void 0!==t.criteria?t=s._applyPreDefDefaults(t):s.s.dt.columns().every((function(e){i.s.dt.settings()[0].aoColumns[e].sTitle===t.data&&(t.dataIdx=e)}))},s=this,n=0,a=t.criteria;n<a.length;n++){e(a[n])}return t},t.prototype._setUp=function(t){var i=this;if(void 0===t&&(t=!0),this.s.topGroup=new c(this.s.dt,this.c,void 0),this._setClearListener(),this.s.dt.on("stateSaveParams",(function(t,e,s){s.searchBuilder=i.getDetails(),s.page=i.s.dt.page()})),this._build(),t){var e=this.s.dt.state.loaded();null!==e&&void 0!==e.searchBuilder?(this.s.topGroup.rebuild(e.searchBuilder),d(this.s.topGroup.dom.container).trigger("dtsb-redrawContents"),this.s.dt.page(e.page).draw("page"),this.s.topGroup.setListeners()):!1!==this.c.preDefined&&(this.c.preDefined=this._applyPreDefDefaults(this.c.preDefined),this.rebuild(this.c.preDefined))}this._setEmptyListener(),this.s.dt.state.save()},t.prototype._updateTitle=function(t){d(this.dom.title).text(this.s.dt.i18n("searchBuilder.title",{0:"Custom Search Builder",_:"Custom Search Builder (%d)"},t))},t.prototype._build=function(){var t=this;d(this.dom.clearAll).remove(),d(this.dom.container).empty();var i=this.s.topGroup.count();this._updateTitle(i),d(this.dom.titleRow).append(this.dom.title),d(this.dom.container).append(this.dom.titleRow),this.dom.topGroup=this.s.topGroup.getNode(),d(this.dom.container).append(this.dom.topGroup),this._setRedrawListener();var e=this.s.dt.table(0).node();-1===d.fn.dataTable.ext.search.indexOf(this.s.search)&&(this.s.search=function(i,s,n,a){return i.nTable!==e||t.s.topGroup.search(s)},d.fn.dataTable.ext.search.push(this.s.search)),d.fn.DataTable.Api.registerPlural("columns().type()","column().type()",(function(t,i){return this.iterator("column",(function(t,i){return t.aoColumns[i].sType}),1)})),this.s.dt.on("destroy.dt",(function(){d(t.dom.container).remove(),d(t.dom.clearAll).remove();for(var i=d.fn.dataTable.ext.search.indexOf(t.s.search);-1!==i;)d.fn.dataTable.ext.search.splice(i,1),i=d.fn.dataTable.ext.search.indexOf(t.s.search)}))},t.prototype._checkClear=function(){this.s.topGroup.s.criteria.length>0?(d(this.dom.clearAll).insertAfter(this.dom.title),this._setClearListener()):d(this.dom.clearAll).remove()},t.prototype._setClearListener=function(){var t=this;d(this.dom.clearAll).unbind("click"),d(this.dom.clearAll).on("click",(function(){return t.s.topGroup=new c(t.s.dt,t.s.opts,void 0),t._build(),t.s.dt.draw(),t.s.topGroup.setListeners(),d(t.dom.clearAll).remove(),t._setEmptyListener(),void 0!==t.c.filterChanged&&"function"==typeof t.c.filterChanged&&t.c.filterChanged(0),!1}))},t.prototype._setRedrawListener=function(){var t=this;d(this.s.topGroup.dom.container).unbind("dtsb-redrawContents"),d(this.s.topGroup.dom.container).on("dtsb-redrawContents",(function(){t._checkClear(),t.s.topGroup.redrawContents(),t.s.topGroup.setupLogic(),t._setEmptyListener();var i=t.s.topGroup.count();t._updateTitle(i),void 0!==t.c.filterChanged&&"function"==typeof t.c.filterChanged&&t.c.filterChanged(i),t.s.dt.state.save()})),d(this.s.topGroup.dom.container).unbind("dtsb-clearContents"),d(this.s.topGroup.dom.container).on("dtsb-clearContents",(function(){t._setUp(!1),void 0!==t.c.filterChanged&&"function"==typeof t.c.filterChanged&&t.c.filterChanged(0),t.s.dt.draw()})),d(this.s.topGroup.dom.container).on("dtsb-updateTitle",(function(){var i=t.s.topGroup.count();t._updateTitle(i),void 0!==t.c.filterChanged&&"function"==typeof t.c.filterChanged&&t.c.filterChanged(i)}))},t.prototype._setEmptyListener=function(){var t=this;d(this.s.topGroup.dom.add).on("click",(function(){t._checkClear()})),d(this.s.topGroup.dom.container).on("dtsb-destroy",(function(){d(t.dom.clearAll).remove()}))},t.version="0.0.1",t.classes={button:"dtsb-button",clearAll:"dtsb-clearAll",container:"dtsb-searchBuilder",inputButton:"dtsb-iptbtn",title:"dtsb-title",titleRow:"dtsb-titleRow"},t.defaults={filterChanged:void 0,preDefined:!1},t}();
/*! SearchBuilder 1.0.0
	 * Â©2020 SpryMedia Ltd - datatables.net/license/mit
	 */!function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(i){return t(i,window,document)})):"object"==typeof exports?module.exports=function(i,e){return i||(i=window),e&&e.fn.dataTable||(e=require("datatables.net")(i,e).$),t(e,i,i.document)}:t(window.jQuery,window,document)}((function(t,i,e){var s;d=s=t,l=s.fn.DataTable,function(t){a=t,o=t.fn.dataTable}(t),n(t);var h=t.fn.dataTable;t.fn.dataTable.SearchBuilder=u,t.fn.DataTable.SearchBuilder=u,t.fn.dataTable.Group=c,t.fn.DataTable.Group=c,t.fn.dataTable.Criteria=r,t.fn.DataTable.Criteria=r;var p=t.fn.dataTable.Api.register;function m(t){var i=new h.Api(t),e=i.init().searchBuilder||h.defaults.searchBuilder;return new u(i,e).getNode()}t.fn.dataTable.ext.searchBuilder={conditions:{}},t.fn.dataTable.ext.buttons.searchBuilder={action:function(t,i,e,s){t.stopPropagation(),this.popover(s._searchBuilder.getNode(),{align:"dt-container"})},config:{},init:function(i,e,s){var n=new t.fn.dataTable.SearchBuilder(i,t.extend({filterChanged:function(t){i.button(e).text(i.i18n("searchBuilder.button",{0:"Search Builder",_:"Search Builder (%d)"},t))}},s.config)),a=i.i18n("searchBuilder.button","Search Builder",0);i.button(e).text(a),s._searchBuilder=n},text:"Search Builder"},p("searchBuilder.getDetails()",(function(){return this.context[0]._searchBuilder.getDetails()})),p("searchBuilder.rebuild()",(function(t){return this.context[0]._searchBuilder.rebuild(t),this})),p("searchBuilder.container()",(function(){return this.context[0]._searchBuilder.getNode()})),t(e).on("preInit.dt.dtsp",(function(t,i,e){"dt"===t.namespace&&(i.oInit.searchBuilder||h.defaults.searchBuilder)&&(i._searchBuilder||m(i))})),h.ext.feature.push({cFeature:"Q",fnInit:m}),h.ext.features&&h.ext.features.register("searchBuilder",m)}))}();
