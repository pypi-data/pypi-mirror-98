!function(e){"use strict";var n=function(){Error.apply(this,arguments)};(n.prototype=new Error).type="XML-RPC fault";var t=e.xmlrpc=function(n,r){2===arguments.length?r.url=n:n=(r=n).url,r.dataType="xml json",r.type="POST",r.contentType="text/xml",r.converters={"xml json":t.parseDocument};var a=t.document(r.methodName,r.params||[]);return"XMLSerializer"in window?r.data=(new window.XMLSerializer).serializeToString(a):r.data=a.xml,e.ajax(r)};t.createXMLDocument=function(){if(document.implementation&&"createDocument"in document.implementation)return document.implementation.createDocument(null,null,null);var e,n,t=["MSXML6.DomDocument","MSXML3.DomDocument","MSXML2.DomDocument","MSXML.DomDocument","Microsoft.XmlDom"];for(e=0,n=t.length;e<n;e++)try{return new ActiveXObject(t[e])}catch(e){}},t.document=function(n,r){var a=t.createXMLDocument(),o=function(n){return e(a.createElement(n))},u=o("methodName").text(n),i=o("params").append(e.map(r,(function(e){var n=o("value").append(t.toXmlRpc(e,o));return o("param").append(n)}))),c=o("methodCall").append(u,i);return a.appendChild(c.get(0)),a};t.toXmlRpc=function(n,t){if(n instanceof r)return n.toXmlRpc(t);var a,o=e.xmlrpc.types,u=e.type(n);switch(u){case"undefined":case"null":return o.nil.encode(n,t);case"date":return o["datetime.iso8601"].encode(n,t);case"object":return n instanceof ArrayBuffer?o.base64.encode(n,t):o.struct.encode(n,t);case"number":return(a=n)!==parseInt(a,10)||isNaN(a)?o.double.encode(n,t):o.int.encode(n,t);case"array":case"boolean":case"string":return o[u].encode(n,t);default:throw new Error("Unknown type",n)}},t.parseDocument=function(r){var a=e(r).children("methodresponse"),o=a.find("> fault");if(0===o.length)return a.find("> params > param > value > *").toArray().map(t.parseNode);var u=t.parseNode(o.find("> value > *").get(0)),i=new n(u.faultString);throw i.msg=i.message=u.faultString,i.type=i.code=u.faultCode,i},t.parseNode=function(e){if(void 0===e)return null;var n=e.nodeName.toLowerCase();if(n in t.types)return t.types[n].decode(e);throw new Error("Unknown type "+n)},t.parseValue=function(n){var r=e(n).children()[0];return r?t.parseNode(r):e(n).text()};var r=function(){};e.xmlrpc.types={},t.makeType=function(n,a,o,u){var i;if(((i=function(e){this.value=e}).prototype=new r).tagName=n,a){var c=o,p=u;o=function(e,n){var t=c(e);return n(i.tagName).text(t)},u=function(n){return p(e(n).text(),n)}}i.prototype.toXmlRpc=function(e){return i.encode(this.value,e)},i.tagName=n,i.encode=o,i.decode=u,t.types[n.toLowerCase()]=i};var a=function(e){return""+Math.floor(e)},o=function(e,n){return parseInt(e,10)};t.makeType("int",!0,a,o),t.makeType("i4",!0,a,o),t.makeType("i8",!0,a,o),t.makeType("i16",!0,a,o),t.makeType("i32",!0,a,o),t.makeType("double",!0,String,(function(e){return parseFloat(e,10)})),t.makeType("string",!0,String,String),t.makeType("boolean",!0,(function(e){return e?"1":"0"}),(function(e){return"1"===e}));var u,i,c=function(e){return e<10?"0"+e:e};t.makeType("dateTime.iso8601",!0,(function(e){return[e.getUTCFullYear(),"-",c(e.getUTCMonth()+1),"-",c(e.getUTCDate()),"T",c(e.getUTCHours()),":",c(e.getUTCMinutes()),":",c(e.getUTCSeconds()),"Z"].join("")}),(function(e){return new Date(e)})),t.binary=(u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),i=u.reduce((function(e,n,t){return e[n]=t,e}),{}),{toBase64:function(e){for(var n,t=[],r=new Uint8Array(e),a=0;a<r.length;a+=3)n=(r[a+0]<<16)+(r[a+1]<<8)+(r[a+2]<<0),t.push(u[(n>>18)%64]),t.push(u[(n>>12)%64]),t.push(u[(n>>6)%64]),t.push(u[(n>>0)%64]);for(var o=3-(e.byteLength%3||3);o--;)t[t.length-o-1]="=";return t.join("")},fromBase64:function(e){var n=e.length,t=n/4*3;"="===e.charAt(n-1)&&t--,"="===e.charAt(n-2)&&t--;for(var r,a=new ArrayBuffer(t),o=new Uint8Array(a),u=0,c=0;u<n;u+=4,c+=3)r=(i[e[u+0]]<<18)+(i[e[u+1]]<<12)+(i[e[u+2]]<<6)+(i[e[u+3]]<<0),o[c+0]=(r>>16)%256,o[c+1]=(r>>8)%256,o[c+2]=(r>>0)%256;return a}}),t.makeType("base64",!0,(function(e){return t.binary.toBase64(e)}),(function(e){return t.binary.fromBase64(e)})),t.makeType("nil",!1,(function(e,n){return n("nil")}),(function(e){return null})),t.makeType("struct",!1,(function(n,r){var a=r("struct");return e.each(n,(function(e,n){var o=r("name").text(e),u=r("value").append(t.toXmlRpc(n,r));a.append(r("member").append(o,u))})),a}),(function(n){return e(n).find("> member").toArray().reduce((function(n,r){var a=e(r),o=a.find("> name").text(),u=t.parseValue(a.find("> value"));return n[o]=u,n}),{})})),t.makeType("array",!1,(function(n,r){var a=r("array"),o=r("data");return e.each(n,(function(e,n){o.append(r("value").append(t.toXmlRpc(n,r)))})),a.append(o),a}),(function(n){return e(n).find("> data > value").toArray().map(t.parseValue)})),t.force=function(e,n){return new t.types[e](n)}}(jQuery);
