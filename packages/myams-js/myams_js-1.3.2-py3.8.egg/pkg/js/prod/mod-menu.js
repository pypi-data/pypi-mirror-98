!function(n,e){"function"==typeof define&&define.amd?define(["exports"],e):"undefined"!=typeof exports?e(exports):(e(e={}),n.modMenu=e)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.menu=void 0;var a=MyAMS.$;var e=!1,t={init:function(){e||(e=!0,a.fn.extend({contextMenu:function(i){function o(n,e){var t=a(window)[e](),o=a(i.menuSelector)[e](),e=n;return t<n+o&&o<n&&(e-=o),e}return this.each(function(n,e){var e=a(e),t=a(i.menuSelector);a("a",t).each(function(n,e){a(e).data("ams-context-menu",!0)}),e.on("contextmenu",function(n){if(!n.ctrlKey)return t.dropdown("show").css({position:"fixed",left:o(n.clientX,"width")-10,top:o(n.clientY,"height")-10}).off("click").on("click",function(n){n.stopPropagation(),n.preventDefault(),t.dropdown("hide"),function(t){"A"!==t.get(0).tagName&&(t=t.parents("a").first());var o,n=t.data();"modal"===n.toggle?MyAMS.require("modal").then(function(){MyAMS.modal.open(t)}):!(o=t.attr("href")||n.amsUrl)||o.startsWith("javascript:")||t.attr("target")||("function"==typeof(n=MyAMS.core.getFunctionByName(o))&&(o=n(t)),void 0!==o&&("function"==typeof o?o(t):MyAMS.require("form","skin").then(function(){o=o.replace(/%23/,"#");var e=t.data("ams-target");e?MyAMS.form.confirmChangedForm(e).then(function(n){"success"===n&&MyAMS.skin.loadURL(o,e,t.data("ams-link-options"),t.data("ams-link-callback"))}):MyAMS.form.confirmChangedForm().then(function(n){"success"===n&&(o.startsWith("#")?o!==location.hash&&(MyAMS.dom.root.hasClass("mobile-view-activated")?(MyAMS.dom.root.removeClass("hidden-menu"),setTimeout(function(){window.location.hash=o},50)):window.location.hash=o):window.location=o)})})))}(a(n.target))}),!1}),a(document).click(function(){t.dropdown("hide")})})}}),a(document).on("show.bs.dropdown",".btn-group",function(n){var e=a(n.currentTarget),t=e.children(".dropdown-menu"),o=e.get(0).getBoundingClientRect(),i=o.top,n=o.height,o=t.outerHeight();o<i&&a(window).height()-i<n+o&&e.addClass("dropup"),a("input, select, textarea",t).first().focus()}).on("hidden.bs.dropdown",".btn-group",function(n){a(n.currentTarget).removeClass("dropup")}),a(document).on("hide.bs.dropdown",function(n){if(n.clickEvent&&!1===a(n.clickEvent.target).parents(".dropdown-menu").data("ams-click-dismiss"))return n.preventDefault(),!1}))}};n.menu=t,window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("menu"):(MyAMS.menu=t,console.debug("MyAMS: menu module loaded...")))});