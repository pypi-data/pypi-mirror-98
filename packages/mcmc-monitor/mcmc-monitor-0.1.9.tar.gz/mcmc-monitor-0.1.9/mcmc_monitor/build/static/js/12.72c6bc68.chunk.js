(this["webpackJsonpmcmc-monitor"]=this["webpackJsonpmcmc-monitor"]||[]).push([[12],{119:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s}));var c=n(10),r=n(0),o=(n(26),function(e){try{return!("iteration"!==e.type||!e.timestamp||!e.chainId)}catch(t){return!1}}),i=function(){var e=Object(c.e)();return Object(r.useMemo)((function(){return e.filter((function(e){return"WorkspaceView"===e.type})).map((function(e){return e}))}),[e])},s=function(){var e=Object(c.e)();return Object(r.useMemo)((function(){return e.filter((function(e){return"RunView"===e.type})).map((function(e){return e}))}),[e])}},222:function(e,t,n){"use strict";n.r(t),n.d(t,"activate",(function(){return W}));var c=n(8),r=n(223),o=n(10),i=n(0),s=n(119),a=function(e){if(!e)return{feedUri:void 0,workspaceName:void 0};if(!e.startsWith("workspace://"))return{feedUri:void 0,workspaceName:void 0};var t=e.split("/"),n=t[2]||void 0,c=t[3]||void 0;return n&&c?{feedUri:"feed://".concat(n),workspaceName:c}:{feedUri:void 0,workspaceName:void 0}},u=n(19),j=n(18),l=function(e,t){return"AddRun"===t.type?Object(j.a)(Object(j.a)({},e),{},{runs:[].concat(Object(u.a)(e.runs),[t.run])}):"DeleteRuns"===t.type?Object(j.a)(Object(j.a)({},e),{},{runs:e.runs.filter((function(e){return!t.runIds.includes(e.runId)}))}):e},d=n(217),b=n(218),f=n(9),p=function(){var e=Object(i.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],s=Object(i.useContext)(o.a);Object(i.useEffect)((function(){var e=setInterval((function(){var e=s.getHitherJobs();r(e)}),1e3);return function(){clearInterval(e)}}),[s]);var a={pendingJobs:n.filter((function(e){return"pending"===e.status})),runningJobs:n.filter((function(e){return"running"===e.status})),finishedJobs:n.filter((function(e){return"finished"===e.status})),erroredJobs:n.filter((function(e){return"error"===e.status}))},u=a.runningJobs,j=a.finishedJobs,l=a.erroredJobs,d=a.pendingJobs.length,b=u.length,p=j.length,O=l.length,h="Jobs: ".concat(d," pending | ").concat(b," running | ").concat(p," finished | ").concat(O," errored"),x=O>0?Object(f.jsxs)("span",{children:[":",Object(f.jsx)("span",{style:{color:"pink"},children:O})]}):Object(f.jsx)("span",{});return Object(f.jsxs)("span",{title:h,style:{fontFamily:"courier"},children:[d,":",b,":",p,x]})},O=n.p+"static/media/logo.e906eb4b.svg",h=n(208),x=n(213),g=n(214),m=n(215),k=function(){var e=Object(i.useContext)(o.c),t=e.websocketStatus,n=e.onReconnectWebsocket,c=Object(i.useMemo)((function(){switch(t){case"waiting":return{icon:Object(f.jsx)(x.a,{style:{color:"blue"}}),title:"Loading..."};case"connected":return{icon:Object(f.jsx)(g.a,{style:{color:""}}),title:"Connected"};case"disconnected":return{icon:Object(f.jsx)(m.a,{style:{color:"red"}}),title:"Disconnected from server. Click to attempt reconnect."};default:throw Error("Unexpected.")}}),[t]),r=c.icon,s=c.title,a=Object(i.useCallback)((function(){"disconnected"===t&&n()}),[t,n]);return Object(f.jsx)(h.a,{title:s,onClick:a,children:r})},v=n(216),w=function(e){var t=e.onOpenSettings,n=Object(i.useMemo)((function(){return{icon:Object(f.jsx)(v.a,{}),title:"Open settings"}}),[]),c=n.icon,r=n.title,o=Object(i.useCallback)((function(){t()}),[t]);return Object(f.jsx)(h.a,{title:r,onClick:o,children:c})},y=function(e){var t=e.onOpenSettings;return Object(f.jsx)(d.a,{position:"static",style:{height:50,background:"#d85636"},children:Object(f.jsxs)(b.a,{children:[Object(f.jsx)("img",{src:O,className:"App-logo",alt:"logo",height:30,style:{paddingBottom:15}}),"\xa0",Object(f.jsx)("span",{style:{paddingBottom:10,color:"#312a00",fontFamily:"sans-serif",fontWeight:"bold"},children:"MCMC Monitor"}),Object(f.jsx)("span",{style:{marginLeft:"auto"}}),Object(f.jsxs)("span",{style:{paddingBottom:15,color:"#312a00"},children:[Object(f.jsx)(w,{onOpenSettings:t}),Object(f.jsx)(k,{}),Object(f.jsx)(p,{})]})]})})},C=n(152),M=n(154),U=n(155),J=n(219),I=Object(J.a)((function(e){return{paper:{left:100,top:100,right:100,bottom:100,position:"absolute",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),overflow:"auto"}}})),N=function(e){var t=e.workspaceUri,n=e.version,c=I(),r=Object(i.useContext)(o.c).serverInfo,s=a(t),u=(s.feedUri,s.workspaceName);return Object(f.jsxs)("div",{className:c.paper,children:[Object(f.jsxs)("h2",{children:["MCMC Monitor ",n]}),Object(f.jsxs)(C.a,{children:[Object(f.jsxs)(M.a,{children:[Object(f.jsx)(U.a,{children:"Workspace URI"}),Object(f.jsx)(U.a,{children:t||""})]}),Object(f.jsxs)(M.a,{children:[Object(f.jsx)(U.a,{children:"Workspace name"}),Object(f.jsx)(U.a,{children:u})]}),Object(f.jsxs)(M.a,{children:[Object(f.jsx)(U.a,{children:"Kachery node ID"}),Object(f.jsx)(U.a,{children:r?r.nodeId:""})]}),Object(f.jsxs)(M.a,{children:[Object(f.jsx)(U.a,{children:"Default feed ID"}),Object(f.jsx)(U.a,{children:r?r.defaultFeedId:""})]})]})]})},R=function(e){var t=e.workspaceUri,n=e.workspaceRoute,u=e.workspaceRouteDispatch,j=e.version,d=Object(s.c)().filter((function(e){return"WorkspaceView"===e.name}))[0];if(!d)throw Error("Unable to find workspace view plugin");var b=Object(i.useState)(!1),p=Object(c.a)(b,2),O=p[0],h=p[1],x=Object(i.useReducer)(l,{runs:[]}),g=Object(c.a)(x,2),m=g[0],k=g[1],v=Object(i.useCallback)((function(e){e.forEach((function(e){return k(e)}))}),[]),w=a(t),C=w.feedUri,M=w.workspaceName,U=Object(i.useMemo)((function(){return{workspaceName:M}}),[M]),J=Object(o.f)({feedUri:C,subfeedName:U,onMessages:v}).appendMessages,I=Object(i.useCallback)((function(e){J([e])}),[J]),R=Object(i.useCallback)((function(){h(!0)}),[]),W=Object(i.useCallback)((function(){h(!1)}),[]);return Object(f.jsxs)("div",{style:{margin:0},children:[Object(f.jsx)(y,{onOpenSettings:R}),Object(f.jsx)("div",{style:{margin:30},children:Object(f.jsx)(d.component,{workspace:m,workspaceDispatch:I,workspaceRoute:n,workspaceRouteDispatch:u})}),Object(f.jsx)(r.a,{open:O,onClose:W,children:Object(f.jsx)("span",{children:Object(f.jsx)(N,{workspace:m,workspaceUri:t,version:j})})})]})};function W(e){e.registerPlugin({type:"MainWindow",name:"MainWindow",label:"Main Window",component:R})}}}]);
//# sourceMappingURL=12.72c6bc68.chunk.js.map