
############################################################
#
# Veranda2 - web API
#
############################################################


##############################
# rattail
##############################

[rattail.config]
include = %(here)s/rattail.conf


##############################
# pyramid
##############################

[app:main]
use = egg:SNFC_Veranda2#webapi

# pyramid.reload_templates = true
pyramid.debug_all = true
pyramid.default_locale_name = en
# pyramid.includes = pyramid_debugtoolbar
# pyramid.includes = pyramid_exclog
# pyramid.tweens =
#         pyramid_tm.tm_tween_factory
#         tailbone.tweens.sqlerror_tween_factory
#         pyramid.tweens.excview_tween_factory

beaker.session.type = file
beaker.session.data_dir = %(here)s/sessions/data
beaker.session.lock_dir = %(here)s/sessions/lock
beaker.session.secret = 3Gk0FWFpHzjkw0HHqDnp
beaker.session.key = veranda2.ledgar-dev.session

exclog.extra_info = true

# required for tailbone
rattail.config = %(__file__)s

[server:main]
use = egg:waitress#main
host = 0.0.0.0
port = 6811

# NOTE: this is needed for local reverse proxy stuff to work
# https://docs.pylonsproject.org/projects/waitress/en/latest/reverse-proxy.html
# https://docs.pylonsproject.org/projects/waitress/en/latest/arguments.html
trusted_proxy = 127.0.0.1
trusted_proxy_headers = x-forwarded-for x-forwarded-host x-forwarded-proto x-forwarded-port
clear_untrusted_proxy_headers = True
url_prefix = /api


####################
# logging
####################

[handler_console]
level = INFO

[handler_file]
args = ('/srv/envs/veranda2/app/log/webapi.log', 'a', 1000000, 100, 'utf_8')
