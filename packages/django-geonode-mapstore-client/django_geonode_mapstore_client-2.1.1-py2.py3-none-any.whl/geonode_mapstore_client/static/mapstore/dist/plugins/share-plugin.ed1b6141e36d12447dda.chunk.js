(window.webpackJsonp=window.webpackJsonp||[]).push([["plugins/share-plugin"],{"./MapStore2/web/client/reducers/controls.js":function(e,t,n){"use strict";n.r(t);var r=n("./MapStore2/web/client/actions/controls.js"),o=n("./node_modules/object-assign/index.js"),i=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.d:var n=t.property||"enabled";return i()({},e,a({},t.control,i()({},e[t.control],a({},n,!(e[t.control]||{})[n]))));case r.c:return!0===t.toggle&&e[t.control]&&e[t.control][t.property]===t.value?i()({},e,a({},t.control,i()({},e[t.control],a({},t.property,void 0)))):i()({},e,a({},t.control,i()({},e[t.control],a({},t.property,t.value))));case r.b:return i()({},e,a({},t.control,i()({},e[t.control],t.properties)));case r.a:var o=Object.keys(e).filter((function(e){return-1===(t.skip||[]).indexOf(e)})),c=o.reduce((function(t,n){return i()(t,a({},n,i()({},e[n],!0===e[n].enabled?{enabled:!1}:{})))}),{});return i()({},e,c);default:return e}}},"./MapStore2/web/client/selectors/map.js":function(e,t,n){"use strict";n.d(t,"l",(function(){return a})),n.d(t,"o",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return s})),n.d(t,"j",(function(){return f})),n.d(t,"n",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return b})),n.d(t,"m",(function(){return g})),n.d(t,"p",(function(){return h})),n.d(t,"k",(function(){return v})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return O}));var r=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),o=n("./node_modules/reselect/es/index.js"),i=n("./node_modules/lodash/lodash.js"),a=function(e){return e.map&&e.map.present||e.map||e.config&&e.config.map||null},c=Object(o.a)([a],(function(e){return e&&e.projection})),u=function(e){return Object(i.get)(e,"mapInitialConfig.mapId")&&parseInt(Object(i.get)(e,"mapInitialConfig.mapId"),10)||function(e){return Object(i.get)(a(e),"mapId")&&parseInt(Object(i.get)(a(e),"mapId"),10)||null}(e)},l=function(e){return Object(i.get)(a(e),"info")},s=function(e){return Object(i.get)(l(e),"details")},f=function(e){var t=Object(i.get)(l(e),"canEdit");return void 0===t?Object(i.get)(e,"context.resource.canEdit"):t},d=function(e){return e.localConfig&&e.localConfig.projectionDefs||[]},p=function(e){return e.localConfig&&e.localConfig.mapConstraints||{}},m=function(e){return p(e).restrictedExtent},y=function(e){return p(e).crs},b=function(e){var t=p(e),n=c(e);return n&&Object(i.get)(t,'projectionsConstraints["'.concat(n,'"].minZoom'))||Object(i.get)(t,"minZoom")},g=function(e){return Object(i.get)(function(e){return Object(i.get)(a(e),"limits")}(e),"minZoom")},h=Object(o.a)([function(e){return Object(i.get)(a(e),"resolutions")},c],(function(e,t){if(e&&t){var n=r.default.getUnits(t);return e.map((function(e){return e*(100/2.54*96)*("degrees"===n?111194.87428468118:1)}))}return[]})),v=function(e){return e.map&&e.map.present&&e.map.present.info&&e.map.present.info.name||""},x=function(e){return Object(i.get)(a(e),"eventListeners.mousemove",[])},j=function(e){return!!x(e).length},S=function(e){return x(e).includes("mouseposition")},O=function(e){return x(e).includes("identifyFloatingTool")}},"./MapStore2/web/client/utils/CoordinatesUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,"FORMULAS",(function(){return A})),n.d(t,"getProjUrl",(function(){return N})),n.d(t,"determineCrs",(function(){return I})),n.d(t,"normalizePoint",(function(){return F})),n.d(t,"reproject",(function(){return D})),n.d(t,"reprojectExtent",(function(){return z})),n.d(t,"getPolygonFromExtent",(function(){return B})),n.d(t,"getExtentFromNormalized",(function(){return V})),n.d(t,"crsCodeTable",(function(){return $})),n.d(t,"setCrsLabels",(function(){return J})),n.d(t,"getUnits",(function(){return W})),n.d(t,"getProjectedBBox",(function(){return X})),n.d(t,"createBBox",(function(){return q})),n.d(t,"reprojectGeoJson",(function(){return Z})),n.d(t,"lineIntersectPolygon",(function(){return H})),n.d(t,"normalizeLng",(function(){return K})),n.d(t,"reprojectBbox",(function(){return Q})),n.d(t,"bboxToFeatureGeometry",(function(){return Y})),n.d(t,"getCompatibleSRS",(function(){return ee})),n.d(t,"getEquivalentSRS",(function(){return te})),n.d(t,"getEPSGCode",(function(){return ne})),n.d(t,"normalizeSRS",(function(){return re})),n.d(t,"isAllowedSRS",(function(){return oe})),n.d(t,"getAvailableCRS",(function(){return ie})),n.d(t,"filterCRSList",(function(){return ae})),n.d(t,"calculateAzimuth",(function(){return ce})),n.d(t,"calculateDistance",(function(){return ue})),n.d(t,"extendExtent",(function(){return le})),n.d(t,"getGeoJSONExtent",(function(){return se})),n.d(t,"isValidExtent",(function(){return fe})),n.d(t,"calculateCircleCoordinates",(function(){return de})),n.d(t,"transformLineToArcs",(function(){return pe})),n.d(t,"transformArcsToLine",(function(){return me})),n.d(t,"coordsOLtoLeaflet",(function(){return ye})),n.d(t,"mergeToPolyGeom",(function(){return be})),n.d(t,"getViewportGeometry",(function(){return ge})),n.d(t,"getExtentFromViewport",(function(){return he})),n.d(t,"fetchProjRemotely",(function(){return ve})),n.d(t,"parseURN",(function(){return xe})),n.d(t,"parseString",(function(){return je})),n.d(t,"getWMSBoundingBox",(function(){return Se})),n.d(t,"isSRSAllowed",(function(){return Oe})),n.d(t,"getNormalizedLatLon",(function(){return Pe})),n.d(t,"isInsideVisibleArea",(function(){return Ee})),n.d(t,"centerToVisibleArea",(function(){return we})),n.d(t,"calculateCircleRadiusFromPixel",(function(){return Ce})),n.d(t,"roundCoord",(function(){return Ge})),n.d(t,"midpoint",(function(){return Me})),n.d(t,"pointObjectToArray",(function(){return _e})),n.d(t,"isPointInsideExtent",(function(){return Ae})),n.d(t,"isBboxCompatible",(function(){return Te})),n.d(t,"extractCrsFromURN",(function(){return Ne})),n.d(t,"makeNumericEPSG",(function(){return Re})),n.d(t,"makeBboxFromOWS",(function(){return Ie}));var r=n("./node_modules/node-geo-distance/index.js"),o=n.n(r),i=n("./MapStore2/web/client/libs/proj4.js"),a=n.n(i),c=n("./MapStore2/web/client/libs/ajax.js"),u=n.n(c),l=n("./node_modules/object-assign/index.js"),s=n.n(l),f=n("./node_modules/lodash/lodash.js"),d=n("./node_modules/@turf/line-intersect/index.js"),p=n.n(d),m=n("./node_modules/@turf/polygon-to-linestring/index.js"),y=n.n(m),b=n("./node_modules/@turf/great-circle/main.es.js"),g=n("./node_modules/turf-point/index.js"),h=n.n(g),v=n("./node_modules/@turf/bbox-polygon/main.es.js"),x=n("./node_modules/@turf/boolean-overlap/main.es.js"),j=n("./node_modules/@turf/boolean-contains/main.es.js");function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M,_=a.a,A={vincenty:function(e){for(var t=0,n=0;n<e.length-1;++n){var r=e[n],i=e[n+1],a=w(r,2),c=a[0],u=a[1],l=w(i,2),s=l[0],f=l[1];t+=parseFloat(o.a.vincentySync({longitude:c,latitude:u},{longitude:s,latitude:f}))}return t},haversine:function(e){for(var t=0,n=0;n<e.length-1;++n){var r=e[n],i=e[n+1],a=w(r,2),c=a[0],u=a[1],l=w(i,2),s=l[0],f=l[1];t+=parseFloat(o.a.haversineSync({longitude:c,latitude:u},{longitude:s,latitude:f}))}return t}};function T(e,t){return(n=e).length>=2&&"number"==typeof n[0]&&"number"==typeof n[1]?t(e):e.map((function(e){return T(e,t)}));var n}var N=function(e){return"http://spatialreference.org/ref/epsg/".concat(e,"/proj4/")};function R(e,t,n){if(null===e)return e;var r=Object(f.cloneDeep)(e);return"Feature"===e.type?r.geometry=R(e.geometry,t,n):"FeatureCollection"===e.type?r.features=r.features.map((function(e){return R(e,t,n)})):"GeometryCollection"===e.type?r.geometries=r.geometries.map((function(e){return R(e,t,n)})):t&&t(r),n&&n(r),r}function I(e){return"string"==typeof e||e instanceof String?a.a.defs(e)?new a.a.Proj(e):null:e}var L={"EPSG:4326":"WGS 84","EPSG:3857":"EPSG:3857"},F=function(e){return{x:e.x||0,y:e.y||0,srs:e.srs||e.crs||"EPSG:4326",crs:e.srs||e.crs||"EPSG:4326"}},k=function(e){var t=e;return Object(f.isNumber)(e.x)||(t.x=parseFloat(e.x)),Object(f.isNumber)(e.y)||(t.y=parseFloat(e.y)),t},D=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t&&a.a.defs(t)?new a.a.Proj(t):null,i=n&&a.a.defs(n)?new a.a.Proj(n):null;if(o&&i){var c=Object(f.isArray)(e)?a.a.toPoint(e):a.a.toPoint([e.x,e.y]),u=s()({},t===n?k(c):a.a.transform(o,i,k(c)),{srs:n});return r?F(u):u}return null},U=["EPSG:900913","EPSG:4326","EPSG:3857"],z=function(e,t,n){return"EPSG:4326"===t?e:n?e.map((function(e){return[D([e[0],e[1]],"EPSG:4326",t),D([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(E(e),[t.x,t.y])}),[])})):[D([e[0],e[1]],"EPSG:4326",t),D([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(E(e),[t.x,t.y])}),[])},B=function(e){return e?e.hasOwnProperty("geometry")&&"Polygon"===e.geometry.type?e:Object(v.a)(e):null},V=function(e,t){var n=function(e,t){var n="EPSG:4326"!==t?[D([parseFloat(e.minx),parseFloat(e.miny)],t,"EPSG:4326"),D([parseFloat(e.maxx),parseFloat(e.maxy)],t,"EPSG:4326")].reduce((function(e,t){return[].concat(E(e),[t.x,t.y])}),[]):[parseFloat(e.minx),parseFloat(e.miny),parseFloat(e.maxx),parseFloat(e.maxy)],r=!1;return"EPSG:4326"===t?r=Math.abs(e.maxx-e.minx)>=360:"EPSG:900913"!==t&&"EPSG:3857"!==t||(r=Math.abs(e.maxx-e.minx)>=40075016.68557849),r?[0,n[1],360,n[3]]:[(n[0]+180)%360,n[1],(n[2]+180)%360,n[3]].map((function(e,t){return t%2==0&&e<0?360+e:e}))}(e,t),r=n[2]<n[0];return r?{extent:z([[-180,n[1],n[2]-180,n[3]],[n[0]-180,n[1],180,n[3]]],t,r),isIDL:r}:{extent:z([n[0]-180,n[1],n[2]-180,n[3]],t,r),isIDL:r}},$={wgs84:4326,wgs1984:4326,crs84:4326,ogccrs84:4326,lambert93:2154,rgflambert93:2154},J=function(e){L=s()({},L,e)},W=function(e){return new a.a.Proj(e).units||"degrees"},X=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=t*r[0]/2,i=t*r[1]/2,a=Math.cos(n),c=Math.sin(n),u=o*a,l=o*c,s=i*a,f=i*c,d=e.x,p=e.y,m=d-u+f,y=d-u-f,b=d+u-f,g=d+u+f,h=p-l-s,v=p-l+s,x=p+l+s,j=p+l-s,S=M.createBBox(Math.min(m,y,b,g),Math.min(h,v,x,j),Math.max(m,y,b,g),Math.max(h,v,x,j));return S},q=function(e,t,n,r){return{minx:e,miny:t,maxx:n,maxy:r}},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326",r=t,o=n;"string"==typeof r&&(r=I(r)),"string"==typeof o&&(o=I(o));var i=_(r,o);return R(e,(function(e){e.crs&&delete e.crs,e.coordinates=T(e.coordinates,(function(e){var t=w(e,2),n=t[0],r=t[1];return i.forward([n,r])}))}),(function(e){var t,n;e.bbox&&(e.bbox=(t=[Number.MAX_VALUE,Number.MAX_VALUE],n=[-Number.MAX_VALUE,-Number.MAX_VALUE],R(e,(function(e){T(e.coordinates,(function(e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),n[0]=Math.max(n[0],e[0]),n[1]=Math.max(n[1],e[1])}))})),[t[0],t[1],n[0],n[1]]))}))},H=function(e,t){var n=y()(t).features[0];return 0!==p()(e,n).features.length},K=function(e){var t=e/360%1*360;return t<-180?t+=360:t>180&&(t-=360),t},Q=function(e,t,n){var r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];r=Object(f.isArray)(e)?{sw:[e[0],e[1]],ne:[e[2],e[3]]}:{sw:[e.minx,e.miny],ne:[e.maxx,e.maxy]};var i=[];for(var a in r)if(r.hasOwnProperty(a)){var c=M.reproject(r[a],t,n,o);if(!c)return null;var u=c.x,l=c.y;i.push(u),i.push(l)}return i},Y=function(e){var t=Object(f.isArray)(e)?{minx:e[0],miny:e[1],maxx:e[2],maxy:e[3]}:e,n=t.minx,r=t.miny,o=t.maxx,i=t.maxy;return{type:"Polygon",coordinates:[[[n,r],[n,i],[o,i],[o,r],[n,r]]]}},ee=function(e,t){return"EPSG:900913"===e&&!t["EPSG:900913"]&&t["EPSG:3857"]?"EPSG:3857":"EPSG:3857"===e&&!t["EPSG:3857"]&&t["EPSG:900913"]?"EPSG:900913":e},te=function(e){return"EPSG:900913"===e||"EPSG:3857"===e?["EPSG:3857","EPSG:900913"]:[e]},ne=function(e){return-1!==e.indexOf(":")?"EPSG:"+e.substring(e.lastIndexOf(":")+1):e},re=function(e,t){var n="EPSG:900913"===e?"EPSG:3857":e;return t&&!t[n]?M.getCompatibleSRS(n,t):n},oe=function(e,t){return t[M.getCompatibleSRS(e,t)]},ie=function(){var e={};for(var t in a.a.defs)a.a.defs.hasOwnProperty(t)&&(e[t]={label:L[t]||t});return e},ae=function(e,t,n,r){var o=Object.keys(e).reduce((function(n,r){return s()({},-1===t.indexOf(r)?n:O(O({},n),{},P({},r,e[r])))}),{}),i=r.map((function(e){return e.code})),a=Object.keys(n).reduce((function(e,t){return s()({},-1===i.indexOf(t)?e:O(O({},e),{},P({},t,n[t])))}),{});return s()({},o,a)},ce=function(e,t,n){var r=M.reproject(e,n,"EPSG:4326"),o=M.reproject(t,n,"EPSG:4326"),i=r.x*Math.PI/180,a=r.y*Math.PI/180,c=o.x*Math.PI/180,u=o.y*Math.PI/180,l=c-i,s=Math.sin(l)*Math.cos(u),f=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(l);return(180*Math.atan2(s,f)/Math.PI+360)%360},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"haversine";return e.length>=2&&-1!==Object.keys(A).indexOf(t)?A[t](e):0},le=function(e,t){var n=e.slice();return t[0]<e[0]&&(n[0]=t[0]),t[2]>e[2]&&(n[2]=t[2]),t[1]<e[1]&&(n[1]=t[1]),t[3]>e[3]&&(n[3]=t[3]),n},se=function(e){var t=this,n=[1/0,1/0,-1/0,-1/0],r=function(e,n){var r=M.getGeoJSONExtent(n);return t.isValidExtent(r)?t.extendExtent(r,e):r};if(e.coordinates){if("Point"===e.type){var o=e.coordinates;n[0]=o[0]-.01*o[0],n[1]=o[1]-.01*o[1],n[2]=o[0]+.01*o[0],n[3]=o[1]+.01*o[1]}return Object(f.chunk)(Object(f.flattenDeep)(e.coordinates),2).reduce((function(e,t){return[t[0]<e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1],t[0]>e[2]?t[0]:e[2],t[1]>e[3]?t[1]:e[3]]}),n)}if("GeometryCollection"===e.type)return e.geometries.reduce(r,n);if(e.type){if("FeatureCollection"===e.type)return e.features.reduce(r,n);if("Feature"===e.type&&e.geometry)return M.getGeoJSONExtent(e.geometry)}return n},fe=function(e){return!(-1!==e.indexOf(1/0)||-1!==e.indexOf(-1/0)||e[0]>e[2]||e[1]>e[3])},de=function(e,t,n,r){var o,i,a,c=Math.PI*(1/n-.5);r&&(c+=r/180*Math.PI);for(var u=[[]],l=0;l<n;l++)o=c+2*l*Math.PI/n,i=e.x+t*Math.cos(o),a=e.y+t*Math.sin(o),u[0].push([i,a]);return u[0].push(u[0][0]),u},pe=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{npoints:100,offset:10,properties:{}},n=[],r=0;r<e.length-1;++r){var o=e[r],i=e[r+1],a=h()(o),c=h()(i);if(o[0]!==i[0]||o[1]!==i[1]){var u=Object(b.a)(a,c,t);n=[].concat(E(n),E(u.geometry.coordinates))}}return n},me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length<=t?[Object(f.head)(e),Object(f.last)(e)]:e.length>t?[Object(f.head)(e)].concat(M.transformArcsToLine(Object(f.slice)(e,t))):[]},ye=function(e){var t=e.coordinates;switch(e.type){case"Polygon":return t.map((function(e){return e.map((function(e){return e.reverse()}))}));case"LineString":return t.map((function(e){return e.reverse()}));case"Point":return t.reverse();default:return[]}},be=function(e){return 1===e.length?e[0].geometry:{type:"GeometryCollection",geometries:e.map((function(e){return e.geometry}))}},ge=function(e,t){if(Object(f.head)(U.filter((function(e){return e===t})))){var n=V(e,t),r=n.extent,o=n.isIDL,i=(o?r:[r]).map((function(e){var t=[e[0],e[1]],n=[e[2],e[3]];return[[t,[t[0],n[1]],n,[n[0],t[1]],t]]}));if(o){var a=r[1][0]+(Math.abs(r[0][0]-r[0][2])+Math.abs(r[1][0]-r[1][2]))/2;return{type:"MultiPolygon",radius:0,projection:t,coordinates:i,extent:r,center:[a=a>180?a-360:a,(r[0][1]+r[0][3])/2]}}return{type:"Polygon",radius:0,projection:t,coordinates:i[0],extent:r,center:[(r[0]+r[2])/2,(r[1]+r[3])/2]}}var c=[e.minx,e.miny,e.maxx,e.maxy],u=[c[0],c[1]],l=[c[2],c[3]];return{type:"Polygon",radius:0,projection:t,coordinates:[[u,[u[0],l[1]],l,[l[0],u[1]],u]],extent:c,center:[(c[0]+c[2])/2,(c[1]+c[3])/2]}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bounds,n=e.crs,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326";if(!t||!n)return null;var o=M.getViewportGeometry(t,n),i=o.extent;if(4===i.length)return M.reprojectBbox(i,n,r);var a=i.map((function(e){return e[2]-e[0]})),c=w(a,2),u=c[0],l=c[1];return u>l?M.reprojectBbox(i[0],n,r):M.reprojectBbox(i[1],n,r)},ve=function(e,t){var n=2===e.split(":").length?e.split(":")[1]:"3857";return u.a.get(t||N(n),null,{timeout:2e3})},xe=function(e){var t=e&&e.properties&&e.properties.name||e&&e.name||e&&e.properties&&e.properties.code||e,n=t&&Object(f.last)(t.split(":"));return"WGS 1984"===n||"WGS84"===n?"EPSG:4326":n?"EPSG:"+n:null},je=function(e){var t=e.split(" "),n=parseFloat(t[0]),r=parseFloat(t[1]);return!isNaN(n)&&!isNaN(r)&&{x:n,y:r}||null},Se=function(e,t){var n=t||"EPSG:3857",r=e&&Object(f.isArray)(e)&&Object(f.head)(e.filter((function(e){return e&&e.$&&e.$.SRS===n&&e.$.maxx&&e.$.maxy&&e.$.minx&&e.$.miny})).map((function(e){return e&&e.$&&M.reprojectBbox([parseFloat(e.$.minx),parseFloat(e.$.miny),parseFloat(e.$.maxx),parseFloat(e.$.maxy)],n,"EPSG:4326")})));return Object(f.isArray)(r)&&{minx:r[0],miny:r[1],maxx:r[2],maxy:r[3]}||null},Oe=function(e){return!!a.a.defs(e)},Pe=function(e){var t=e.lng,n=void 0===t?1:t,r=e.lat;return{lat:void 0===r?1:r,lng:M.normalizeLng(n)}},Ee=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=M.getNormalizedLatLon(e),i=D([o.lng,o.lat],"EPSG:4326",t.projection);if(!t.bbox)return!1;var a=M.reprojectBbox(t.bbox.bounds,t.bbox.crs,t.projection),c=O({left:0,right:0,top:0,bottom:0},n),u={minx:a[0]+c.left*r,miny:a[1]+c.bottom*r,maxx:a[2]-c.right*r,maxy:a[3]-c.top*r},l=M.getViewportGeometry(u,t.projection),s=4===l.extent.length?[E(l.extent)]:E(l.extent);return Object(f.head)(s.map((function(e){return i.x>=e[0]&&i.y>=e[1]&&i.x<=e[2]&&i.y<=e[3]})).filter((function(e){return e})))||!1},we=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=M.getNormalizedLatLon(e),i=D([o.lng,o.lat],"EPSG:4326",t.projection),a=O({left:0,right:0,top:0,bottom:0},n),c={width:(t.size.width-a.right-a.left)*r,height:(t.size.height-a.top-a.bottom)*r},u={minx:i.x-c.width/2-a.left*r,miny:i.y-c.height/2-a.bottom*r,maxx:i.x+c.width/2+a.right*r,maxy:i.y+c.height/2+a.top*r},l=M.getViewportGeometry(u,t.projection);if(4===l.extent.length)return{pos:D([l.extent[0]+t.size.width/2*r,l.extent[1]+t.size.height/2*r],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"};if(Math.abs(l.extent[0][2]-l.extent[0][0])>Math.abs(l.extent[1][2]-l.extent[1][0])){var s=D([l.extent[0][2]-t.size.width/2*r,l.extent[0][3]-t.size.height/2*r],t.projection,"EPSG:4326"),f=O(O({},s),{},{x:s.x+(o.lng>s.x?360:0)});return{pos:f,zoom:t.zoom,crs:"EPSG:4326"}}return{pos:D([l.extent[1][0]+t.size.width/2*r,l.extent[1][1]+t.size.height/2*r],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"}},Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,i=Object(f.isArray)(n)?n:[n.x,n.y];if(Object(f.isNumber)(i[0])&&!isNaN(i[0])&&Object(f.isNumber)(i[1])&&!isNaN(i[1])&&Object(f.isNumber)(t.x)&&!isNaN(t.x)&&Object(f.isNumber)(t.y)&&!isNaN(t.y)){var a=Object(f.isFunction)(e)?e([t.x,t.y>=r?t.y-r:t.y+r]):null,c=a&&(Object(f.isArray)(a)?a:[a.x,a.y]);return Object(f.isArray)(c)?Math.sqrt((i[0]-c[0])*(i[0]-c[0])+(i[1]-c[1])*(i[1]-c[1])):o}return o},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roundingBehaviour,n=void 0===t?"round":t,r=e.value,o=void 0===r?0:r,i=e.maximumFractionDigits,a=void 0===i?0:i;return 0===a&&Math[n]?Math[n](o):o},Me=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(f.isArray)(e)?{x:e[0],y:e[1]}:e,o=Object(f.isArray)(t)?{x:t[0],y:t[1]}:t,i={x:.5*(r.x+o.x),y:.5*(r.y+o.y)};return n?[i.x,i.y]:i},_e=function(e){return Object(f.isObject)(e)&&Object(f.isNumber)(e.x)&&Object(f.isNumber)(e.y)?[e.x,e.y]:e},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lat:1,lng:1},t=arguments.length>1?arguments[1]:void 0;return Object(j.a)(B(t),h()([e.lng,e.lat]))},Te=function(e,t){return Object(x.a)(e,t)||Object(j.a)(e,t)||Object(j.a)(t,e)},Ne=function(e){if(e){var t=e.split(":");if(!("urn"!==t[0]||"ogc"!==t[1]&&"x-ogc"!==t[1]||"def"!==t[2]||"crs"!==t[3]||!t[4]&&!t[6])){var n=t[4],r=t[6];return n?"".concat(n,":").concat(r):r}}return null},Re=function(e){if(!e||"EPSG:"!==e.slice(0,5))return null;var t=e.slice(5),n=parseInt(t,10);if(n>=1024&&n<=32767)return e;var r=t.replace(" ","").replace(":","").toLowerCase(),o=$[r];return o>=1024&&o<=32767?"EPSG:".concat(o):null},Ie=function(e,t){var n=[e[0],e[1]],r=[t[0],t[1]];if(n[1]>r[1]){var o=n;n=r,r=o}if(n[0]>r[0]){var i=n.slice(),a=r.slice();n=[a[0],i[1]],r=[i[0],a[1]]}return[n[0],n[1],r[0],r[1]]};M={setCrsLabels:J,getUnits:W,reproject:D,getProjectedBBox:X,createBBox:q,reprojectGeoJson:Z,lineIntersectPolygon:H,normalizePoint:F,normalizeLng:K,reprojectBbox:Q,getCompatibleSRS:ee,getEquivalentSRS:te,getEPSGCode:ne,normalizeSRS:re,isAllowedSRS:oe,getAvailableCRS:ie,filterCRSList:ae,calculateAzimuth:ce,calculateDistance:ue,FORMULAS:A,extendExtent:le,getGeoJSONExtent:se,isValidExtent:fe,calculateCircleCoordinates:de,transformLineToArcs:pe,transformArcsToLine:me,coordsOLtoLeaflet:ye,mergeToPolyGeom:be,getViewportGeometry:ge,getProjUrl:N,getExtentFromViewport:he,fetchProjRemotely:ve,parseURN:xe,determineCrs:I,parseString:je,getWMSBoundingBox:Se,isSRSAllowed:Oe,getNormalizedLatLon:Pe,isInsideVisibleArea:Ee,centerToVisibleArea:we,calculateCircleRadiusFromPixel:Ce,roundCoord:Ge,midpoint:Me,pointObjectToArray:_e,getExtentFromNormalized:V,getPolygonFromExtent:B,isPointInsideExtent:Ae,isBboxCompatible:Te,extractCrsFromURN:Ne,crsCodeTable:$,makeNumericEPSG:Re,makeBboxFromOWS:Ie},t.default=M},"./js/plugins/Share.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),c=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/reselect/es/index.js"),l=n("./MapStore2/web/client/utils/PluginsUtils.js"),s=n("./MapStore2/web/client/actions/controls.js"),f=n("./MapStore2/web/client/components/I18N/Message.jsx"),d=n("./node_modules/react-bootstrap/es/index.js"),p=n("./MapStore2/web/client/reducers/controls.js"),m=n("./node_modules/react-copy-to-clipboard/lib/index.js"),y=n.n(m),b=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx"),g=Object(b.a)(y.a),h=function(e){var t=e.shareUrl,n=void 0===t?"":t,r=e.copied,i=void 0!==r&&r,a=e.onCopy,c=void 0===a?function(){}:a,u=e.onMouseLeave,l=void 0===u?function(){}:u;return o.a.createElement(g,{text:n,tooltipId:i?"share.msgCopiedUrl":"share.msgToCopyUrl",tooltipPosition:"bottom",key:i.toString(),onCopy:function(){return c(n)}},o.a.createElement(d.Button,{bsStyle:"primary",onMouseLeave:function(){return l()}},o.a.createElement(d.Glyphicon,{glyph:"copy"})))},v=n("./node_modules/url/url.js"),x=n.n(v);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=G(e);if(t){var o=G(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,e);var t,n,r,i=E(a);function a(){var e;S(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return M(C(e=i.call.apply(i,[this].concat(n))),"state",{copied:!1,forceDrawer:!1}),M(C(e),"renderTools",(function(){return e.props.showTOCToggle?o.a.createElement(d.Checkbox,{checked:e.state.forceDrawer,onChange:function(){return e.setState({forceDrawer:!e.state.forceDrawer})}},o.a.createElement(f.default,{msgId:"share.forceDrawer"})):null})),M(C(e),"generateUrl",(function(){var t=x.a.parse(e.props.shareUrl,!0);return e.state.forceDrawer&&(t.query.forceDrawer=!0),x.a.format(t)})),e}return t=a,(n=[{key:"render",value:function(){var e=this,t='<iframe style="border: none;" height="400" width="600" src="'+this.generateUrl(this.props.shareUrl)+'"></iframe>';return o.a.createElement("div",{className:"input-link"},o.a.createElement("div",{className:"input-link-head"},o.a.createElement("h4",null,o.a.createElement(f.default,{msgId:"share.embeddedLinkTitle"})),o.a.createElement(h,{copied:this.state.copied,shareUrl:t,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),o.a.createElement("div",{className:"input-link-tools"},this.renderTools()),o.a.createElement("pre",null,o.a.createElement("code",null,t)))}}])&&O(t.prototype,n),r&&O(t,r),a}(o.a.Component);M(_,"propTypes",{shareUrl:a.a.string,showTOCToggle:a.a.bool}),M(_,"defaultProps",{showTOCToggle:!0,shareUrl:""});var A=_;function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}function F(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(a,e);var t,n,r,i=L(a);function a(){var e;N(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return U(k(e=i.call.apply(i,[this].concat(n))),"state",{copied:!1}),e}return t=a,(n=[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"input-link"},o.a.createElement("div",{className:"input-link-head"},o.a.createElement("h4",null,o.a.createElement(f.default,{msgId:"share.directLinkTitle"})),o.a.createElement(h,{copied:this.state.copied,shareUrl:this.props.shareUrl,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),o.a.createElement("pre",{style:{padding:0}},o.a.createElement(d.FormControl,{readOnly:!0,type:"text",value:this.props.shareUrl,onFocus:function(e){return e.target.select()}})))}}])&&R(t.prototype,n),r&&R(t,r),a}(o.a.Component);U(z,"propTypes",{shareUrl:a.a.string});var B=z,V=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),$=n("./MapStore2/web/client/selectors/map.js");function J(e){var t=e.resourceId,n=e.pathTemplate,r=e.enabled,i=e.onClose,a=function(e){var t=e.resourceId,n=e.pathTemplate,r=x.a.parse(location.href),o=r.host,i=r.protocol,a=n.replace(/\{id\}/g,t);return x.a.format({host:o,protocol:i,pathname:a})}({resourceId:t,pathTemplate:n});return o.a.createElement(V.a,{modalClassName:"gn-share-modal",title:o.a.createElement(f.default,{msgId:"share.title"}),show:r,fitContent:!0,clickOutEnabled:!1,onClose:function(){return i()}},o.a.createElement(B,{shareUrl:a}),o.a.createElement(A,{showTOCToggle:!1,shareUrl:a}))}J.propTypes={resourceId:a.a.oneOfType([a.a.number,a.a.string]),pathTemplate:a.a.string,enabled:a.a.bool,onClose:a.a.func},J.defaultProps={resourceId:null,pathTemplate:"/apps/{id}/embed",enabled:!1,onClose:function(){}};var W=Object(c.connect)(Object(u.a)([function(e){var t,n;return null==e||null===(t=e.controls)||void 0===t||null===(n=t.share)||void 0===n?void 0:n.enabled},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id},$.i],(function(e,t,n){return{enabled:e,resourceId:t||(null==n?void 0:n.id)}})),{onClose:s.h.bind(null,"share",null)})(J);t.default=Object(l.d)("Share",{component:W,containers:{BurgerMenu:{name:"share",position:1e3,text:o.a.createElement(f.default,{msgId:"share.title"}),icon:o.a.createElement(d.Glyphicon,{glyph:"share-alt"}),action:s.h.bind(null,"share",null),selector:Object(u.a)((function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.isNew}),(function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}),$.i,(function(e,t,n){return{style:!e&&(t||null!=n&&n.id)?{}:{display:"none"}}}))}},epics:{},reducers:{controls:p.default}})},"./node_modules/copy-to-clipboard/index.js":function(e,t,n){"use strict";var r=n("./node_modules/toggle-selection/index.js"),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,i,a,c,u,l,s=!1;t||(t={}),n=t.debug||!1;try{if(a=r(),c=document.createRange(),u=document.getSelection(),(l=document.createElement("span")).textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=o[t.format]||o.default;window.clipboardData.setData(i,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(l),c.selectNodeContents(l),u.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");s=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),s=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(c):u.removeAllRanges()),l&&document.body.removeChild(l),a()}return s}},"./node_modules/react-copy-to-clipboard/lib/Component.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n("./node_modules/react/index.js")),a=c(n("./node_modules/copy-to-clipboard/index.js"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.CopyToClipboard=function(e){function t(){var e,n,r;u(this,t);for(var o=arguments.length,c=Array(o),s=0;s<o;s++)c[s]=arguments[s];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.onClick=function(e){var t=r.props,n=t.text,o=t.onCopy,c=t.children,u=t.options,l=i.default.Children.only(c),s=(0,a.default)(n,u);o&&o(n,s),l&&l.props&&"function"==typeof l.props.onClick&&l.props.onClick(e)},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["text","onCopy","options","children"]),o=i.default.Children.only(t);return i.default.cloneElement(o,r({},n,{onClick:this.onClick}))}}]),t}(i.default.PureComponent)},"./node_modules/react-copy-to-clipboard/lib/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react-copy-to-clipboard/lib/Component.js").CopyToClipboard;e.exports=r},"./node_modules/toggle-selection/index.js":function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}}}]);