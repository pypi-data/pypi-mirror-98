sources:
  poll:
    poll_interval: 5
    blocks:
      - [4096, 4098]
      - [4102, 4104]
      - [4116, 4118]
      - [4120, 4122]
      - [4132, 4133]
      - [4134, 4135]
      - [4167, 4168]
      - [4170, 4171]
      - [4688, 4690]
parameters:
  voltage-a-n:
    source: poll
    form:
      type: ParamCType
      address: 4096
      idx: voltage-a-n
      data_type: uint
    triggers:
      process:
        store:
          - [always]
        send:
          - [time, 60]
  current-i1:
    source: poll
    form:
      type: ParamCType
      address: 4102
      idx: current-i1
      data_type: uint
    triggers:
      process:
        store:
          - [always]
        send:
          - [time, 60]
  total-active-power:
    source: poll
    form:
      type: ParamCType
      address: 4116
      idx: total-active-power
      data_type: uint
    triggers:
      process:
        store:
          - [always]
        send:
          - [time, 60]
  total-apparent-power:
    source: poll
    form:
      type: ParamCType
      address: 4120
      idx: total-apparent-power
      data_type: uint
    triggers:
      process:
        store:
          - [always]
        send:
          - [time, 60]
  total-power-factor:
    source: poll
    form:
      type: ParamCType
      address: 4132
      idx: total-power-factor
      data_type: short
    triggers:
      process:
        store:
          - [always]
        send:
          - [time, 60]
  frequency:
    source: poll
    form:
      type: ParamCType
      address: 4134
      idx: frequency
      data_type: ushort
    triggers:
      process:
        store:
          - [always]
        send:
          - [time, 60]
  phase1-power-factor-sector:
    source: poll
    form:
      type: ParamCType
      address: 4167
      idx: phase1-power-factor-sector
      data_type: ushort
    triggers:
      process:
        store:
          - [always]
  voltage-a-n-thd:
    source: poll
    form:
      type: ParamCType
      address: 4170
      idx: voltage-a-n-thd
      data_type: ushort
    triggers:
      process:
        store:
          - [always]
        send:
          - [time, 60]
  total-positive-energy:
    source: poll
    form:
      type: ParamCType
      address: 4688
      idx: total-positive-energy
      data_type: uint
    triggers:
      process:
        store:
          - [always]
        send:
          - [time, 60]
  modbus-comms-status:
    source: status
    triggers:
      process:
        event:
          - [state]
        send:
          - [state]
          - [time, 60]
