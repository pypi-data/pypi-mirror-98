(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-690ef4aa"],{"2ca0":function(e,t,a){"use strict";var r=a("23e7"),n=a("06cf").f,c=a("50c4"),i=a("5a34"),s=a("1d80"),o=a("ab13"),u=a("c430"),l="".startsWith,d=Math.min,f=o("startsWith"),b=!u&&!f&&!!function(){var e=n(String.prototype,"startsWith");return e&&!e.writable}();r({target:"String",proto:!0,forced:!b&&!f},{startsWith:function(e){var t=String(s(this));i(e);var a=c(d(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return l?l.call(t,r,a):t.slice(a,a+r.length)===r}})},"3fc7":function(e,t,a){"use strict";a("f43d")},4626:function(e,t,a){"use strict";a.r(t);a("b64b");var r=a("7a23"),n=Object(r["K"])("data-v-a0c26180");Object(r["u"])("data-v-a0c26180");var c={class:"camera"},i={class:"camera-selector"},s={class:"left"},o={key:0,selected:"",disabled:""},u={class:"right"},l=Object(r["h"])("i",{class:"fas fa-sync-alt",title:"Refresh cameras"},null,-1),d={class:"camera-container"},f={class:"frame-container",ref:"frameContainer"},b={key:0,class:"no-frame"},m={class:"frame",ref:"frame",alt:"",src:""},h={class:"controls"},p={class:"left"},g=Object(r["h"])("i",{class:"fa fa-play",title:"Start video"},null,-1),v=Object(r["h"])("i",{class:"fa fa-stop",title:"Stop video"},null,-1),O=Object(r["h"])("i",{class:"fas fa-camera",title:"Take a picture"},null,-1),j={class:"right"},y=Object(r["h"])("i",{class:"fas fa-retweet",title:"Flip camera"},null,-1),C=Object(r["h"])("i",{class:"fa fa-volume-mute",title:"Start audio"},null,-1),S=Object(r["h"])("i",{class:"fa fa-volume-up",title:"Stop audio"},null,-1),k={class:"sound-container"},w={key:0,autoplay:"",preload:"none",ref:"player"},x=Object(r["g"])(" Your browser does not support audio elements ");Object(r["s"])();var _=n((function(e,t,a,n,_,E){var $=Object(r["z"])("Loading");return Object(r["r"])(),Object(r["e"])("div",c,[_.loading?(Object(r["r"])(),Object(r["e"])($,{key:0})):Object(r["f"])("",!0),Object(r["h"])("div",i,[Object(r["h"])("div",s,[Object(r["h"])("label",null,[Object(r["h"])("select",{ref:"cameraSelector",onChange:t[1]||(t[1]=function(){return E.onCameraSelected.apply(E,arguments)})},[Object.keys(_.cameras).length?Object(r["f"])("",!0):(Object(r["r"])(),Object(r["e"])("option",o,"-- No cameras available")),(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(Object.keys(_.cameras),(function(e){return Object(r["r"])(),Object(r["e"])("option",{key:e,value:e,textContent:Object(r["C"])(e)},null,8,["value","textContent"])})),128))],544)])]),Object(r["h"])("div",u,[Object(r["h"])("button",{type:"button",onClick:t[2]||(t[2]=function(){return E.updateCameraStatus.apply(E,arguments)}),disabled:_.loading},[l],8,["disabled"])])]),Object(r["h"])("div",d,[Object(r["h"])("div",f,[_.streaming||_.capturing||_.captured?Object(r["f"])("",!0):(Object(r["r"])(),Object(r["e"])("div",b,"The camera is not active")),Object(r["h"])("img",m,null,512)],512),Object(r["h"])("div",h,[Object(r["h"])("div",p,[_.streaming?(Object(r["r"])(),Object(r["e"])("button",{key:1,type:"button",onClick:t[4]||(t[4]=function(){return E.stopStreaming.apply(E,arguments)}),disabled:_.capturing||_.loading},[v],8,["disabled"])):(Object(r["r"])(),Object(r["e"])("button",{key:0,type:"button",onClick:t[3]||(t[3]=function(){return E.startStreaming.apply(E,arguments)}),disabled:_.capturing||_.loading},[g],8,["disabled"])),Object(r["h"])("button",{type:"button",onClick:t[5]||(t[5]=function(){return E.capture.apply(E,arguments)}),disabled:_.streaming||_.capturing||_.loading},[O],8,["disabled"])]),Object(r["h"])("div",j,[Object(r["h"])("button",{type:"button",onClick:t[6]||(t[6]=function(){return E.flipCamera.apply(E,arguments)}),disabled:_.loading},[y],8,["disabled"]),_.recording?(Object(r["r"])(),Object(r["e"])("button",{key:1,type:"button",onClick:t[8]||(t[8]=function(e){return _.recording=!1}),disabled:_.loading},[S],8,["disabled"])):(Object(r["r"])(),Object(r["e"])("button",{key:0,type:"button",onClick:t[7]||(t[7]=function(e){return _.recording=!0}),disabled:_.loading},[C],8,["disabled"]))])])]),Object(r["h"])("div",k,[_.recording?(Object(r["r"])(),Object(r["e"])("audio",w,[Object(r["h"])("source",{src:_.cameras[_.selectedCamera].audio_url,type:"audio/x-wav;codec=pcm"},null,8,["src"]),x],512)):Object(r["f"])("",!0)])])})),E=(a("13d5"),a("b0c0"),a("ac1f"),a("5319"),a("2ca0"),a("96cf"),a("1da1")),$=a("3e54"),A=a("3a5e"),R={name:"CameraAndroidIpcam",components:{Loading:A["a"]},mixins:[$["a"]],data:function(){return{loading:!1,streaming:!1,capturing:!1,recording:!1,captured:!1,cameras:{},selectedCamera:void 0}},computed:{config:function(){return this.$root.config["camera.android.ipcam"]}},methods:{startStreaming:function(){if(!this.streaming){var e=this.cameras[this.selectedCamera];this.streaming=!0,this.capturing=!1,this.captured=!1,this.$refs.frame.setAttribute("src",e.stream_url)}},stopStreaming:function(){this.streaming&&(this.streaming=!1,this.capturing=!1,this.$refs.frame.removeAttribute("src"))},capture:function(){if(!this.capturing){var e=this.cameras[this.selectedCamera];this.streaming=!1,this.capturing=!0,this.captured=!0,this.$refs.frame.setAttribute("src",e.image_url+"?t="+(new Date).getTime())}},onFrameLoaded:function(){this.capturing&&(this.capturing=!1)},onCameraSelected:function(e){this.selectedCamera=e.target.value},flipCamera:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.cameras[e.selectedCamera],e.loading=!0,t.prev=2,r=!a.ffc,t.next=6,e.request("camera.android.ipcam.set_front_facing_camera",{activate:r,camera:a.name});case 6:e.cameras[e.selectedCamera].ffc=r;case 7:return t.prev=7,e.loading=!1,t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[2,,7,10]])})))()},updateCameraStatus:function(){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.request("camera.android.ipcam.status");case 4:a=t.sent,e.cameras=a.reduce((function(t,a){for(var r=0,n=["stream_url","image_url","audio_url"];r<n.length;r++){var c=n[r];a[c].startsWith("https://")&&(a[c]=a[c].replace("https://","http://")),a.name in e.config.cameras&&e.config.cameras[a.name].username&&(a[c]="http://"+e.config.cameras[a.name].username+":"+e.config.cameras[a.name].password+"@"+a[c].substr(7))}return t[a.name]=a,t}),{}),a.length&&(e.selectedCamera=a[0].name);case 7:return t.prev=7,e.loading=!1,t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[1,,7,10]])})))()}},mounted:function(){this.$refs.frame.addEventListener("load",this.onFrameLoaded),this.updateCameraStatus()}};a("3fc7");R.render=_,R.__scopeId="data-v-a0c26180";t["default"]=R},5319:function(e,t,a){"use strict";var r=a("d784"),n=a("825a"),c=a("7b0b"),i=a("50c4"),s=a("a691"),o=a("1d80"),u=a("8aa5"),l=a("14c3"),d=Math.max,f=Math.min,b=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g,p=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,a,r){var g=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=r.REPLACE_KEEPS_$0,O=g?"$":"$0";return[function(a,r){var n=o(this),c=void 0==a?void 0:a[e];return void 0!==c?c.call(a,n,r):t.call(String(n),a,r)},function(e,r){if(!g&&v||"string"===typeof r&&-1===r.indexOf(O)){var c=a(t,e,this,r);if(c.done)return c.value}var o=n(e),b=String(this),m="function"===typeof r;m||(r=String(r));var h=o.global;if(h){var y=o.unicode;o.lastIndex=0}var C=[];while(1){var S=l(o,b);if(null===S)break;if(C.push(S),!h)break;var k=String(S[0]);""===k&&(o.lastIndex=u(b,i(o.lastIndex),y))}for(var w="",x=0,_=0;_<C.length;_++){S=C[_];for(var E=String(S[0]),$=d(f(s(S.index),b.length),0),A=[],R=1;R<S.length;R++)A.push(p(S[R]));var T=S.groups;if(m){var I=[E].concat(A,$,b);void 0!==T&&I.push(T);var L=String(r.apply(void 0,I))}else L=j(E,b,$,A,T,r);$>=x&&(w+=b.slice(x,$)+L,x=$+E.length)}return w+b.slice(x)}];function j(e,a,r,n,i,s){var o=r+e.length,u=n.length,l=h;return void 0!==i&&(i=c(i),l=m),t.call(s,l,(function(t,c){var s;switch(c.charAt(0)){case"$":return"$";case"&":return e;case"`":return a.slice(0,r);case"'":return a.slice(o);case"<":s=i[c.slice(1,-1)];break;default:var l=+c;if(0===l)return t;if(l>u){var d=b(l/10);return 0===d?t:d<=u?void 0===n[d-1]?c.charAt(1):n[d-1]+c.charAt(1):t}s=n[l-1]}return void 0===s?"":s}))}}))},"5a34":function(e,t,a){var r=a("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},ab13:function(e,t,a){var r=a("b622"),n=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[n]=!1,"/./"[e](t)}catch(r){}}return!1}},f43d:function(e,t,a){}}]);
//# sourceMappingURL=chunk-690ef4aa.f4ca9bdd.js.map