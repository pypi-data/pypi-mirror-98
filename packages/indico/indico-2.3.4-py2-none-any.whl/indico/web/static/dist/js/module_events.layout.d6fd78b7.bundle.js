!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1967)}({1967:function(e,t,n){e.exports=n(1968)},1968:function(e,t){!function(e){"use strict";window.initMenuSortable=function(){var e=null,t=!1;function n(t,n){if(e[0]===n.placeholder.parent()[0])return!0;if(!n.item.hasClass("nestable"))return!1;var r=n.placeholder.closest(".menu-entry").parent();return void 0===r[0]||r.hasClass("allow-nested")}$(".menu-entries.ui-sortable").sortable("destroy"),$(".menu-entries").sortable({handle:".drag-handle",placeholder:"menu-entry-placeholder",axis:"y",connectWith:".connect-menu",start:function(t,n){e=$(this),n.item.hasClass("nestable")&&(1===e.children().not(".menu-entry-placeholder").length&&e.addClass("empty"),$(".menu-entries > .allow-nested > .menu-entry > .menu-entries.empty").addClass("expand").parent(".menu-entry").addClass("with-children"),n.item.find("> .menu-entry > .menu-entries.empty").removeClass("expand").parent(".menu-entry").removeClass("with-children")),n.placeholder.height(n.helper.outerHeight())},beforeStop:function(e,r){t=!n(0,r)},stop:function(n,r){if($(".menu-entries").removeClass("hide-placeholder"),r.item.hasClass("nestable")&&$(".menu-entries > .allow-nested > .menu-entry > .menu-entries.empty").removeClass("expand").parent(".menu-entry").removeClass("with-children"),t)$(this).sortable("cancel");else if(r.item.hasClass("nestable")){r.item.closest(".menu-entries").removeClass("empty").parent(".menu-entry").addClass("with-children").parent().removeClass("nestable");var a=void 0===r.item.closest(".menu-entry")[0];a||r.item.removeClass("allow-nested"),a&&r.item.find("> .menu-entry > .menu-entries")&&r.item.addClass("allow-nested"),e.children().length||e.addClass("empty").closest(".menu-entry").parent().addClass("nestable")}e=null},over:function(e,t){n(0,t)||t.placeholder.closest(".menu-entries").addClass("hide-placeholder")},update:function(e,n){if(this===n.item.parent()[0]&&!t){e.stopPropagation();var r={},a=n.item.prev().children(".menu-entry").data("position");null!==a&&(r.position=a);var o=n.item.closest(".menu-entry").data("entry-id");null!==o&&(r.parent_id=o),$.ajax({url:n.item.children(".menu-entry").data("position-url"),method:"POST",dataType:"json",data:r,complete:IndicoUI.Dialogs.Util.progress(),error:handleAjaxError})}}})},$(document).on("click",".menu-entry > .i-label > .actions > .edit-entry",(function(e){e.preventDefault(),e.stopPropagation(),ajaxDialog({trigger:this,url:$(this).data("href"),title:$T.gettext("Menu Entry Settings"),onClose:function(e){e&&$(this.trigger).closest(".menu-entry").replaceWith(e.entry)}})})).on("indico:confirmed",".menu-entry .enabled, .menu-entry .not-enabled",(function(e){e.stopPropagation(),e.preventDefault();var t=$(this);$.ajax({url:t.data("href"),method:t.data("method"),complete:IndicoUI.Dialogs.Util.progress(),error:handleAjaxError,success:function(e){var n=e.is_enabled;t.toggleClass("enabled",n).toggleClass("not-enabled",!n).parent(".actions").parent(".i-label").toggleClass("striped",!n)}})})).on("indico:confirmed",".menu-entry .default, .menu-entry .not-default",(function(e){e.stopPropagation(),e.preventDefault();var t=$(this);$.ajax({url:t.data("href"),method:t.data("method"),complete:IndicoUI.Dialogs.Util.progress(),error:handleAjaxError,success:function(e){var n=e.is_default;$(".menu-entry .default").removeClass("default").addClass("not-default"),t.toggleClass("default",n).toggleClass("not-default",!n)}})})).on("indico:confirmed",".menu-entry .delete-entry",(function(e){e.preventDefault();var t=$(this);$.ajax({url:t.data("href"),method:t.data("method"),complete:IndicoUI.Dialogs.Util.progress(),error:handleAjaxError,success:function(e){e&&($("#menu-entries > .menu-entries").replaceWith(e.menu),initMenuSortable())}})}))}()}});
//# sourceMappingURL=module_events.layout.d6fd78b7.bundle.js.map