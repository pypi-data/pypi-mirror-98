[target]
description = Device Tree Blobs
dependencies = config
preconditions = test -d arch/{target_arch}/boot/dts && grep -q ^dtbs_install: {source_tree}/Makefile
commands = {make} dtbs
    && mkdir -p {build_dir}/dtbsinstall/dtbs
    && {make} dtbs_install INSTALL_DTBS_PATH={build_dir}/dtbsinstall/dtbs
    && tar caf {build_dir}/dtbs.tar.xz -C {build_dir}/dtbsinstall dtbs

[artifacts]
dtbs.tar.xz = dtbs.tar.xz
