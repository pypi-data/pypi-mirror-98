{
  "enrichment": [
    {
      "data": [
        {
          "127.0.0.1": {
            "metrics_groups": [
              {
                "dimensions": {},
                "group_name": "environment",
                "metrics": {
                  "fans_ok": {
                    "metric_type": "gauge",
                    "value": "len([x for x in fan_statuses.values() if x == '2'])"
                  },
                  "fans_total": 1
                }
              },
              {
                "dimensions": {},
                "group_name": "environment",
                "metrics": {
                  "power_units_on": {
                    "metric_type": "gauge",
                    "value": "len([(x,y) for (x,y) in entity_fru_control.items() if x in power_supplies and y in ['2', '9', '12']])"
                  },
                  "power_units_total": 2
                }
              },
              {
                "dimensions": {
                  "sensor": "temp_sensor_name.$index"
                },
                "group_name": "environment",
                "metrics": {
                  "temperature_fahrenheit": {
                    "indices_from": "temp_sensor_scales",
                    "metric_type": "gauge",
                    "transform": "lambda x: round((x * 1.8) + 32, 2)",
                    "type": "float",
                    "value": "int(ent_sensor_values.$index) * temp_sensor_scales.$index"
                  }
                }
              },
              {
                "dimensions": {
                  "cpu_name": "cpu_name.$index",
                  "cpu_no": "cpu_no.$index",
                  "cpu_type": "'ctrl'"
                },
                "group_name": "cpu",
                "metrics": {
                  "cpu_utilization": {
                    "metric_type": "gauge",
                    "value": "cpu_util.$index"
                  }
                }
              },
              {
                "dimensions": {
                  "memory_type": "memory_name.$index"
                },
                "group_name": "memory",
                "metrics": {
                  "memory_total": {
                    "metric_type": "gauge",
                    "value": "memory_total.$index"
                  },
                  "memory_used": {
                    "metric_type": "gauge",
                    "value": "memory_used.$index"
                  }
                }
              }
            ],
            "oids": {
              "cpu_name": {
                "method": "static",
                "values": {
                  "1": "Switch System"
                }
              },
              "cpu_no": {
                "method": "static",
                "values": {
                  "1": "Module 1"
                }
              },
              "cpu_util": {
                "method": "bulk_walk",
                "oid": ".1.3.6.1.4.1.9.9.109.1.1.1.1.8"
              },
              "ent_sensor_values": {
                "method": "bulk_walk",
                "oid": ".1.3.6.1.4.1.9.9.91.1.1.1.1.4"
              },
              "entity_fru_control": {
                "method": "bulk_walk",
                "oid": ".1.3.6.1.4.1.9.9.117.1.1.2.1.2"
              },
              "fan_statuses": {
                "method": "bulk_walk",
                "oid": ".1.3.6.1.4.1.9.9.117.1.4.1.1.1"
              },
              "memory_name": {
                "method": "static",
                "values": {
                  "1": "Processor"
                }
              },
              "memory_total": {
                "method": "static",
                "values": {
                  "1": 1002273800
                }
              },
              "memory_used": {
                "method": "bulk_walk",
                "oid": ".1.3.6.1.4.1.9.9.48.1.1.1.5"
              },
              "power_status": {
                "method": "bulk_walk",
                "oid": ".1.3.6.1.4.1.9.9.13.1.5.1.3"
              },
              "power_supplies": {
                "method": "static",
                "values": {
                  "7": "Power Supply 1",
                  "10": "Power Supply 2"
                }
              },
              "temp_sensor_name": {
                "method": "static",
                "values": {
                  "1117": "Te1/49 Module Temperature Sensor",
                  "1118": "Te1/50 Module Temperature Sensor"
                }
              },
              "temp_sensor_scales": {
                "method": "static",
                "values": {
                  "1117": 0.1,
                  "1118": 0.1
                }
              }
            }
          }
        }
      ],
      "metadata": {
        "_enrichment_group_creation_timestamp": 1512629517.03121,
        "_enrichment_ttl": 300,
        "_execute_frequency": 60
      },
      "namespace": "metrics"
    }
  ],
  "enrichment_group_set_creation_timestamp": 1512629517.03121,
  "resource": {
    "resource_class": "network",
    "resource_creation_timestamp": 1512629517.03121,
    "resource_endpoint": "127.0.0.1",
    "resource_id": "4948E",
    "resource_metadata": {
      "_resource_ttl": "604800",
      "backplane": "backplane",
      "model": "4948E"
    },
    "resource_plugin": "dummy",
    "resource_site": "test_site",
    "resource_subclass": "test_subclass",
    "resource_type": "test_type"
  }
}
