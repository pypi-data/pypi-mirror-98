syntax = "proto3";

import "google/protobuf/timestamp.proto";
import "google/protobuf/struct.proto";
import "google/protobuf/field_mask.proto";
import "google/protobuf/empty.proto";

import "common.proto";
import "integration_source.proto";

option java_package = "io.calixa.domain.account";
option java_multiple_files = true;
option optimize_for = SPEED;

package calixa.domain.account;

enum AccountStatus {
    ACCOUNT_STATUS_UNSPECIFIED = 0;
    ACCOUNT_ACTIVE = 1;
    ACCOUNT_SUSPENDED = 2;
    ACCOUNT_DELETED = 3;
}

enum OpportunityStatus {
    OPPORTUNITY_STATUS_UNSPECIFIED = 0;
    OPPORTUNITY_STATUS_OPEN = 1;
    OPPORTUNITY_STATUS_CLOSED = 2;
    OPPORTUNITY_STATUS_WON = 3;
    OPPORTUNITY_STATUS_LOST = 4;
    OPPORTUNITY_STATUS_CLOSED_WON = 5;
}

message Opportunity {
    reserved 10; // int32 line_item_quantity = 10;
    string name = 1;
    string description = 2;
    string stage = 3;
    string type = 4;
    string next_step = 5;
    string owner = 6;
    string created_by_user_id = 7;
    string last_modified_by_user_id = 8;
    double probability = 9;
    OpportunityStatus opportunity_status = 11;
    calixa.domain.common.Amount amount = 12;
    google.protobuf.Timestamp closed_at = 13;
    google.protobuf.Timestamp last_activity_at = 14;
    double line_item_quantity = 15;
}

message Account {
    string account_id = 1 [deprecated = true];
    string organization_id = 2 [deprecated = true];
    string canonical_id = 12 [deprecated = true];

    string name = 4;
    AccountStatus status = 5;
    string domain_name = 6;
    string created_by_user_id = 7;
    google.protobuf.Struct properties = 8;
    string address_id = 9 [deprecated = true];
    common.Address address = 13;

    // Output only fields
    // https://cloud.google.com/apis/design/design_patterns#output_fields
    google.protobuf.Timestamp created_at = 10 [deprecated = true];
    google.protobuf.Timestamp updated_at = 11 [deprecated = true];
}

enum AccountUserStatus {
    ACCOUNT_USER_STATUS_UNSPECIFIED = 0;
    ACCOUNT_USER_ACTIVE = 1;
    ACCOUNT_USER_SUSPENDED = 2;
    ACCOUNT_USER_DELETED = 3;
    ACCOUNT_USER_INVITED = 4;

    // Try to keep aligned with OrganizationUserStatus.
}

// TODO(pras): remove this message
message AccountAssociation {
    string account_id = 1;
    string role_id = 2;
    string account_user_id = 3;
    string canonical_account_id = 4;
    string canonical_account_user_id = 5;
    google.protobuf.Timestamp created_at = 20;
    google.protobuf.Timestamp updated_at = 21;
}

// TODO(pras): remove this message
message AccountAssociationWithOrg {
    string organization_id = 1;
    string account_id = 2;
    string role_id = 3;
    string account_user_id = 4;
    string canonical_account_id = 5;
    string canonical_account_user_id = 6;
    google.protobuf.Timestamp created_at = 500;
    google.protobuf.Timestamp updated_at = 501;
}

// TODO(pras): remove this message
message AccountUserAssociation {
    // This is the inverse of AccountAssociation
    string account_user_id = 1;
    string role_id = 2;
    string canonical_account_user_id = 3;
}

message AccountUser {
    string account_user_id = 1 [deprecated = true];
    string organization_id = 3 [deprecated = true];
    string email = 4;

    AccountUserStatus status = 5;
    google.protobuf.Timestamp last_login_at = 6;
    google.protobuf.Timestamp last_seen_at = 12;
    string first_name = 7;
    string last_name = 8;

    google.protobuf.Struct properties = 10;
    string canonical_id = 11 [deprecated = true];

    // Output only fields
    // https://cloud.google.com/apis/design/design_patterns#output_fields
    google.protobuf.Timestamp created_at = 20 [deprecated = true];
    google.protobuf.Timestamp updated_at = 21 [deprecated = true];
}

message AccountUserRole {
    string organization_id = 1 [deprecated = true];
    string account_user_role_id = 2 [deprecated = true];
    string name = 3;

    google.protobuf.Timestamp created_at = 20 [deprecated = true];
    google.protobuf.Timestamp updated_at = 21 [deprecated = true];
}
