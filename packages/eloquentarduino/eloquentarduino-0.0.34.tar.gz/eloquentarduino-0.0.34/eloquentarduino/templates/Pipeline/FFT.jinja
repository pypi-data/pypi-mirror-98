for (int feature = 0; feature < {{ featurewise }}; feature++) {
    arduinoFFT fft;
    double real[{{ fft_length }}] = {0};
    double imag[{{ fft_length }}] = {0};

    for (int i = feature, j = 0; i < {{ input_dim }}; i += {{ featurewise }}, j++) {
        real[j] = x[i];
    }

    fft.Compute(real, imag, {{ fft_length }}, FFT_FORWARD);
    fft.ComplexToMagnitude(real, imag, {{ fft_length }});

    for (int i = 0, j = feature; i < {{ fft_length // 2 }}; i++, j += {{ featurewise }}) {
        xt[j] = real[i];
    }
}