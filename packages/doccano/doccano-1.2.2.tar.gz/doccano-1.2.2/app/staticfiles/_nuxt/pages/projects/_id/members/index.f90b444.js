(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{1066:function(e,t,r){"use strict";var n=r(589);r.n(n).a},1067:function(e,t,r){(t=r(24)(!1)).push([e.i,"[data-v-5f4f3fea] .v-dialog{width:800px}",""]),e.exports=t},1093:function(e,t,r){"use strict";r.r(t);r(16);var n=r(1),o=r(2),c=o.a.extend({props:{isLoading:{type:Boolean,default:!1,required:!0},items:{type:Array,default:function(){return[]},required:!0},value:{type:Array,default:function(){return[]},required:!0}},data:function(){return{search:""}},computed:{headers:function(){return[{text:this.$t("generic.name"),value:"username"},{text:this.$t("members.role"),value:"rolename"},{text:"Actions",value:"actions",sortable:!1}]}}}),l=r(28),d=r(32),m=r.n(d),f=r(1095),v=r(171),h=r(498),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-data-table",{attrs:{value:e.value,headers:e.headers,items:e.items,search:e.search,loading:e.isLoading,"loading-text":e.$t("generic.loading"),"no-data-text":e.$t("vuetify.noDataAvailable"),"footer-props":{showFirstLastPage:!0,"items-per-page-options":[5,10,15,e.$t("generic.all")],"items-per-page-text":e.$t("vuetify.itemsPerPageText"),"page-text":e.$t("dataset.pageText")},"item-key":"id","show-select":""},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-text-field",{attrs:{"prepend-inner-icon":"search",label:e.$t("generic.search"),"single-line":"","hide-details":"",filled:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"item.rolename",fn:function(t){var r=t.item;return[e._v("\n    "+e._s(e.$translateRole(r.rolename,e.$t("members.roles")))+"\n  ")]}},{key:"item.actions",fn:function(t){var n=t.item;return[r("v-icon",{attrs:{small:""},on:{click:function(t){return e.$emit("edit",n)}}},[e._v("\n      mdi-pencil\n    ")])]}}],null,!0)})}),[],!1,null,null,null),x=component.exports;m()(component,{VDataTable:f.a,VIcon:v.a,VTextField:h.a});var $=r(497),y=o.a.extend({components:{ConfirmForm:$.a},props:{selected:{type:Array,default:function(){return[]}}}}),_=Object(l.a)(y,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("confirm-form",{attrs:{items:e.selected,title:e.$t("members.removeMember"),message:e.$t("members.removePrompt"),"item-key":"username"},on:{ok:function(t){return e.$emit("remove")},cancel:function(t){return e.$emit("cancel")}}})}),[],!1,null,null,null).exports,k=(r(14),r(10),r(9),r(7),r(11),r(5)),j=r(492);function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(k.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var I=o.a.extend({components:{BaseCard:j.a},props:{value:{type:Object,required:!0},errorMessage:{type:String,default:""}},fetch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.$services.user.list(e.username);case 3:e.users=t.sent,e.isLoading=!1;case 5:case"end":return t.stop()}}),t)})))()},data:function(){return{isLoading:!1,valid:!1,users:[],roles:[],username:"",rules:{userRequired:function(e){return!!e&&!!e.username||"Required"},roleRequired:function(e){return!!e&&!!e.rolename||"Required"}}}},computed:{user:{get:function(){return{id:this.value.user,username:this.value.username}},set:function(e){if(void 0!==e){var t={user:e.id,username:e.username};this.$emit("input",O(O({},this.value),t))}}},role:{get:function(){return{id:this.value.role,rolename:this.value.rolename}},set:function(e){var t={role:e.id,rolename:e.rolename};this.$emit("input",O(O({},this.value),t))}}},watch:{username:function(){this.users.length>0||this.isLoading||this.$fetch()}},created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$services.role.list();case 2:e.roles=t.sent;case 3:case"end":return t.stop()}}),t)})))()}}),C=r(595),V=r(557),T=r(507),R=r(563),S=r(508),D=r(532),L=Object(l.a)(I,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("base-card",{attrs:{disabled:!e.valid,title:e.$t("members.addMember"),"agree-text":e.$t("generic.save"),"cancel-text":e.$t("generic.cancel")},on:{agree:function(t){return e.$emit("save")},cancel:function(t){return e.$emit("cancel")}},scopedSlots:e._u([{key:"content",fn:function(){return[r("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-autocomplete",{attrs:{items:e.users,loading:e.isLoading,"search-input":e.username,"hide-no-data":"","item-text":"username",label:e.$t("members.userSearchAPIs"),placeholder:e.$t("members.userSearchPrompt"),"prepend-icon":"mdi-account",rules:[e.rules.userRequired],"return-object":""},on:{"update:searchInput":function(t){e.username=t},"update:search-input":function(t){e.username=t}},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}}),e._v(" "),r("v-select",{attrs:{items:e.roles,"item-text":"rolename","item-value":"id",label:e.$t("members.role"),rules:[e.rules.roleRequired],"return-object":"","prepend-icon":"mdi-credit-card-outline"},scopedSlots:e._u([{key:"item",fn:function(t){return[e._v("\n          "+e._s(e.$translateRole(t.item.rolename,e.$t("members.roles")))+"\n        ")]}},{key:"selection",fn:function(t){return[e._v("\n          "+e._s(e.$translateRole(t.item.rolename,e.$t("members.roles")))+"\n        ")]}}]),model:{value:e.role,callback:function(t){e.role=t},expression:"role"}}),e._v(" "),r("v-alert",{directives:[{name:"show",rawName:"v-show",value:e.errorMessage,expression:"errorMessage"}],attrs:{prominent:"",type:"error"}},[r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"grow"},[e._v("\n            "+e._s(e.errorMessage)+"\n          ")])],1)],1)],1)]},proxy:!0}])})}),[],!1,null,null,null),P=L.exports;m()(L,{VAlert:C.a,VAutocomplete:V.a,VCol:T.a,VForm:R.a,VRow:S.a,VSelect:D.a});var M=o.a.extend({layout:"project",components:{MemberList:x,FormCreate:P,FormDelete:_},fetch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,t.next=4,e.$services.member.list(e.projectId);case 4:e.items=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e.$router.push("/projects/".concat(e.projectId));case 10:return t.prev=10,e.isLoading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[1,7,10,13]])})))()},data:function(){return{dialogCreate:!1,dialogDelete:!1,editedIndex:-1,editedItem:{user:-1,role:-1,username:"",rolename:""},defaultItem:{user:-1,role:-1,username:"",rolename:""},items:[],selected:[],isLoading:!1,errorMessage:""}},computed:{canDelete:function(){return this.selected.length>0},projectId:function(){return this.$route.params.id}},methods:{create:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$services.member.create(e.projectId,e.editedItem);case 3:e.close(),e.$fetch(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.errorMessage=t.t0.message;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},update:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$services.member.update(e.projectId,e.editedItem);case 3:e.close(),e.$fetch(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.errorMessage=t.t0.message;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},save:function(){this.editedIndex>-1?this.update():this.create()},close:function(){var e=this;this.dialogCreate=!1,this.errorMessage="",this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},remove:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$services.member.bulkDelete(e.projectId,e.selected);case 2:e.$fetch(),e.dialogDelete=!1,e.selected=[];case 5:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=Object.assign({},e),this.dialogCreate=!0}},validate:function(e){var t=e.params;return/^\d+$/.test(t.id)}}),A=(r(1066),r(192)),E=r(506),F=r(490),B=r(569),z=Object(l.a)(M,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[r("v-btn",{staticClass:"text-capitalize",attrs:{color:"primary"},on:{click:function(t){t.stopPropagation(),e.dialogCreate=!0}}},[e._v("\n      "+e._s(e.$t("generic.add"))+"\n    ")]),e._v(" "),r("v-btn",{staticClass:"text-capitalize ms-2",attrs:{disabled:!e.canDelete,outlined:""},on:{click:function(t){t.stopPropagation(),e.dialogDelete=!0}}},[e._v("\n      "+e._s(e.$t("generic.delete"))+"\n    ")]),e._v(" "),r("v-dialog",{model:{value:e.dialogCreate,callback:function(t){e.dialogCreate=t},expression:"dialogCreate"}},[r("form-create",{attrs:{"error-message":e.errorMessage},on:{cancel:e.close,save:e.save},model:{value:e.editedItem,callback:function(t){e.editedItem=t},expression:"editedItem"}})],1),e._v(" "),r("v-dialog",{model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[r("form-delete",{attrs:{selected:e.selected},on:{cancel:function(t){e.dialogDelete=!1},remove:e.remove}})],1)],1),e._v(" "),r("member-list",{attrs:{items:e.items,"is-loading":e.isLoading},on:{edit:e.editItem},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)}),[],!1,null,"5f4f3fea",null);t.default=z.exports;m()(z,{VBtn:A.a,VCard:E.a,VCardTitle:F.c,VDialog:B.a})},492:function(e,t,r){"use strict";var n=r(2).a.extend({props:{title:{type:String,default:"",required:!0},cancelText:{type:String,default:""},agreeText:{type:String,default:""},disabled:{type:Boolean,default:!1}},methods:{agree:function(){this.$emit("agree")},cancel:function(){this.$emit("cancel")}}}),o=r(28),c=r(32),l=r.n(c),d=r(192),m=r(506),f=r(490),v=r(556),h=r(53),x=r(181),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-toolbar",{attrs:{color:"primary white--text",flat:""}},[r("v-toolbar-title",[e._v(e._s(e.title))])],1),e._v(" "),r("v-card-text",{staticClass:"text--primary mt-3 pl-4"},[e._t("content")],2),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),e.cancelText?r("v-btn",{staticClass:"text-capitalize",attrs:{text:"",color:"primary","data-test":"cancel-button"},on:{click:e.cancel}},[e._v("\n      "+e._s(e.cancelText)+"\n    ")]):e._e(),e._v(" "),e.agreeText?r("v-btn",{staticClass:"text-none",attrs:{disabled:e.disabled,text:"","data-test":"delete-button"},on:{click:e.agree}},[e._v("\n      "+e._s(e.agreeText)+"\n    ")]):e._e()],1)],1)}),[],!1,null,null,null);t.a=component.exports;l()(component,{VBtn:d.a,VCard:m.a,VCardActions:f.a,VCardText:f.b,VSpacer:v.a,VToolbar:h.a,VToolbarTitle:x.a})},497:function(e,t,r){"use strict";var n=r(2),o=r(492),c=n.a.extend({components:{BaseCard:o.a},props:{title:{type:String,default:"",required:!0},message:{type:String,default:"",required:!0},items:{type:Array,default:function(){return[]},required:!1},itemKey:{type:String,default:"",required:!1},buttonTrueText:{type:String,default:"Yes"},buttonFalseText:{type:String,default:"Cancel"}},methods:{ok:function(){this.$emit("ok")},cancel:function(){this.$emit("cancel")}}}),l=r(28),d=r(32),m=r.n(d),f=r(172),v=r(107),h=r(39),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("base-card",{attrs:{title:e.title,"agree-text":e.buttonTrueText,"cancel-text":e.buttonFalseText},on:{agree:e.ok,cancel:e.cancel},scopedSlots:e._u([{key:"content",fn:function(){return[e._v("\n    "+e._s(e.message)+"\n    "),r("v-list",{attrs:{dense:""}},e._l(e.items,(function(t,i){return r("v-list-item",{key:i},[r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(t[e.itemKey]))])],1)],1)})),1)]},proxy:!0}])})}),[],!1,null,null,null);t.a=component.exports;m()(component,{VList:f.a,VListItem:v.a,VListItemContent:h.b,VListItemTitle:h.d})},589:function(e,t,r){var content=r(1067);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(25).default)("03ecb162",content,!0,{sourceMap:!1})}}]);