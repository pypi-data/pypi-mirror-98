(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{1089:function(e,t,n){"use strict";n.r(t);n(16);var r=n(1),o=n(2),l=n(188),c=n.n(l),d=(n(334),n(18),n(19),n(7),n(29),o.a.extend({props:{isLoading:{type:Boolean,default:!1,required:!0},items:{type:Array,default:function(){return[]},required:!0},value:{type:Array,default:function(){return[]},required:!0},total:{type:Number,default:0,required:!0}},data:function(){return{search:this.$route.query.q,options:{}}},computed:{headers:function(){return[{text:this.$t("dataset.text"),value:"text",sortable:!1},{text:this.$t("dataset.metadata"),value:"meta",sortable:!1},{text:this.$t("comments.comments"),value:"commentCount",sortable:!1},{text:this.$t("dataset.action"),value:"action",sortable:!1}]}},watch:{options:{handler:function(){this.$emit("update:query",{query:{limit:this.options.itemsPerPage.toString(),offset:((this.options.page-1)*this.options.itemsPerPage).toString(),q:this.search}})},deep:!0},search:function(){this.$emit("update:query",{query:{limit:this.options.itemsPerPage.toString(),offset:"0",q:this.search}}),this.options.page=1}},methods:{toLabeling:function(e){var t=this.items.indexOf(e),n=((this.options.page-1)*this.options.itemsPerPage+t+1).toString();this.$emit("click:labeling",{page:n,q:this.search})}}})),f=n(28),m=n(32),v=n.n(m),h=n(192),x=n(1095),_=n(498),component=Object(f.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{attrs:{value:e.value,headers:e.headers,items:e.items,options:e.options,"server-items-length":e.total,search:e.search,loading:e.isLoading,"loading-text":e.$t("generic.loading"),"no-data-text":e.$t("vuetify.noDataAvailable"),"footer-props":{showFirstLastPage:!0,"items-per-page-options":[10,50,100],"items-per-page-text":e.$t("vuetify.itemsPerPageText"),"page-text":e.$t("dataset.pageText")},"item-key":"id","show-select":""},on:{"update:options":function(t){e.options=t},input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-text-field",{attrs:{"prepend-inner-icon":"search",label:e.$t("generic.search"),"single-line":"","hide-details":"",filled:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"item.text",fn:function(t){var r=t.item;return[n("span",{staticClass:"d-flex d-sm-none"},[e._v(e._s(e._f("truncate")(r.text,50)))]),e._v(" "),n("span",{staticClass:"d-none d-sm-flex"},[e._v(e._s(e._f("truncate")(r.text,200)))])]}},{key:"item.commentCount",fn:function(t){var r=t.item;return[n("span",[e._v(" "+e._s(r.commentCount)+" ")])]}},{key:"item.action",fn:function(t){var r=t.item;return[n("v-btn",{attrs:{small:"",color:"primary text-capitalize"},on:{click:function(t){return e.toLabeling(r)}}},[e._v("\n      "+e._s(e.$t("dataset.annotate"))+"\n    ")])]}}],null,!0)})}),[],!1,null,null,null),$=component.exports;v()(component,{VBtn:h.a,VDataTable:x.a,VTextField:_.a});var y=n(497),k=o.a.extend({components:{ConfirmForm:y.a},props:{selected:{type:Array,default:function(){return[]}}}}),w=Object(f.a)(k,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("confirm-form",{attrs:{items:e.selected,title:e.$t("dataset.deleteDocumentsTitle"),message:e.$t("dataset.deleteDocumentsMessage"),"item-key":"text"},on:{ok:function(t){return e.$emit("remove")},cancel:function(t){return e.$emit("cancel")}}})}),[],!1,null,null,null).exports,D=o.a.extend({components:{ConfirmForm:y.a}}),F=Object(f.a)(D,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("confirm-form",{attrs:{title:e.$t("dataset.deleteBulkDocumentsTitle"),message:e.$t("dataset.deleteBulkDocumentsMessage"),"item-key":"text"},on:{ok:function(t){return e.$emit("remove")},cancel:function(t){return e.$emit("cancel")}}})}),[],!1,null,null,null).exports,j=n(492),R=n(499),V=o.a.extend({components:{BaseCard:j.a},props:{formats:{type:Array,default:function(){return[]},required:!0}},data:function(){return{file:null,filename:null,fileFormatRules:R.b,onlyApproved:!1,selectedFormat:null,valid:!1}},methods:{cancel:function(){this.$refs.format.reset(),this.$emit("cancel")},download:function(){this.$emit("download",this.selectedFormat,this.filename,this.onlyApproved),this.cancel()}}}),C=n(606),A=n(563),L=n(1085),T=n(1086),E=n(52),I=Object(f.a)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("base-card",{attrs:{disabled:!e.valid,title:"Export Data","agree-text":"Export","cancel-text":"Cancel"},on:{agree:e.download,cancel:e.cancel},scopedSlots:e._u([{key:"content",fn:function(){return[n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("h2",[e._v(e._s(e.$t("dataset.importDataMessage1")))]),e._v(" "),n("v-radio-group",{ref:"format",attrs:{rules:e.fileFormatRules(e.$t("rules.fileFormatRules"))},model:{value:e.selectedFormat,callback:function(t){e.selectedFormat=t},expression:"selectedFormat"}},e._l(e.formats,(function(e,i){return n("v-radio",{key:i,attrs:{label:e.text,value:e}})})),1),e._v(" "),e.selectedFormat?n("v-sheet",{staticClass:"mb-5 pa-5",attrs:{dark:!e.$vuetify.theme.dark,light:e.$vuetify.theme.dark}},[n("pre",[e._v(e._s(e.selectedFormat.example))])]):e._e(),e._v(" "),n("h2",[e._v(e._s(e.$t("dataset.exportDataMessage2")))]),e._v(" "),n("v-text-field",{attrs:{placeholder:"Name the file",rules:[function(e){return!!e||"File name is required"}]},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}}),e._v(" "),n("v-checkbox",{attrs:{label:"Export only approved documents",color:"success","hide-details":""},model:{value:e.onlyApproved,callback:function(t){e.onlyApproved=t},expression:"onlyApproved"}})],1)]},proxy:!0}])})}),[],!1,null,null,null),S=I.exports;v()(I,{VCheckbox:C.a,VForm:A.a,VRadio:L.a,VRadioGroup:T.a,VSheet:E.a,VTextField:_.a});n(20);var P={components:{BaseCard:j.a},props:{uploadDocument:{type:Function,default:function(){},required:!0},formats:{type:Array,default:function(){return[]},required:!0}},data:function(){return{valid:!1,file:null,selectedFormat:null,fileFormatRules:R.b,uploadFileRules:R.h,showError:!1,errors:[],errorMsg:""}},computed:{acceptType:function(){return this.selectedFormat?".".concat(this.selectedFormat.extension):".txt"}},methods:{cancel:function(){this.$emit("cancel")},reset:function(){this.$refs.form.reset()},create:function(){var e=this;this.errors=[];var t=[],n=this.selectedFormat.type;this.file.forEach((function(e){t.push({format:n,file:e})}));var p=Promise.resolve();t.forEach((function(t){p=p.then((function(){return e.uploadDocument(t.file,t.format)})).catch((function(){e.errors.push(t.file.name),e.showError=!0}))})),p.finally((function(){e.errors.length?e.errorMsg=e.errors.join(", "):(e.reset(),e.$emit("success"))}))}}},O=n(595),M=n(791),B=Object(f.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("base-card",{attrs:{disabled:!e.valid,title:e.$t("dataset.importDataTitle"),"agree-text":e.$t("generic.upload"),"cancel-text":e.$t("generic.cancel")},on:{agree:e.create,cancel:e.cancel},scopedSlots:e._u([{key:"content",fn:function(){return[n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-alert",{directives:[{name:"show",rawName:"v-show",value:e.showError,expression:"showError"}],attrs:{type:"error",dismissible:""},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\n        "+e._s(e.$t("errors.fileCannotUpload")+e.errorMsg)+"\n      ")]),e._v(" "),n("h2",[e._v(e._s(e.$t("dataset.importDataMessage1")))]),e._v(" "),n("v-radio-group",{attrs:{rules:e.fileFormatRules(e.$t("rules.fileFormatRules"))},model:{value:e.selectedFormat,callback:function(t){e.selectedFormat=t},expression:"selectedFormat"}},e._l(e.formats,(function(e,i){return n("v-radio",{key:i,attrs:{label:e.text,value:e}})})),1),e._v(" "),e.selectedFormat?n("v-sheet",{staticClass:"mb-5 pa-5",attrs:{dark:!e.$vuetify.theme.dark,light:e.$vuetify.theme.dark}},[n("pre",[e._v(e._s(e.selectedFormat.example))])]):e._e(),e._v(" "),n("h2",[e._v(e._s(e.$t("dataset.importDataMessage2")))]),e._v(" "),n("v-file-input",{attrs:{multiple:"",accept:e.acceptType,rules:e.uploadFileRules(e.$t("rules.uploadFileRules")),label:e.$t("labels.filePlaceholder")},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)]},proxy:!0}])})}),[],!1,null,null,null),U=B.exports;v()(B,{VAlert:O.a,VFileInput:M.a,VForm:A.a,VRadio:L.a,VRadioGroup:T.a,VSheet:E.a});var N=n(594),z=o.a.extend({components:{ActionMenu:N.a},computed:{items:function(){return[{title:this.$t("dataset.importDataset"),icon:"mdi-upload",event:"upload"},{title:this.$t("dataset.exportDataset"),icon:"mdi-download",event:"download"}]}}}),Q=Object(f.a)(z,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("action-menu",{attrs:{items:e.items,text:e.$t("dataset.actions")},on:{create:function(t){return e.$emit("create")},upload:function(t){return e.$emit("upload")},download:function(t){return e.$emit("download")}}})}),[],!1,null,null,null).exports,G=o.a.extend({layout:"project",components:{ActionMenu:Q,DocumentList:$,FormDelete:w,FormDeleteBulk:F,FormDownload:S,FormUpload:U},fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.$services.document.list(e.projectId,e.$route.query);case 3:e.item=t.sent,e.isLoading=!1;case 5:case"end":return t.stop()}}),t)})))()},data:function(){return{dialogCreate:!1,dialogDelete:!1,dialogDeleteAll:!1,dialogUpload:!1,dialogDownload:!1,formats:[],project:{},item:{},selected:[],isLoading:!1}},computed:{canDelete:function(){return this.selected.length>0},projectId:function(){return this.$route.params.id}},watch:{"$route.query":c.a.debounce((function(){this.$fetch()}),1e3)},created:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$services.project.findById(e.projectId);case 2:e.project=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{remove:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$services.document.bulkDelete(e.projectId,e.selected);case 2:e.$fetch(),e.dialogDelete=!1,e.selected=[];case 5:case"end":return t.stop()}}),t)})))()},removeAll:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$services.document.bulkDelete(e.projectId,[]);case 2:e.$fetch(),e.dialogDeleteAll=!1,e.selected=[];case 5:case"end":return t.stop()}}),t)})))()},download:function(e,t,n){var o=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.$services.document.download(o.projectId,t,e,n);case 2:case"end":return r.stop()}}),r)})))()},upload:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$services.document.upload(n.projectId,e,t);case 2:case"end":return r.stop()}}),r)})))()},updateQuery:function(e){this.$router.push(e)},movePage:function(e){this.updateQuery({path:this.localePath(this.project.pageLink),query:e})}},validate:function(e){var t=e.params,n=e.query;return/^\d+$/.test(t.id)&&/^\d+|$/.test(n.limit)&&/^\d+|$/.test(n.offset)}}),J=(n(792),n(506)),K=n(490),Y=n(569),H=n(556),W=Object(f.a)(G,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[n("action-menu",{on:{upload:function(t){e.dialogUpload=!0},download:function(t){e.dialogDownload=!0}}}),e._v(" "),n("v-btn",{staticClass:"text-capitalize ms-2",attrs:{disabled:!e.canDelete,outlined:""},on:{click:function(t){t.stopPropagation(),e.dialogDelete=!0}}},[e._v("\n      "+e._s(e.$t("generic.delete"))+"\n    ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"text-capitalize",attrs:{disabled:!e.item.count,color:"error"},on:{click:function(t){e.dialogDeleteAll=!0}}},[e._v("\n      "+e._s(e.$t("generic.deleteAll"))+"\n    ")]),e._v(" "),n("v-dialog",{model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[n("form-delete",{attrs:{selected:e.selected},on:{cancel:function(t){e.dialogDelete=!1},remove:e.remove}})],1),e._v(" "),n("v-dialog",{model:{value:e.dialogDeleteAll,callback:function(t){e.dialogDeleteAll=t},expression:"dialogDeleteAll"}},[n("form-delete-bulk",{on:{cancel:function(t){e.dialogDeleteAll=!1},remove:e.removeAll}})],1),e._v(" "),n("v-dialog",{model:{value:e.dialogUpload,callback:function(t){e.dialogUpload=t},expression:"dialogUpload"}},[n("form-upload",{attrs:{formats:e.project.uploadFormats,"upload-document":e.upload},on:{cancel:function(t){e.dialogUpload=!1},success:function(t){e.$fetch(),e.dialogUpload=!1}}})],1),e._v(" "),n("v-dialog",{model:{value:e.dialogDownload,callback:function(t){e.dialogDownload=t},expression:"dialogDownload"}},[n("form-download",{attrs:{formats:e.project.downloadFormats},on:{cancel:function(t){e.dialogDownload=!1},download:e.download}})],1)],1),e._v(" "),n("document-list",{attrs:{items:e.item.items,"is-loading":e.isLoading,total:e.item.count},on:{"update:query":e.updateQuery,"click:labeling":e.movePage},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)}),[],!1,null,"4bb9dbe2",null);t.default=W.exports;v()(W,{VBtn:h.a,VCard:J.a,VCardTitle:K.c,VDialog:Y.a,VSpacer:H.a})},497:function(e,t,n){"use strict";var r=n(2),o=n(492),l=r.a.extend({components:{BaseCard:o.a},props:{title:{type:String,default:"",required:!0},message:{type:String,default:"",required:!0},items:{type:Array,default:function(){return[]},required:!1},itemKey:{type:String,default:"",required:!1},buttonTrueText:{type:String,default:"Yes"},buttonFalseText:{type:String,default:"Cancel"}},methods:{ok:function(){this.$emit("ok")},cancel:function(){this.$emit("cancel")}}}),c=n(28),d=n(32),f=n.n(d),m=n(172),v=n(107),h=n(39),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("base-card",{attrs:{title:e.title,"agree-text":e.buttonTrueText,"cancel-text":e.buttonFalseText},on:{agree:e.ok,cancel:e.cancel},scopedSlots:e._u([{key:"content",fn:function(){return[e._v("\n    "+e._s(e.message)+"\n    "),n("v-list",{attrs:{dense:""}},e._l(e.items,(function(t,i){return n("v-list-item",{key:i},[n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t[e.itemKey]))])],1)],1)})),1)]},proxy:!0}])})}),[],!1,null,null,null);t.a=component.exports;f()(component,{VList:m.a,VListItem:v.a,VListItemContent:h.b,VListItemTitle:h.d})},499:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"j",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return v})),n.d(t,"d",(function(){return h})),n.d(t,"g",(function(){return x}));var r=function(e){return[function(t){return!!t||e.labelRequired},function(t){return t&&t.length<=30||e.labelLessThan30Chars}]},o=function(e){return[function(t){return!!t||e.userNameRequired},function(t){return t&&t.length<=30||e.userNameLessThan30Chars}]},l=function(e){return[function(t){return!!t||e.projectNameRequired},function(t){return t&&t.length<=30||e.projectNameLessThan30Chars}]},c=function(e){return[function(t){return!!t||e.descriptionRequired},function(t){return t&&t.length<=100||e.descriptionLessThan30Chars}]},d=function(e){return[function(t){return!!t||e.projectTypeRequired}]},f=function(e){return[function(t){return!!t||e.fileFormatRequired}]},m=function(e){return[function(t){return!!t||e.fileRequired},function(t){return!t||t.some((function(e){return e.size<1e8}))||e.fileLessThan1MB}]},v=function(e){return[function(t){return!!t||e.fileRequired},function(t){return!t||t.size<1e6||e.fileLessThan1MB}]},h=function(e){return[function(t){return!!t||e.passwordRequired},function(t){return t&&t.length<=30||e.passwordLessThan30Chars}]},x=function(){return[function(e){return!!e||"Name is required"}]}},583:function(e,t,n){var content=n(793);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(25).default)("8d958c7a",content,!0,{sourceMap:!1})},594:function(e,t,n){"use strict";var r=n(2).a.extend({props:{text:{type:String,default:"Actions"},items:{type:Array,default:function(){return[]},required:!0}}}),o=n(28),l=n(32),c=n.n(l),d=n(192),f=n(171),m=n(172),v=n(107),h=n(39),x=n(94),_=n(473),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{"offset-y":"","open-on-hover":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({attrs:{color:"primary text-capitalize"}},r),[e._v("\n      "+e._s(e.text)+"\n      "),n("v-icon",[e._v("mdi-menu-down")])],1)]}}])},[e._v(" "),n("v-list",e._l(e.items,(function(t,r){return n("v-list-item",{key:r,on:{click:function(n){return e.$emit(t.event)}}},[n("v-list-item-icon",[n("v-icon",[e._v(e._s(t.icon))])],1),e._v(" "),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.title))])],1)],1)})),1)],1)}),[],!1,null,null,null);t.a=component.exports;c()(component,{VBtn:d.a,VIcon:f.a,VList:m.a,VListItem:v.a,VListItemContent:h.b,VListItemIcon:x.a,VListItemTitle:h.d,VMenu:_.a})},792:function(e,t,n){"use strict";var r=n(583);n.n(r).a},793:function(e,t,n){(t=n(24)(!1)).push([e.i,"[data-v-4bb9dbe2] .v-dialog{width:800px}",""]),e.exports=t}}]);